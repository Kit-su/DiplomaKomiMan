{"expireTime":9007200971572806000,"key":"transformer-remark-markdown-ast-4181bda29584a75830695304a5e19859-gatsby-remark-prismjs-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Branch and Bound on Cost","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":27,"offset":27},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":27,"offset":27},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is a recursive algorithm, similar to depth first search, that is guaranteed to find the optimal solution.","position":{"start":{"line":4,"column":1,"offset":29},"end":{"line":4,"column":111,"offset":139},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":29},"end":{"line":4,"column":111,"offset":139},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The candidate solution space is generated by systematically traversing possible paths, and discarding large subsets of fruitless candidates by comparing the current solution to an upper and lower bound. In this case, the upper bound is the best path found so far.","position":{"start":{"line":6,"column":1,"offset":141},"end":{"line":6,"column":264,"offset":404},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":141},"end":{"line":6,"column":264,"offset":404},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"While evaluating paths, if at any point the current solution is already more expensive (longer) than the best complete path discovered, there is no point continuing.","position":{"start":{"line":8,"column":1,"offset":406},"end":{"line":8,"column":166,"offset":571},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":406},"end":{"line":8,"column":166,"offset":571},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, imagine:","position":{"start":{"line":10,"column":1,"offset":573},"end":{"line":10,"column":22,"offset":594},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":573},"end":{"line":10,"column":22,"offset":594},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A -> B -> C -> D -> E -> A was already found with a cost of 100.","position":{"start":{"line":12,"column":4,"offset":599},"end":{"line":12,"column":68,"offset":663},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":599},"end":{"line":12,"column":68,"offset":663},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":596},"end":{"line":12,"column":68,"offset":663},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"We are evaluating A -> C -> E, which has a cost of 110. There is ","position":{"start":{"line":13,"column":4,"offset":667},"end":{"line":13,"column":69,"offset":732},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"no point","position":{"start":{"line":13,"column":71,"offset":734},"end":{"line":13,"column":79,"offset":742},"indent":[]}}],"position":{"start":{"line":13,"column":69,"offset":732},"end":{"line":13,"column":81,"offset":744},"indent":[]}},{"type":"text","value":" evaluating the remaining solutions.","position":{"start":{"line":13,"column":81,"offset":744},"end":{"line":13,"column":117,"offset":780},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":667},"end":{"line":13,"column":117,"offset":780},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":664},"end":{"line":13,"column":117,"offset":780},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Instead of continuing to evaluate all of the child solutions from here, we can go down a different path, eliminating candidates not worth evaluating:","position":{"start":{"line":14,"column":4,"offset":784},"end":{"line":14,"column":153,"offset":933},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":784},"end":{"line":14,"column":153,"offset":933},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">A -> C -> E -> D -> B -> A</code>","position":{"start":{"line":15,"column":6,"offset":939},"end":{"line":15,"column":34,"offset":967},"indent":[]}}],"position":{"start":{"line":15,"column":6,"offset":939},"end":{"line":15,"column":34,"offset":967},"indent":[]}}],"position":{"start":{"line":15,"column":4,"offset":937},"end":{"line":15,"column":34,"offset":967},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">A -> C -> E -> B -> D -> A</code>","position":{"start":{"line":16,"column":6,"offset":973},"end":{"line":16,"column":34,"offset":1001},"indent":[]}}],"position":{"start":{"line":16,"column":6,"offset":973},"end":{"line":16,"column":34,"offset":1001},"indent":[]}}],"position":{"start":{"line":16,"column":4,"offset":971},"end":{"line":16,"column":34,"offset":1001},"indent":[]}}],"position":{"start":{"line":15,"column":4,"offset":937},"end":{"line":16,"column":34,"offset":1001},"indent":[4]}}],"position":{"start":{"line":14,"column":1,"offset":781},"end":{"line":16,"column":34,"offset":1001},"indent":[1,1]}}],"position":{"start":{"line":12,"column":1,"offset":596},"end":{"line":16,"column":34,"offset":1001},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Implementation is very similar to depth first search, with the exception that we cut paths that are already longer than the current best.","position":{"start":{"line":18,"column":1,"offset":1003},"end":{"line":18,"column":138,"offset":1140},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1003},"end":{"line":18,"column":138,"offset":1140},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Implementation","position":{"start":{"line":20,"column":4,"offset":1145},"end":{"line":20,"column":18,"offset":1159},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1142},"end":{"line":20,"column":18,"offset":1159},"indent":[]}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">branchAndBoundOnCost</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">points<span class=\"token punctuation\">,</span>\n  path <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  visited <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  overallBest <span class=\"token operator\">=</span> <span class=\"token number\">Infinity</span></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>visited <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// initial call</span>\n    path <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>points<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    points <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    visited <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// figure out which points are left</span>\n  <span class=\"token keyword\">const</span> available <span class=\"token operator\">=</span> <span class=\"token function\">setDifference</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">,</span> visited<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// calculate the cost, from here, to go home</span>\n  <span class=\"token keyword\">const</span> backToStart <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>path<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> cost <span class=\"token operator\">=</span> <span class=\"token function\">pathCost</span><span class=\"token punctuation\">(</span>backToStart<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cost <span class=\"token operator\">></span> overallBest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// we may not be done, but have already traveled further than the best path</span>\n    <span class=\"token comment\">// no reason to continue</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// still cheaper than the best, keep going deeper, and deeper, and deeper...</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>available<span class=\"token punctuation\">.</span>size <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// at the end of the path, return where we're at</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>cost<span class=\"token punctuation\">,</span> backToStart<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>bestCost<span class=\"token punctuation\">,</span> bestPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// for every point yet to be visited along this path</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> p <span class=\"token keyword\">of</span> available<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// go to that point</span>\n    visited<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// RECURSE - go through all the possible points from that point</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>curCost<span class=\"token punctuation\">,</span> curPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">branchAndBoundOnCost</span><span class=\"token punctuation\">(</span>\n      points<span class=\"token punctuation\">,</span>\n      path<span class=\"token punctuation\">,</span>\n      visited<span class=\"token punctuation\">,</span>\n      overallBest\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// if that path is better and complete, keep it</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curCost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>bestCost <span class=\"token operator\">||</span> curCost <span class=\"token operator\">&lt;</span> bestCost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span>bestCost<span class=\"token punctuation\">,</span> bestPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>curCost<span class=\"token punctuation\">,</span> curPath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>overallBest <span class=\"token operator\">||</span> bestCost <span class=\"token operator\">&lt;</span> overallBest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// found a new best complete path</span>\n        overallBest <span class=\"token operator\">=</span> bestCost<span class=\"token punctuation\">;</span>\n        self<span class=\"token punctuation\">.</span><span class=\"token function\">setBestPath</span><span class=\"token punctuation\">(</span>bestPath<span class=\"token punctuation\">,</span> bestCost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// go back up and make that point available again</span>\n    visited<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    path<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>bestCost<span class=\"token punctuation\">,</span> bestPath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":22,"column":1,"offset":1161},"end":{"line":90,"column":4,"offset":2873},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":91,"column":1,"offset":2874}}}}