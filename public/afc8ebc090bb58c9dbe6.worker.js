!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="ytY7")}({ytY7:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"SET_VIEWPORT_STATE",(function(){return u})),n.d(o,"RESET_EVALUATING_STATE",(function(){return l})),n.d(o,"RESET_BEST_PATH_STATE",(function(){return i})),n.d(o,"SET_ALGORITHM",(function(){return s})),n.d(o,"SET_DELAY",(function(){return a})),n.d(o,"SET_EVALUATING_DETAIL_LEVEL",(function(){return f})),n.d(o,"SET_SHOW_BEST_PATH",(function(){return c})),n.d(o,"START_SOLVING",(function(){return d})),n.d(o,"GO_FULL_SPEED",(function(){return p})),n.d(o,"PAUSE",(function(){return T})),n.d(o,"UNPAUSE",(function(){return E})),n.d(o,"STOP_SOLVING",(function(){return S})),n.d(o,"SET_BEST_PATH",(function(){return _})),n.d(o,"SET_EVALUATING_PATHS",(function(){return v})),n.d(o,"START_DEFINING_POINTS",(function(){return P})),n.d(o,"ADD_DEFINED_POINT",(function(){return g})),n.d(o,"STOP_DEFINING_POINTS",(function(){return y})),n.d(o,"SET_POINT_COUNT",(function(){return A})),n.d(o,"SET_POINTS",(function(){return h})),n.d(o,"SET_DEFAULT_MAP",(function(){return O})),n.d(o,"TOGGLE_SITE_INFO_OPEN",(function(){return I})),n.d(o,"TOGGLE_ALG_INFO_OPEN",(function(){return L})),n.d(o,"toggleSiteInfoOpen",(function(){return w})),n.d(o,"toggleAlgInfoOpen",(function(){return D})),n.d(o,"setViewportState",(function(){return G})),n.d(o,"startSolvingAction",(function(){return C})),n.d(o,"stopSolvingAction",(function(){return m})),n.d(o,"setAlgorithm",(function(){return b})),n.d(o,"setDelay",(function(){return U})),n.d(o,"setEvaluatingDetailLevel",(function(){return F})),n.d(o,"setShowBestPath",(function(){return V})),n.d(o,"resetSolverState",(function(){return H})),n.d(o,"startSolving",(function(){return R})),n.d(o,"goFullSpeed",(function(){return B})),n.d(o,"pause",(function(){return j})),n.d(o,"unpause",(function(){return k})),n.d(o,"stopSolving",(function(){return x})),n.d(o,"setEvaluatingPath",(function(){return W})),n.d(o,"setEvaluatingPaths",(function(){return Y})),n.d(o,"setBestPath",(function(){return z})),n.d(o,"startDefiningPoints",(function(){return q})),n.d(o,"addDefinedPoint",(function(){return J})),n.d(o,"stopDefiningPoints",(function(){return K})),n.d(o,"setPointCount",(function(){return Q})),n.d(o,"randomizePoints",(function(){return X})),n.d(o,"setDefaultMap",(function(){return Z}));var r=e=>{"undefined"!=typeof window&&window.dataLayer?window.dataLayer.push(e):console.log(e)};const u="SET_VIEWPORT_STATE",l="RESET_EVALUATING_STATE",i="RESET_BEST_PATH_STATE",s="SET_ALGORITHM",a="SET_DELAY",f="SET_EVALUATING_DETAIL_LEVEL",c="SET_SHOW_BEST_PATH",d="START_SOLVING",p="GO_FULL_SPEED",T="PAUSE",E="UNPAUSE",S="STOP_SOLVING",_="SET_BEST_PATH",v="SET_EVALUATING_PATHS",P="START_DEFINING_POINTS",g="ADD_DEFINED_POINT",y="STOP_DEFINING_POINTS",A="SET_POINT_COUNT",h="SET_POINTS",O="SET_DEFAULT_MAP",I="TOGGLE_SITE_INFO_OPEN",L="TOGGLE_ALG_INFO_OPEN",N=(e,t)=>Math.random()*(e-t)+t,w=()=>({type:I}),D=()=>({type:L}),G=e=>({type:u,viewport:e}),M=()=>({type:l}),C=(e,t,n)=>({type:d,points:e,delay:t,evaluatingDetailLevel:n,fullSpeed:!1}),m=()=>({type:S}),b=function(e,t){return void 0===t&&(t={}),n=>{n(M()),n(((e,t)=>({type:s,algorithm:e,defaults:t}))(e,t))}},U=e=>({type:a,delay:e}),F=e=>({type:f,level:e}),V=e=>({type:c,show:e}),H=()=>e=>{e(x()),e(M()),e({type:i})},R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{const{algorithm:o,pointCount:u}=n();r({event:"start-solving",algorithm:o,pointCount:u}),e(M()),e(C.apply(void 0,t))}},B=()=>({type:p}),j=()=>({type:T}),k=()=>({type:E}),x=()=>e=>{e(M()),e(m())},W=(e,t)=>({type:v,paths:[e],cost:t}),Y=(e,t)=>({type:v,paths:e,cost:t}),z=(e,t)=>({type:_,path:e,cost:t}),q=()=>e=>{e(H()),e({type:P})},J=e=>({type:g,point:e}),K=()=>({type:y}),Q=e=>t=>{t(H()),t((e=>({type:A,count:e}))(e))},X=e=>(t,n)=>{const{pointCount:o}=n(),{top:r,bottom:u,left:l,right:i}=e,s=Array.from({length:o}).map(e=>[N(i,l),N(r,u)]);t(H()),t((e=>({type:h,points:e}))(s))},Z=function(){return e=>{e(H()),e({type:O})}};const $=e=>e.slice(0,-1).map((t,n)=>((e,t)=>{const[n,o]=e,[r,u]=t;if(o===u&&n===r)return 0;var l=Math.PI*o/180,i=Math.PI*u/180,s=n-r,a=Math.PI*s/180,f=Math.sin(l)*Math.sin(i)+Math.cos(l)*Math.cos(i)*Math.cos(a);return f>1&&(f=1),60*(f=180*(f=Math.acos(f))/Math.PI)*1.1515*1.609344})(t,e[n+1])).reduce((e,t)=>e+t,0),ee=[255,87,34,225],te=[180,180,180,240],ne=async(e,t=[],n=null,o=null)=>{null===n&&(t=[e.shift()],e=new Set(e),n=new Set),self.setEvaluatingPaths(()=>({paths:[{path:t.slice(0,t.length-1),color:te},{path:t.slice(t.length-2,t.length+1),color:ee}]}),2),await self.sleep();const r=((e,t)=>{const n=new Set(e);return t.forEach(e=>{n.delete(e)}),n})(e,n);if(0===r.size){const e=[...t,t[0]],n=$(e);return self.setEvaluatingPath(()=>({path:{path:e,color:te}}),n),await self.sleep(),[n,e]}let[u,l]=[null,null];for(const i of r){n.add(i),t.push(i);const[r,s]=await ne(e,t,n,o);(null===u||r<u)&&([u,l]=[r,s],(null===o||u<o)&&(o=u,self.setBestPath(l,u))),n.delete(i),t.pop(),self.setEvaluatingPath(()=>({path:{path:t,color:te}}),2),await self.sleep()}return[u,l]};(e=>{const t=(e=>async function(){await e.apply(void 0,arguments),self.postMessage(m())})(e);self.solverConfig={detailLevel:0,delay:10,fullSpeed:!1,paused:!1},self.setBestPath=function(){self.postMessage(z.apply(o,arguments))},self.setEvaluatingPaths=function(e,t){if(void 0===t&&(t=1),self.solverConfig.detailLevel>=t){const{paths:t,cost:n}=e();self.postMessage(Y(t,n))}},self.setEvaluatingPath=function(e,t){if(void 0===t&&(t=1),self.solverConfig.detailLevel>=t){const{path:t,cost:n}=e();self.postMessage(W(t,n))}},self.waitPause=async()=>{for(;self.solverConfig.paused;)await new Promise(e=>setTimeout(e,500))},self.sleep=async()=>{if(self.solverConfig.paused)return await self.waitPause();const e=self.solverConfig.fullSpeed?0:self.solverConfig.delay||10;return new Promise(t=>{setTimeout(t,e)})},self.onmessage=async e=>{let{data:n}=e;switch(n.type){case d:self.solverConfig.delay=n.delay,self.solverConfig.detailLevel=n.evaluatingDetailLevel,self.solverConfig.fullSpeed=n.fullSpeed,t(n.points);break;case a:self.solverConfig.delay=n.delay;break;case f:self.solverConfig.detailLevel=n.level;break;case p:self.solverConfig.evaluatingDetailLevel=0,self.solverConfig.fullSpeed=!0;break;case T:self.solverConfig.paused=!0;break;case E:self.solverConfig.paused=!1;break;default:throw new Error("invalid action sent to solver "+n.type)}}})(ne)}});
//# sourceMappingURL=afc8ebc090bb58c9dbe6.worker.js.map