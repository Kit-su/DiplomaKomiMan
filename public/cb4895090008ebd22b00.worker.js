!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s="rX9U")}({rX9U:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"SET_VIEWPORT_STATE",(function(){return u})),n.d(o,"RESET_EVALUATING_STATE",(function(){return i})),n.d(o,"RESET_BEST_PATH_STATE",(function(){return s})),n.d(o,"SET_ALGORITHM",(function(){return a})),n.d(o,"SET_DELAY",(function(){return l})),n.d(o,"SET_EVALUATING_DETAIL_LEVEL",(function(){return f})),n.d(o,"SET_SHOW_BEST_PATH",(function(){return c})),n.d(o,"START_SOLVING",(function(){return d})),n.d(o,"GO_FULL_SPEED",(function(){return p})),n.d(o,"PAUSE",(function(){return T})),n.d(o,"UNPAUSE",(function(){return E})),n.d(o,"STOP_SOLVING",(function(){return S})),n.d(o,"SET_BEST_PATH",(function(){return _})),n.d(o,"SET_EVALUATING_PATHS",(function(){return P})),n.d(o,"START_DEFINING_POINTS",(function(){return v})),n.d(o,"ADD_DEFINED_POINT",(function(){return g})),n.d(o,"STOP_DEFINING_POINTS",(function(){return y})),n.d(o,"SET_POINT_COUNT",(function(){return A})),n.d(o,"SET_POINTS",(function(){return h})),n.d(o,"SET_DEFAULT_MAP",(function(){return O})),n.d(o,"TOGGLE_SITE_INFO_OPEN",(function(){return I})),n.d(o,"TOGGLE_ALG_INFO_OPEN",(function(){return L})),n.d(o,"toggleSiteInfoOpen",(function(){return D})),n.d(o,"toggleAlgInfoOpen",(function(){return G})),n.d(o,"setViewportState",(function(){return w})),n.d(o,"startSolvingAction",(function(){return C})),n.d(o,"stopSolvingAction",(function(){return m})),n.d(o,"setAlgorithm",(function(){return b})),n.d(o,"setDelay",(function(){return U})),n.d(o,"setEvaluatingDetailLevel",(function(){return F})),n.d(o,"setShowBestPath",(function(){return V})),n.d(o,"resetSolverState",(function(){return H})),n.d(o,"startSolving",(function(){return R})),n.d(o,"goFullSpeed",(function(){return B})),n.d(o,"pause",(function(){return j})),n.d(o,"unpause",(function(){return k})),n.d(o,"stopSolving",(function(){return x})),n.d(o,"setEvaluatingPath",(function(){return W})),n.d(o,"setEvaluatingPaths",(function(){return X})),n.d(o,"setBestPath",(function(){return Y})),n.d(o,"startDefiningPoints",(function(){return z})),n.d(o,"addDefinedPoint",(function(){return q})),n.d(o,"stopDefiningPoints",(function(){return J})),n.d(o,"setPointCount",(function(){return K})),n.d(o,"randomizePoints",(function(){return Q})),n.d(o,"setDefaultMap",(function(){return Z}));var r=t=>{"undefined"!=typeof window&&window.dataLayer?window.dataLayer.push(t):console.log(t)};const u="SET_VIEWPORT_STATE",i="RESET_EVALUATING_STATE",s="RESET_BEST_PATH_STATE",a="SET_ALGORITHM",l="SET_DELAY",f="SET_EVALUATING_DETAIL_LEVEL",c="SET_SHOW_BEST_PATH",d="START_SOLVING",p="GO_FULL_SPEED",T="PAUSE",E="UNPAUSE",S="STOP_SOLVING",_="SET_BEST_PATH",P="SET_EVALUATING_PATHS",v="START_DEFINING_POINTS",g="ADD_DEFINED_POINT",y="STOP_DEFINING_POINTS",A="SET_POINT_COUNT",h="SET_POINTS",O="SET_DEFAULT_MAP",I="TOGGLE_SITE_INFO_OPEN",L="TOGGLE_ALG_INFO_OPEN",N=(t,e)=>Math.random()*(t-e)+e,D=()=>({type:I}),G=()=>({type:L}),w=t=>({type:u,viewport:t}),M=()=>({type:i}),C=(t,e,n)=>({type:d,points:t,delay:e,evaluatingDetailLevel:n,fullSpeed:!1}),m=()=>({type:S}),b=function(t,e){return void 0===e&&(e={}),n=>{n(M()),n(((t,e)=>({type:a,algorithm:t,defaults:e}))(t,e))}},U=t=>({type:l,delay:t}),F=t=>({type:f,level:t}),V=t=>({type:c,show:t}),H=()=>t=>{t(x()),t(M()),t({type:s})},R=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t,n)=>{const{algorithm:o,pointCount:u}=n();r({event:"start-solving",algorithm:o,pointCount:u}),t(M()),t(C.apply(void 0,e))}},B=()=>({type:p}),j=()=>({type:T}),k=()=>({type:E}),x=()=>t=>{t(M()),t(m())},W=(t,e)=>({type:P,paths:[t],cost:e}),X=(t,e)=>({type:P,paths:t,cost:e}),Y=(t,e)=>({type:_,path:t,cost:e}),z=()=>t=>{t(H()),t({type:v})},q=t=>({type:g,point:t}),J=()=>({type:y}),K=t=>e=>{e(H()),e((t=>({type:A,count:t}))(t))},Q=t=>(e,n)=>{const{pointCount:o}=n(),{top:r,bottom:u,left:i,right:s}=t,a=Array.from({length:o}).map(t=>[N(s,i),N(r,u)]);e(H()),e((t=>({type:h,points:t}))(a))},Z=function(){return t=>{t(H()),t({type:O})}};const $=t=>t.slice(0,-1).map((e,n)=>((t,e)=>{const[n,o]=t,[r,u]=e;if(o===u&&n===r)return 0;var i=Math.PI*o/180,s=Math.PI*u/180,a=n-r,l=Math.PI*a/180,f=Math.sin(i)*Math.sin(s)+Math.cos(i)*Math.cos(s)*Math.cos(l);return f>1&&(f=1),60*(f=180*(f=Math.acos(f))/Math.PI)*1.1515*1.609344})(e,t[n+1])).reduce((t,e)=>t+e,0),tt=[255,87,34,225],et=[180,180,180,240];(t=>{const e=(t=>async function(){await t.apply(void 0,arguments),self.postMessage(m())})(t);self.solverConfig={detailLevel:0,delay:10,fullSpeed:!1,paused:!1},self.setBestPath=function(){self.postMessage(Y.apply(o,arguments))},self.setEvaluatingPaths=function(t,e){if(void 0===e&&(e=1),self.solverConfig.detailLevel>=e){const{paths:e,cost:n}=t();self.postMessage(X(e,n))}},self.setEvaluatingPath=function(t,e){if(void 0===e&&(e=1),self.solverConfig.detailLevel>=e){const{path:e,cost:n}=t();self.postMessage(W(e,n))}},self.waitPause=async()=>{for(;self.solverConfig.paused;)await new Promise(t=>setTimeout(t,500))},self.sleep=async()=>{if(self.solverConfig.paused)return await self.waitPause();const t=self.solverConfig.fullSpeed?0:self.solverConfig.delay||10;return new Promise(e=>{setTimeout(e,t)})},self.onmessage=async t=>{let{data:n}=t;switch(n.type){case d:self.solverConfig.delay=n.delay,self.solverConfig.detailLevel=n.evaluatingDetailLevel,self.solverConfig.fullSpeed=n.fullSpeed,e(n.points);break;case l:self.solverConfig.delay=n.delay;break;case f:self.solverConfig.detailLevel=n.level;break;case p:self.solverConfig.evaluatingDetailLevel=0,self.solverConfig.fullSpeed=!0;break;case T:self.solverConfig.paused=!0;break;case E:self.solverConfig.paused=!1;break;default:throw new Error("invalid action sent to solver "+n.type)}}})(async t=>{t.push(t[0]);let e=$(t),n=!0;for(self.setBestPath(t,e);n;){n=!1;for(let o=1;o<t.length-1;o++)for(let r=o+1;r<t.length-1;r++){[t[o],t[r]]=[t[r],t[o]];const u=$(t);self.setEvaluatingPaths(()=>({paths:[{path:t.slice(0,o),color:et},{path:t.slice(o+1,r),color:et},{path:t.slice(r+1),color:et},{path:[t[o-1],t[o],t[o+1]],color:tt},{path:[t[r-1],t[r],t[r+1]],color:tt}],cost:u})),await self.sleep(),u<e?(n=!0,e=u,self.setBestPath(t,e)):[t[o],t[r]]=[t[r],t[o]],self.setEvaluatingPath(()=>({path:{path:t,color:et}})),await self.sleep()}}})}});
//# sourceMappingURL=cb4895090008ebd22b00.worker.js.map