/*! For license information please see component---src-pages-index-js-10b95290c210c2a2c647.js.LICENSE.txt */
(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{"+H0l":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n("a3TU");function i(e,t){if(e.length!==t)return!1;for(var n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function a(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(r.b.debug&&!i(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}var s={};function c(e,t){s[e]||(s[e]=!0,console.warn("".concat(e," has been removed in version ").concat(t,", see upgrade guide for more information")))}},"+rE/":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("ODXe"),i=n("1OyB"),a=n("vuIU"),o=n("a3TU"),s=n("zXfU"),c=n("n+fv"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.phi,r=void 0===n?0:n,a=t.theta,o=void 0===a?0:a,s=t.radius,c=void 0===s?1:s,u=t.bearing,l=void 0===u?void 0:u,h=t.pitch,f=void 0===h?void 0:h,d=t.altitude,p=void 0===d?void 0:d,v=t.radiusScale,g=void 0===v?6371e3:v;Object(i.a)(this,e),this.phi=r,this.theta=o,this.radius=c||p||1,this.radiusScale=g||1,void 0!==l&&(this.bearing=l),void 0!==f&&(this.pitch=f),this.check()}return Object(a.a)(e,[{key:"toString",value:function(){return this.formatString(o.b)}},{key:"formatString",value:function(e){var t=e.printTypes,n=void 0!==t&&t,r=o.e;return"".concat(n?"Spherical":"","[rho:").concat(r(this.radius),",theta:").concat(r(this.theta),",phi:").concat(r(this.phi),"]")}},{key:"equals",value:function(e){return Object(o.d)(this.radius,e.radius)&&Object(o.d)(this.theta,e.theta)&&Object(o.d)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this.check()}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=Object(r.a)(e,3),n=t[0],i=t[1],a=t[2];this.radius=1+a/this.radiusScale,this.phi=Object(o.h)(i),this.theta=Object(o.h)(n)}},{key:"fromVector3",value:function(e){return this.radius=c.c(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(o.a)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new s.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-Object(o.c)(this.phi)},set:function(e){this.phi=Math.PI-Object(o.h)(e)}},{key:"pitch",get:function(){return Object(o.c)(this.theta)},set:function(e){this.theta=Object(o.h)(e)}},{key:"longitude",get:function(){return Object(o.c)(this.phi)}},{key:"latitude",get:function(){return Object(o.c)(this.theta)}},{key:"lng",get:function(){return Object(o.c)(this.phi)}},{key:"lat",get:function(){return Object(o.c)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}()},"1eIE":function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}n.d(t,"a",(function(){return r}))},2:function(e,t){},"23rh":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("U8pU"),a="object"!==(void 0===e?"undefined":Object(i.a)(e))||"[object process]"!==String(e)||e.browser,o=("undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document,void 0!==e&&e.version&&e.version.match(/v([0-9]*)/)),s=o&&parseFloat(o[1])||0}).call(this,n("8oxB"),n("yLpj"))},"2lZV":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));"undefined"!=typeof window&&window,void 0!==e||window;var r="undefined"!=typeof document?document:{}}).call(this,n("yLpj"))},3:function(e,t){},"41X0":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("md7G"),s=n("foSv"),c=n("s4An");var u=n("RHh3");function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Object(u.a)(e,arguments,Object(s.a)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(c.a)(n,e)})(e)}var h=n("a3TU"),f=n("tS8E");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var p=function(e){Object(a.a)(n,e);var t=d(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"to",value:function(e){return e===this?this:Object(h.f)(e)?this.toArray(e):this.toObject(e)}},{key:"toTarget",value:function(e){return e?this.to(e):this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(h.b)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(h.e)(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(h.d)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}},{key:"multiplyByScalar",value:function(e){return this.scale(e)}},{key:"check",value:function(){if(h.b.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"ELEMENTS",get:function(){return Object(f.a)(!1),0}},{key:"RANK",get:function(){return Object(f.a)(!1),0}},{key:"elements",get:function(){return this}}]),n}(l(Array))},"5ku3":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("U8pU"),i=n("I0ug");function a(){return!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,n("8oxB"))},"6pOq":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n("1OyB"),i=n("vuIU"),a=n("rePB"),o=n("17x9"),s=n("2lZV"),c=n("gYLD");var u={container:o.object,gl:o.object,mapboxApiAccessToken:o.string,mapboxApiUrl:o.string,attributionControl:o.bool,preserveDrawingBuffer:o.bool,reuseMaps:o.bool,transformRequest:o.func,mapOptions:o.object,mapStyle:o.oneOfType([o.string,o.object]),preventStyleDiffing:o.bool,visible:o.bool,asyncRender:o.bool,onLoad:o.func,onError:o.func,width:o.number,height:o.number,viewState:o.object,longitude:o.number,latitude:o.number,zoom:o.number,bearing:o.number,pitch:o.number,altitude:o.number},l={container:s.a.body,mapboxApiAccessToken:function(){var t=null;if("undefined"!=typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);t=n&&n[1]}t||void 0===e||(t=t||{}.MapboxAccessToken||{}.REACT_APP_MAPBOX_ACCESS_TOKEN);return t||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:function(){},onError:function(e){e&&console.error(e.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";e.debug&&o.checkPropTypes(u,e,"prop",t)}var f=function(){function e(t){var n=this;if(Object(r.a)(this,e),Object(a.a)(this,"props",l),Object(a.a)(this,"width",0),Object(a.a)(this,"height",0),Object(a.a)(this,"_fireLoadEvent",(function(){n.props.onLoad({type:"load",target:n._map})})),!t.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=t.mapboxgl,e.initialized||(e.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(t)}return Object(i.a)(e,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(e){return this._update(this.props,e),this}},{key:"redraw",value:function(){var e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(t){this._map=e.savedMap;var n=this._map.getContainer(),r=t.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,e.savedMap=null,t.mapStyle&&this._map.setStyle(Object(c.a)(t.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(t){if(t.reuseMaps&&e.savedMap)this._reuse(t);else{if(t.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,t.gl}}var r={container:t.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:Object(c.a)(t.mapStyle),interactive:!1,trackResize:!1,attributionControl:t.attributionControl,preserveDrawingBuffer:t.preserveDrawingBuffer};t.transformRequest&&(r.transformRequest=t.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},r,t.mapOptions)),this._map.once("load",t.onLoad),this._map.on("error",t.onError)}return this}},{key:"_destroy",value:function(){this._map&&(e.savedMap?this._map.remove():(e.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function(e){var t=this;h(e=Object.assign({},l,e),"Mapbox"),this.mapboxgl.accessToken=e.mapboxApiAccessToken||l.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=e.mapboxApiUrl,this._create(e);var n=e.container;Object.defineProperty(n,"offsetWidth",{get:function(){return t.width}}),Object.defineProperty(n,"clientWidth",{get:function(){return t.width}}),Object.defineProperty(n,"offsetHeight",{get:function(){return t.height}}),Object.defineProperty(n,"clientHeight",{get:function(){return t.height}});var r=this._map.getCanvas();r&&(r.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,t){if(this._map){h(t=Object.assign({},this.props,t),"Mapbox");var n=this._updateMapViewport(e,t),r=this._updateMapSize(e,t);this._updateMapStyle(e,t),t.asyncRender||!n&&!r||this.redraw(),this.props=t}}},{key:"_updateMapStyle",value:function(e,t){e.mapStyle!==t.mapStyle&&this._map.setStyle(Object(c.a)(t.mapStyle),{diff:!t.preventStyleDiffing})}},{key:"_updateMapSize",value:function(e,t){var n=e.width!==t.width||e.height!==t.height;return n&&(this.width=t.width,this.height=t.height,this._map.resize()),n}},{key:"_updateMapViewport",value:function(e,t){var n=this._getViewState(e),r=this._getViewState(t),i=r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude;return i&&(this._map.jumpTo(this._viewStateToMapboxProps(r)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude)),i}},{key:"_getViewState",value:function(e){var t=e.viewState||e,n=t.longitude,r=t.latitude,i=t.zoom,a=t.pitch,o=void 0===a?0:a,s=t.bearing,c=void 0===s?0:s,u=t.altitude;return{longitude:n,latitude:r,zoom:i,pitch:o,bearing:c,altitude:void 0===u?1.5:u}}},{key:"_checkStyleSheet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==s.a)try{var t=s.a.createElement("div");t.className="mapboxgl-map",t.style.display="none",s.a.body.appendChild(t);var n="static"!==window.getComputedStyle(t).position;if(!n){var r=s.a.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(e,"/mapbox-gl.css")),s.a.head.appendChild(r)}}catch(i){}}},{key:"_viewStateToMapboxProps",value:function(e){return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}}}]),e}();Object(a.a)(f,"initialized",!1),Object(a.a)(f,"propTypes",u),Object(a.a)(f,"defaultProps",l),Object(a.a)(f,"savedMap",null)}).call(this,n("8oxB"))},"7+mA":function(e,t,n){"use strict";var r=n("rePB");t.a={enable:function(e,t){return e(Object(r.a)({},t,!0))},disable:function(e,t){return e(Object(r.a)({},t,!1))},pixelStorei:function(e,t,n){return e(Object(r.a)({},t,n))},hint:function(e,t,n){return e(Object(r.a)({},t,n))},bindFramebuffer:function(e,t,n){var i;switch(t){case 36160:return e((i={},Object(r.a)(i,36006,n),Object(r.a)(i,36010,n),i));case 36009:return e(Object(r.a)({},36006,n));case 36008:return e(Object(r.a)({},36010,n));default:return null}},blendColor:function(e,t,n,i,a){return e(Object(r.a)({},32773,new Float32Array([t,n,i,a])))},blendEquation:function(e,t){var n;return e((n={},Object(r.a)(n,32777,t),Object(r.a)(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var i;return e((i={},Object(r.a)(i,32777,t),Object(r.a)(i,34877,n),i))},blendFunc:function(e,t,n){var i;return e((i={},Object(r.a)(i,32969,t),Object(r.a)(i,32968,n),Object(r.a)(i,32971,t),Object(r.a)(i,32970,n),i))},blendFuncSeparate:function(e,t,n,i,a){var o;return e((o={},Object(r.a)(o,32969,t),Object(r.a)(o,32968,n),Object(r.a)(o,32971,i),Object(r.a)(o,32970,a),o))},clearColor:function(e,t,n,i,a){return e(Object(r.a)({},3106,new Float32Array([t,n,i,a])))},clearDepth:function(e,t){return e(Object(r.a)({},2931,t))},clearStencil:function(e,t){return e(Object(r.a)({},2961,t))},colorMask:function(e,t,n,i,a){return e(Object(r.a)({},3107,[t,n,i,a]))},cullFace:function(e,t){return e(Object(r.a)({},2885,t))},depthFunc:function(e,t){return e(Object(r.a)({},2932,t))},depthRange:function(e,t,n){return e(Object(r.a)({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Object(r.a)({},2930,t))},frontFace:function(e,t){return e(Object(r.a)({},2886,t))},lineWidth:function(e,t){return e(Object(r.a)({},2849,t))},polygonOffset:function(e,t,n){var i;return e((i={},Object(r.a)(i,32824,t),Object(r.a)(i,10752,n),i))},sampleCoverage:function(e,t,n){var i;return e((i={},Object(r.a)(i,32938,t),Object(r.a)(i,32939,n),i))},scissor:function(e,t,n,i,a){return e(Object(r.a)({},3088,new Int32Array([t,n,i,a])))},stencilMask:function(e,t){var n;return e((n={},Object(r.a)(n,2968,t),Object(r.a)(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Object(r.a)({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,i){var a;return e((a={},Object(r.a)(a,2962,t),Object(r.a)(a,2967,n),Object(r.a)(a,2963,i),Object(r.a)(a,34816,t),Object(r.a)(a,36003,n),Object(r.a)(a,36004,i),a))},stencilFuncSeparate:function(e,t,n,i,a){var o;return e((o={},Object(r.a)(o,1028===t?2962:34816,n),Object(r.a)(o,1028===t?2967:36003,i),Object(r.a)(o,1028===t?2963:36004,a),o))},stencilOp:function(e,t,n,i){var a;return e((a={},Object(r.a)(a,2964,t),Object(r.a)(a,2965,n),Object(r.a)(a,2966,i),Object(r.a)(a,34817,t),Object(r.a)(a,34818,n),Object(r.a)(a,34819,i),a))},stencilOpSeparate:function(e,t,n,i,a){var o;return e((o={},Object(r.a)(o,1028===t?2964:34817,n),Object(r.a)(o,1028===t?2965:34818,i),Object(r.a)(o,1028===t?2966:34819,a),o))},viewport:function(e,t,n,i,a){return e(Object(r.a)({},2978,new Int32Array([t,n,i,a])))}}},"7O5W":function(e,t,n){"use strict";(function(e,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return ke})),n.d(t,"b",(function(){return je}));var u=function(){},l={},h={},f={mark:u,measure:u};try{"undefined"!=typeof window&&(l=window),"undefined"!=typeof document&&(h=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(f=performance)}catch(xe){}var d=(l.navigator||{}).userAgent,p=void 0===d?"":d,v=l,g=h,m=f,b=(v.document,!!g.documentElement&&!!g.head&&"function"==typeof g.addEventListener&&"function"==typeof g.createElement),y=(~p.indexOf("MSIE")||p.indexOf("Trident/"),function(){try{}catch(xe){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),w=y.concat([11,12,13,14,15,16,17,18,19,20]),O={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},_=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",O.GROUP,O.SWAP_OPACITY,O.PRIMARY,O.SECONDARY].concat(y.map((function(e){return"".concat(e,"x")}))).concat(w.map((function(e){return"w-".concat(e)}))),v.FontAwesomeConfig||{});if(g&&"function"==typeof g.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=c(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=g.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));null!=i&&(_[r]=i)}))}var j=s({},{familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},_);j.autoReplaceSvg||(j.observeMutations=!1);var k=s({},j);v.FontAwesomeConfig=k;var x=v||{};x.___FONT_AWESOME___||(x.___FONT_AWESOME___={}),x.___FONT_AWESOME___.styles||(x.___FONT_AWESOME___.styles={}),x.___FONT_AWESOME___.hooks||(x.___FONT_AWESOME___.hooks={}),x.___FONT_AWESOME___.shims||(x.___FONT_AWESOME___.shims=[]);var E=x.___FONT_AWESOME___,P=[];b&&((g.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(g.readyState)||g.addEventListener("DOMContentLoaded",(function e(){g.removeEventListener("DOMContentLoaded",e),1,P.map((function(e){return e()}))})));var S,T=function(){},C=void 0!==e&&void 0!==e.process&&"function"==typeof e.process.emit,M=void 0===r?setTimeout:r,A=[];function L(){for(var e=0;e<A.length;e++)A[e][0](A[e][1]);A=[],S=!1}function R(e,t){A.push([e,t]),S||(S=!0,M(L,0))}function I(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"==typeof i){n="fulfilled";try{r=i(r)}catch(xe){B(a,xe)}}D(a,r)||("fulfilled"===n&&N(a,r),"rejected"===n&&B(a,r))}function D(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===i(t))){var r=t.then;if("function"==typeof r)return r.call(t,(function(r){n||(n=!0,t===r?F(e,r):N(e,r))}),(function(t){n||(n=!0,B(e,t))})),!0}}catch(xe){return n||B(e,xe),!0}return!1}function N(e,t){e!==t&&D(e,t)||F(e,t)}function F(e,t){"pending"===e._state&&(e._state="settled",e._data=t,R(U,e))}function B(e,t){"pending"===e._state&&(e._state="settled",e._data=t,R(V,e))}function z(e){e._then=e._then.forEach(I)}function U(e){e._state="fulfilled",z(e)}function V(t){t._state="rejected",z(t),!t._handled&&C&&e.process.emit("unhandledRejection",t._data,t)}function W(t){e.process.emit("rejectionHandled",t)}function G(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof G==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){B(t,e)}try{e((function(e){N(t,e)}),n)}catch(xe){n(xe)}}(e,this)}G.prototype={constructor:G,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(T),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,"rejected"===this._state&&C&&R(W,this)),"fulfilled"===this._state||"rejected"===this._state?R(I,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},G.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new G((function(t,n){var r=[],i=0;function a(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,s=0;s<e.length;s++)(o=e[s])&&"function"==typeof o.then?o.then(a(s),n):r[s]=o;i||t(r)}))},G.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new G((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)}))},G.resolve=function(e){return e&&"object"===i(e)&&e.constructor===G?e:new G((function(t){t(e)}))},G.reject=function(e){return new G((function(t,n){n(e)}))};var H={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function X(e){if(e&&b){var t=g.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=g.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}return g.head.insertBefore(t,r),e}}function q(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function Y(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Z(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function K(e){return e.size!==H.size||e.x!==H.x||e.y!==H.y||e.rotate!==H.rotate||e.flipX||e.flipY}function $(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var Q={x:0,y:0,width:"100%",height:"100%"};function J(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function ee(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,c=e.symbol,u=e.title,l=e.maskId,h=e.titleId,f=e.extra,d=e.watchable,p=void 0!==d&&d,v=r.found?r:n,g=v.width,m=v.height,b="fak"===i,y=b?"":"fa-w-".concat(Math.ceil(g/m*16)),w=[k.replacementClass,a?"".concat(k.familyPrefix,"-").concat(a):"",y].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),O={children:[],attributes:s({},f.attributes,{"data-prefix":i,"data-icon":a,class:w,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},_=b&&!~f.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};p&&(O.attributes["data-fa-i2svg"]=""),u&&O.children.push({tag:"title",attributes:{id:O.attributes["aria-labelledby"]||"title-".concat(h||q())},children:[u]});var j=s({},O,{prefix:i,iconName:a,main:n,mask:r,maskId:l,transform:o,symbol:c,styles:s({},_,f.styles)}),x=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,c=e.transform,u=i.width,l=i.icon,h=a.width,f=a.icon,d=$({transform:c,containerWidth:h,iconWidth:u}),p={tag:"rect",attributes:s({},Q,{fill:"white"})},v=l.children?{children:l.children.map(J)}:{},g={tag:"g",attributes:s({},d.inner),children:[J(s({tag:l.tag,attributes:s({},l.attributes,d.path)},v))]},m={tag:"g",attributes:s({},d.outer),children:[g]},b="mask-".concat(o||q()),y="clip-".concat(o||q()),w={tag:"mask",attributes:s({},Q,{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,m]},O={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=f,"g"===t.tag?t.children:[t])},w]};return n.push(O,{tag:"rect",attributes:s({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(b,")")},Q)}),{children:n,attributes:r}}(j):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,a=Z(e.styles);if(a.length>0&&(n.style=a),K(i)){var o=$({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:s({},o.outer),children:[{tag:"g",attributes:s({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:s({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(j),E=x.children,P=x.attributes;return j.children=E,j.attributes=P,c?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:s({},i,{id:!0===a?"".concat(t,"-").concat(k.familyPrefix,"-").concat(n):a}),children:r}]}]}(j):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(K(o)&&n.found&&!r.found){var c={x:n.width/n.height/2,y:.5};i.style=Z(s({},a,{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(j)}var te=function(){},ne=(k.measurePerformance&&m&&m.mark&&m.measure,function(e,t,n,r){var i,a,o,s=Object.keys(e),c=s.length,u=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<c;i++)o=u(o,e[a=s[i]],a,e);return o});function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!=typeof E.hooks.addPack||i?E.styles[e]=s({},E.styles[e]||{},a):E.hooks.addPack(e,a),"fas"===e&&re("fa",t)}var ie=E.styles,ae=E.shims,oe=function(){var e=function(e){return ne(ie,(function(t,n,r){return t[r]=ne(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in ie;ne(ae,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:a},e}),{})};oe();E.styles;function se(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function ce(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"==typeof e?Y(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Y(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(ce).join(""),"</").concat(t,">")}var ue=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function le(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}le.prototype=Object.create(Error.prototype),le.prototype.constructor=le;var he={fill:"currentColor"},fe={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},de={tag:"path",attributes:s({},he,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},pe=s({},fe,{attributeName:"opacity"});s({},he,{cx:"256",cy:"364",r:"28"}),s({},fe,{attributeName:"r",values:"28;14;28;28;14;28;"}),s({},pe,{values:"1;0;1;1;0;1;"}),s({},he,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),s({},pe,{values:"1;0;0;0;0;1;"}),s({},he,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),s({},pe,{values:"0;0;1;1;0;0;"}),E.styles;function ve(e){var t=e[0],n=e[1],r=c(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(k.familyPrefix,"-").concat(O.GROUP)},children:[{tag:"path",attributes:{class:"".concat(k.familyPrefix,"-").concat(O.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(k.familyPrefix,"-").concat(O.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}E.styles;function ge(){var e="svg-inline--fa",t=k.familyPrefix,n=k.replacementClass,r='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if("fa"!==t||n!==e){var i=new RegExp("\\.".concat("fa","\\-"),"g"),a=new RegExp("\\--".concat("fa","\\-"),"g"),o=new RegExp("\\.".concat(e),"g");r=r.replace(i,".".concat(t,"-")).replace(a,"--".concat(t,"-")).replace(o,".".concat(n))}return r}function me(){k.autoAddCss&&!_e&&(X(ge()),_e=!0)}function be(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return ce(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(b){var t=g.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function ye(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return se(Oe.definitions,n,r)||se(E.styles,n,r)}var we,Oe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,(n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=s({},e.definitions[t]||{},i[t]),re(t,i[t]),oe()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][a]=o})),e}}])&&a(t.prototype,n),r&&a(t,r),e}()),_e=!1,je={transform:function(e){return ue(e)}},ke=(we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?H:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,c=void 0===o?null:o,u=t.maskId,l=void 0===u?null:u,h=t.title,f=void 0===h?null:h,d=t.titleId,p=void 0===d?null:d,v=t.classes,g=void 0===v?[]:v,m=t.attributes,b=void 0===m?{}:m,y=t.styles,w=void 0===y?{}:y;if(e){var O=e.prefix,_=e.iconName,j=e.icon;return be(s({type:"icon"},e),(function(){return me(),k.autoA11y&&(f?b["aria-labelledby"]="".concat(k.replacementClass,"-title-").concat(p||q()):(b["aria-hidden"]="true",b.focusable="false")),ee({icons:{main:ve(j),mask:c?ve(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:O,iconName:_,transform:s({},H,r),symbol:a,title:f,maskId:l,titleId:p,extra:{attributes:b,styles:w,classes:g}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:ye(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:ye(r||{})),we(n,s({},t,{mask:r}))})}).call(this,n("yLpj"),n("URgk").setImmediate)},"8+s/":function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n("q1tI"),a=r(i),o=r(n("Gytx"));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var u,l=[];function h(){u=e(l.map((function(e){return e.props}))),f.canUseDOM?t(u):n&&(u=n(u))}var f=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.peek=function(){return u},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,l=[],e};var s=i.prototype;return s.shouldComponentUpdate=function(e){return!o(e,this.props)},s.componentWillMount=function(){l.push(this),h()},s.componentDidUpdate=function(){h()},s.componentWillUnmount=function(){var e=l.indexOf(this);l.splice(e,1),h()},s.render=function(){return a.createElement(r,this.props)},i}(i.Component);return s(f,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),s(f,"canUseDOM",c),f}}},"8L3F":function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,r=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(n&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var i=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),r))}};function a(e){return e&&"[object Function]"==={}.toString.call(e)}function o(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function s(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function c(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=o(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:c(s(e))}function u(e){return e&&e.referenceNode?e.referenceNode:e}var l=n&&!(!window.MSInputMethodContext||!document.documentMode),h=n&&/MSIE 10/.test(navigator.userAgent);function f(e){return 11===e?l:10===e?h:l||h}function d(e){if(!e)return document.documentElement;for(var t=f(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===o(n,"position")?d(n):n:e?e.ownerDocument.documentElement:document.documentElement}function p(e){return null!==e.parentNode?p(e.parentNode):e}function v(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var o,s,c=a.commonAncestorContainer;if(e!==c&&t!==c||r.contains(i))return"BODY"===(s=(o=c).nodeName)||"HTML"!==s&&d(o.firstElementChild)!==o?d(c):c;var u=p(e);return u.host?v(u.host,t):v(e,p(t).host)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var i=e.ownerDocument.documentElement,a=e.ownerDocument.scrollingElement||i;return a[n]}return e[n]}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),i=g(t,"left"),a=n?-1:1;return e.top+=r*a,e.bottom+=r*a,e.left+=i*a,e.right+=i*a,e}function b(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+r+"Width"])}function y(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],f(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function w(e){var t=e.body,n=e.documentElement,r=f(10)&&getComputedStyle(n);return{height:y("Height",t,n,r),width:y("Width",t,n,r)}}var O=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),j=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function x(e){return k({},e,{right:e.left+e.width,bottom:e.top+e.height})}function E(e){var t={};try{if(f(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(d){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?w(e.ownerDocument):{},s=a.width||e.clientWidth||i.width,c=a.height||e.clientHeight||i.height,u=e.offsetWidth-s,l=e.offsetHeight-c;if(u||l){var h=o(e);u-=b(h,"x"),l-=b(h,"y"),i.width-=u,i.height-=l}return x(i)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=f(10),i="HTML"===t.nodeName,a=E(e),s=E(t),u=c(e),l=o(t),h=parseFloat(l.borderTopWidth),d=parseFloat(l.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=x({top:a.top-s.top-h,left:a.left-s.left-d,width:a.width,height:a.height});if(p.marginTop=0,p.marginLeft=0,!r&&i){var v=parseFloat(l.marginTop),g=parseFloat(l.marginLeft);p.top-=h-v,p.bottom-=h-v,p.left-=d-g,p.right-=d-g,p.marginTop=v,p.marginLeft=g}return(r&&!n?t.contains(u):t===u&&"BODY"!==u.nodeName)&&(p=m(p,t)),p}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=P(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:g(n),s=t?0:g(n,"left"),c={top:o-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:a};return x(c)}function T(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===o(e,"position"))return!0;var n=s(e);return!!n&&T(n)}function C(e){if(!e||!e.parentElement||f())return document.documentElement;for(var t=e.parentElement;t&&"none"===o(t,"transform");)t=t.parentElement;return t||document.documentElement}function M(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},o=i?C(e):v(e,u(t));if("viewport"===r)a=S(o,i);else{var l=void 0;"scrollParent"===r?"BODY"===(l=c(s(t))).nodeName&&(l=e.ownerDocument.documentElement):l="window"===r?e.ownerDocument.documentElement:r;var h=P(l,o,i);if("HTML"!==l.nodeName||T(o))a=h;else{var f=w(e.ownerDocument),d=f.height,p=f.width;a.top+=h.top-h.marginTop,a.bottom=d+h.top,a.left+=h.left-h.marginLeft,a.right=p+h.left}}var g="number"==typeof(n=n||0);return a.left+=g?n:n.left||0,a.top+=g?n:n.top||0,a.right-=g?n:n.right||0,a.bottom-=g?n:n.bottom||0,a}function A(e){return e.width*e.height}function L(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=M(n,r,a,i),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},c=Object.keys(s).map((function(e){return k({key:e},s[e],{area:A(s[e])})})).sort((function(e,t){return t.area-e.area})),u=c.filter((function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight})),l=u.length>0?u[0].key:c[0].key,h=e.split("-")[1];return l+(h?"-"+h:"")}function R(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?C(t):v(t,u(n));return P(n,i,r)}function I(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function D(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function N(e,t,n){n=n.split("-")[0];var r=I(e),i={width:r.width,height:r.height},a=-1!==["right","left"].indexOf(n),o=a?"top":"left",s=a?"left":"top",c=a?"height":"width",u=a?"width":"height";return i[o]=t[o]+t[c]/2-r[c]/2,i[s]=n===s?t[s]-r[u]:t[D(s)],i}function F(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function B(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var r=F(e,(function(e){return e[t]===n}));return e.indexOf(r)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&a(n)&&(t.offsets.popper=x(t.offsets.popper),t.offsets.reference=x(t.offsets.reference),t=n(t,e))})),t}function z(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=R(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=L(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=N(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=B(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function U(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function V(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],a=i?""+i+n:e;if(void 0!==document.body.style[a])return a}return null}function W(){return this.state.isDestroyed=!0,U(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[V("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function G(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,n,r){n.updateBound=r,G(e).addEventListener("resize",n.updateBound,{passive:!0});var i=c(e);return function e(t,n,r,i){var a="BODY"===t.nodeName,o=a?t.ownerDocument.defaultView:t;o.addEventListener(n,r,{passive:!0}),a||e(c(o.parentNode),n,r,i),i.push(o)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function X(){this.state.eventsEnabled||(this.state=H(this.reference,this.options,this.state,this.scheduleUpdate))}function q(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,G(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Y(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Z(e,t){Object.keys(t).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Y(t[n])&&(r="px"),e.style[n]=t[n]+r}))}var K=n&&/Firefox/i.test(navigator.userAgent);function $(e,t,n){var r=F(e,(function(e){return e.name===t})),i=!!r&&e.some((function(e){return e.name===n&&e.enabled&&e.order<r.order}));if(!i){var a="`"+t+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return i}var Q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],J=Q.slice(3);function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=J.indexOf(e),r=J.slice(n+1).concat(J.slice(0,n));return t?r.reverse():r}var te="flip",ne="clockwise",re="counterclockwise";function ie(e,t,n,r){var i=[0,0],a=-1!==["right","left"].indexOf(r),o=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=o.indexOf(F(o,(function(e){return-1!==e.search(/,|\s/)})));o[s]&&-1===o[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=-1!==s?[o.slice(0,s).concat([o[s].split(c)[0]]),[o[s].split(c)[1]].concat(o.slice(s+1))]:[o];return(u=u.map((function(e,r){var i=(1===r?!a:a)?"height":"width",o=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],o=i[2];if(!a)return e;if(0===o.indexOf("%")){var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=r}return x(s)[t]/100*a}if("vh"===o||"vw"===o){return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a}return a}(e,i,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,r){Y(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))}))})),i}var ae={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,a=i.reference,o=i.popper,s=-1!==["bottom","top"].indexOf(n),c=s?"left":"top",u=s?"width":"height",l={start:j({},c,a[c]),end:j({},c,a[c]+a[u]-o[u])};e.offsets.popper=k({},o,l[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,a=i.popper,o=i.reference,s=r.split("-")[0],c=void 0;return c=Y(+n)?[+n,0]:ie(n,a,o,s),"left"===s?(a.top+=c[0],a.left-=c[1]):"right"===s?(a.top+=c[0],a.left+=c[1]):"top"===s?(a.left+=c[0],a.top-=c[1]):"bottom"===s&&(a.left+=c[0],a.top+=c[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||d(e.instance.popper);e.instance.reference===n&&(n=d(n));var r=V("transform"),i=e.instance.popper.style,a=i.top,o=i.left,s=i[r];i.top="",i.left="",i[r]="";var c=M(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=a,i.left=o,i[r]=s,t.boundaries=c;var u=t.priority,l=e.offsets.popper,h={primary:function(e){var n=l[e];return l[e]<c[e]&&!t.escapeWithReference&&(n=Math.max(l[e],c[e])),j({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=l[n];return l[e]>c[e]&&!t.escapeWithReference&&(r=Math.min(l[n],c[e]-("right"===e?l.width:l.height))),j({},n,r)}};return u.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";l=k({},l,h[t](e))})),e.offsets.popper=l,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],a=Math.floor,o=-1!==["top","bottom"].indexOf(i),s=o?"right":"bottom",c=o?"left":"top",u=o?"width":"height";return n[s]<a(r[c])&&(e.offsets.popper[c]=a(r[c])-n[u]),n[c]>a(r[s])&&(e.offsets.popper[c]=a(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!$(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],a=e.offsets,s=a.popper,c=a.reference,u=-1!==["left","right"].indexOf(i),l=u?"height":"width",h=u?"Top":"Left",f=h.toLowerCase(),d=u?"left":"top",p=u?"bottom":"right",v=I(r)[l];c[p]-v<s[f]&&(e.offsets.popper[f]-=s[f]-(c[p]-v)),c[f]+v>s[p]&&(e.offsets.popper[f]+=c[f]+v-s[p]),e.offsets.popper=x(e.offsets.popper);var g=c[f]+c[l]/2-v/2,m=o(e.instance.popper),b=parseFloat(m["margin"+h]),y=parseFloat(m["border"+h+"Width"]),w=g-e.offsets.popper[f]-b-y;return w=Math.max(Math.min(s[l]-v,w),0),e.arrowElement=r,e.offsets.arrow=(j(n={},f,Math.round(w)),j(n,d,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(U(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=M(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=D(r),a=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case te:o=[r,i];break;case ne:o=ee(r);break;case re:o=ee(r,!0);break;default:o=t.behavior}return o.forEach((function(s,c){if(r!==s||o.length===c+1)return e;r=e.placement.split("-")[0],i=D(r);var u=e.offsets.popper,l=e.offsets.reference,h=Math.floor,f="left"===r&&h(u.right)>h(l.left)||"right"===r&&h(u.left)<h(l.right)||"top"===r&&h(u.bottom)>h(l.top)||"bottom"===r&&h(u.top)<h(l.bottom),d=h(u.left)<h(n.left),p=h(u.right)>h(n.right),v=h(u.top)<h(n.top),g=h(u.bottom)>h(n.bottom),m="left"===r&&d||"right"===r&&p||"top"===r&&v||"bottom"===r&&g,b=-1!==["top","bottom"].indexOf(r),y=!!t.flipVariations&&(b&&"start"===a&&d||b&&"end"===a&&p||!b&&"start"===a&&v||!b&&"end"===a&&g),w=!!t.flipVariationsByContent&&(b&&"start"===a&&p||b&&"end"===a&&d||!b&&"start"===a&&g||!b&&"end"===a&&v),O=y||w;(f||m||O)&&(e.flipped=!0,(f||m)&&(r=o[c+1]),O&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=r+(a?"-"+a:""),e.offsets.popper=k({},e.offsets.popper,N(e.instance.popper,e.offsets.reference,e.placement)),e=B(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,a=r.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=a[n]-(s?i[o?"width":"height"]:0),e.placement=D(t),e.offsets.popper=x(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!$(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=F(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,a=F(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==a?a:t.gpuAcceleration,s=d(e.instance.popper),c=E(s),u={position:i.position},l=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,a=Math.round,o=Math.floor,s=function(e){return e},c=a(i.width),u=a(r.width),l=-1!==["left","right"].indexOf(e.placement),h=-1!==e.placement.indexOf("-"),f=t?l||h||c%2==u%2?a:o:s,d=t?a:s;return{left:f(c%2==1&&u%2==1&&!h&&t?r.left-1:r.left),top:d(r.top),bottom:d(r.bottom),right:f(r.right)}}(e,window.devicePixelRatio<2||!K),h="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=V("transform"),v=void 0,g=void 0;if(g="bottom"===h?"HTML"===s.nodeName?-s.clientHeight+l.bottom:-c.height+l.bottom:l.top,v="right"===f?"HTML"===s.nodeName?-s.clientWidth+l.right:-c.width+l.right:l.left,o&&p)u[p]="translate3d("+v+"px, "+g+"px, 0)",u[h]=0,u[f]=0,u.willChange="transform";else{var m="bottom"===h?-1:1,b="right"===f?-1:1;u[h]=g*m,u[f]=v*b,u.willChange=h+", "+f}var y={"x-placement":e.placement};return e.attributes=k({},y,e.attributes),e.styles=k({},u,e.styles),e.arrowStyles=k({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return Z(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&Z(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var a=R(i,t,e,n.positionFixed),o=L(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),Z(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},oe=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=k({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(k({},e.Defaults.modifiers,o.modifiers)).forEach((function(t){r.options.modifiers[t]=k({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return k({name:e},r.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&a(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)})),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return _(e,[{key:"update",value:function(){return z.call(this)}},{key:"destroy",value:function(){return W.call(this)}},{key:"enableEventListeners",value:function(){return X.call(this)}},{key:"disableEventListeners",value:function(){return q.call(this)}}]),e}();oe.Utils=("undefined"!=typeof window?window:e).PopperUtils,oe.placements=Q,oe.Defaults=ae,t.a=oe}).call(this,n("yLpj"))},"8oxB":function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"9Hqq":function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"webgl2-polyfill: assertion failed.")}n.d(t,"a",(function(){return r}))},FWU8:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("1OyB"),i=n("iTDY"),a=n("IIwk"),o="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.",s=e,c=null;function u(){var e=s.require("gl");if(!e)throw new Error(o);return e.apply(void 0,arguments)}if(!a.a)try{c=s.require("gl/wrap")}catch(v){}var l=function e(){Object(r.a)(this,e)},h=c||i.a,f=(h.WebGLRenderingContext,h.WebGLProgram,h.WebGLShader,h.WebGLBuffer),d=void 0===f?l:f;h.WebGLFramebuffer,h.WebGLRenderbuffer,h.WebGLTexture,h.WebGLUniformLocation,h.WebGLActiveInfo,h.WebGLShaderPrecisionFormat;var p=i.a.WebGL2RenderingContext||function e(){Object(r.a)(this,e)};i.a.Image}).call(this,n("3UD+")(e))},GawU:function(e,t,n){"use strict";(function(e){function r(){var t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==e&&e.hrtime){var n=e.hrtime();t=1e3*n[0]+n[1]/1e6}else t=Date.now();return t}n.d(t,"a",(function(){return r}))}).call(this,n("8oxB"))},Gytx:function(e,t){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<a.length;c++){var u=a[c];if(!s(u))return!1;var l=e[u],h=t[u];if(!1===(i=n?n.call(r,l,h,u):void 0)||void 0===i&&l!==h)return!1}return!0}},I0ug:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n("U8pU");function i(t){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(r.a)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n("8oxB"))},IIwk:function(e,t,n){"use strict";(function(e){var r=n("U8pU"),i=n("T8J6"),a=!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||i.a;t.a=a}).call(this,n("8oxB"))},Ji7U:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("s4An");function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Object(r.a)(e,t)}},K9nA:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n("U8pU"),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,n("yLpj"),n("8oxB"))},LhmN:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g}));var r,i,a,o=n("KQm4"),s=n("rePB"),c=n("y7xQ"),u=(r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),l=function(e,t,n){return t?e.enable(n):e.disable(n)},h=function(e,t,n){return e.hint(n,t)},f=function(e,t,n){return e.pixelStorei(n,t)},d=(i={},Object(s.a)(i,3042,l),Object(s.a)(i,32773,(function(e,t){return e.blendColor.apply(e,Object(o.a)(t))})),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,(function(e,t){return e.clearColor.apply(e,Object(o.a)(t))})),Object(s.a)(i,3107,(function(e,t){return e.colorMask.apply(e,Object(o.a)(t))})),Object(s.a)(i,2884,l),Object(s.a)(i,2885,(function(e,t){return e.cullFace(t)})),Object(s.a)(i,2929,l),Object(s.a)(i,2931,(function(e,t){return e.clearDepth(t)})),Object(s.a)(i,2932,(function(e,t){return e.depthFunc(t)})),Object(s.a)(i,2928,(function(e,t){return e.depthRange.apply(e,Object(o.a)(t))})),Object(s.a)(i,2930,(function(e,t){return e.depthMask(t)})),Object(s.a)(i,3024,l),Object(s.a)(i,35723,h),Object(s.a)(i,36006,(function(e,t){var n=Object(c.b)(e)?36009:36160;return e.bindFramebuffer(n,t)})),Object(s.a)(i,2886,(function(e,t){return e.frontFace(t)})),Object(s.a)(i,33170,h),Object(s.a)(i,2849,(function(e,t){return e.lineWidth(t)})),Object(s.a)(i,32823,l),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,l),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,l),Object(s.a)(i,3088,(function(e,t){return e.scissor.apply(e,Object(o.a)(t))})),Object(s.a)(i,2960,l),Object(s.a)(i,2961,(function(e,t){return e.clearStencil(t)})),Object(s.a)(i,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Object(s.a)(i,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,(function(e,t){return e.viewport.apply(e,Object(o.a)(t))})),Object(s.a)(i,3333,f),Object(s.a)(i,3317,f),Object(s.a)(i,37440,f),Object(s.a)(i,37441,f),Object(s.a)(i,37443,f),Object(s.a)(i,3330,f),Object(s.a)(i,3332,f),Object(s.a)(i,3331,f),Object(s.a)(i,36010,(function(e,t){return e.bindFramebuffer(36008,t)})),Object(s.a)(i,3314,f),Object(s.a)(i,32878,f),Object(s.a)(i,3316,f),Object(s.a)(i,3315,f),Object(s.a)(i,32877,f),i),p={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},v=function(e,t){return e.isEnabled(t)},g=(a={},Object(s.a)(a,3042,v),Object(s.a)(a,2884,v),Object(s.a)(a,2929,v),Object(s.a)(a,3024,v),Object(s.a)(a,32823,v),Object(s.a)(a,32926,v),Object(s.a)(a,32928,v),Object(s.a)(a,3089,v),Object(s.a)(a,2960,v),Object(s.a)(a,35977,v),a)},Nw31:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("ODXe"),i=n("1OyB"),a=n("vuIU"),o=n("Ji7U"),s=n("md7G"),c=n("foSv"),u=n("+H0l"),l=n("41X0"),h=n("a3TU");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var d=function(e){Object(o.a)(n,e);var t=f(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"toString",value:function(){var e="[";if(h.b.printRowMajor){e+="row-major:";for(var t=0;t<this.RANK;++t)for(var n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(var r=0;r<this.ELEMENTS;++r)e+=" ".concat(this[r])}return e+="]"}},{key:"getElementIndex",value:function(e,t){return t*this.RANK+e}},{key:"getElement",value:function(e,t){return this[t*this.RANK+e]}},{key:"setElement",value:function(e,t,n){return this[t*this.RANK+e]=Object(u.a)(n),this}},{key:"getColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=e*this.RANK,r=0;r<this.RANK;++r)t[r]=this[n+r];return t}},{key:"setColumn",value:function(e,t){for(var n=e*this.RANK,r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}]),n}(l.a),p=n("sSh/"),v=n("ZaHm"),g=n("ZxFD"),m=n("n+fv"),b=n("bl9R");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var w=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),O=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),j={},k=function(e){Object(o.a)(n,e);var t=y(n);function n(e){var r;return Object(i.a)(this,n),r=t.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?r.copy(e):r.identity(),r}return Object(a.a)(n,[{key:"INDICES",get:function(){return _}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return j.IDENTITY=j.IDENTITY||Object.freeze(new n(w)),j.IDENTITY}},{key:"ZERO",get:function(){return j.ZERO=j.ZERO||Object.freeze(new n(O)),j.ZERO}}]),Object(a.a)(n,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}},{key:"set",value:function(e,t,n,r,i,a,o,s,c,u,l,h,f,d,p,v){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=c,this[9]=u,this[10]=l,this[11]=h,this[12]=f,this[13]=d,this[14]=p,this[15]=v,this.check()}},{key:"setRowMajor",value:function(e,t,n,r,i,a,o,s,c,u,l,h,f,d,p,v){return this[0]=e,this[1]=i,this[2]=c,this[3]=f,this[4]=t,this[5]=a,this[6]=u,this[7]=d,this[8]=n,this[9]=o,this[10]=l,this[11]=p,this[12]=r,this[13]=s,this[14]=h,this[15]=v,this.check()}},{key:"toRowMajor",value:function(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}},{key:"identity",value:function(){return this.copy(w)}},{key:"fromQuaternion",value:function(e){return v.c(this,e),this.check()}},{key:"frustum",value:function(e){var t=e.left,r=e.right,i=e.bottom,a=e.top,o=e.near,s=e.far;return s===1/0?n._computeInfinitePerspectiveOffCenter(this,t,r,i,a,o):v.d(this,t,r,i,a,o,s),this.check()}},{key:"lookAt",value:function(e,t,n){if(1===arguments.length){var r=e;e=r.eye,t=r.center,n=r.up}return t=t||[0,0,0],n=n||[0,1,0],v.f(this,e,t,n),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,a=e.near,o=void 0===a?.1:a,s=e.far,c=void 0===s?500:s;return v.h(this,t,n,r,i,o,c),this.check()}},{key:"orthographic",value:function(e){var t=e.fovy,r=void 0===t?45*Math.PI/180:t,i=e.aspect,a=void 0===i?1:i,o=e.focalDistance,s=void 0===o?1:o,c=e.near,u=void 0===c?.1:c,l=e.far,h=void 0===l?500:l;if(r>2*Math.PI)throw Error("radians");var f=r/2,d=s*Math.tan(f),p=d*a;return(new n).ortho({left:-p,right:p,bottom:-d,top:d,near:u,far:h})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=void 0===t?void 0:t,r=e.fov,i=void 0===r?45*Math.PI/180:r,a=e.aspect,o=void 0===a?1:a,s=e.near,c=void 0===s?.1:s,u=e.far,l=void 0===u?500:u;if((n=n||i)>2*Math.PI)throw Error("radians");return v.i(this,n,o,c,l),this.check()}},{key:"determinant",value:function(){return v.a(this)}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"getRotationMatrix3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*a,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*a,e}},{key:"transpose",value:function(){return v.p(this,this),this.check()}},{key:"invert",value:function(){return v.e(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return v.g(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return v.g(this,this,e),this.check()}},{key:"rotateX",value:function(e){return v.k(this,this,e),this.check()}},{key:"rotateY",value:function(e){return v.l(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return v.m(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=Object(r.a)(e,3),n=t[0],i=t[1],a=t[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(e,t){return v.j(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?v.n(this,this,e):v.n(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return v.o(this,this,e),this.check()}},{key:"transform",value:function(e,t){return 4===e.length?(t=b.b(t||[-0,-0,-0,-0],e,this),Object(u.b)(t,4),t):this.transformAsPoint(e,t)}},{key:"transformAsPoint",value:function(e,t){switch(e.length){case 2:t=g.g(t||[-0,-0],e,this);break;case 3:t=m.j(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(u.b)(t,e.length),t}},{key:"transformAsVector",value:function(e,t){switch(e.length){case 2:t=Object(p.a)(t||[-0,-0],e,this);break;case 3:t=Object(p.c)(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(u.b)(t,e.length),t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"transformPoint",value:function(e,t){return Object(u.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}},{key:"transformVector",value:function(e,t){return Object(u.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}},{key:"transformDirection",value:function(e,t){return Object(u.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(e,t,n,r,i,a){var o=2*a/(n-t),s=2*a/(i-r),c=(n+t)/(n-t),u=(i+r)/(i-r),l=-2*a;return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0,e}}]),n}(d)},RHh3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("s4An");function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function a(e,t,n){if(i())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var o=new(e.bind.apply(e,a));return n&&Object(r.a)(o,n.prototype),o}},RXBc:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),i=n.n(r),a=n("/MKj"),o=n("gGy4"),s=n("KQm4");function c(e,t){return e===t}function u(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function l(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}var h=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=0,o=r.pop(),s=l(r),c=e.apply(void 0,[function(){return a++,o.apply(null,arguments)}].concat(n)),u=e((function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=o,u.dependencies=s,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=null,r=null;return function(){return u(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var f=n("X7BR");const d=e=>e.siteInfoOpen,p=e=>e.algInfoOpen,v=e=>e.algorithm,g=e=>e.delay,m=e=>e.evaluatingDetailLevel,b=e=>e.maxEvaluatingDetailLevel,y=e=>e.running,w=e=>e.fullSpeed,O=e=>e.paused,_=e=>e.startedRunningAt,j=e=>e.definingPoints,k=e=>e.pointCount,x=e=>e.viewport,E=e=>e.points,P=h(E,e=>e.map((e,t)=>({position:e,color:0===t?f.e:f.d}))),S=e=>e.showBestPath,T=h(e=>e.bestPath,S,(e,t)=>({path:t?e:[],color:f.a,width:20})),C=h(e=>e.bestCost,e=>e?e.toFixed(2):""),M=h(e=>e.evaluatingPaths,e=>e.map(e=>{let{path:t,color:n}=e;return{path:t,color:n||f.c,width:5}})),A=h(e=>e.evaluatingCost,e=>e?e.toFixed(2):""),L=h(T,M,(e,t)=>[].concat(Object(s.a)(t),[e]));var R=n("Y+Aq"),I=n("RD7I"),D=n("aXM8"),N=n("cNwE");function F(){return Object(D.a)()||N.a}var B=n("wx14"),z=n("A+CX");function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(D.a)(),i=Object(z.a)({theme:n,name:"MuiUseMediaQuery",props:{}});var a="function"==typeof e?e(n):e;a=a.replace(/^@media( ?)/m,"");var o="undefined"!=typeof window&&void 0!==window.matchMedia,s=Object(B.a)({},i,t),c=s.defaultMatches,u=void 0!==c&&c,l=s.matchMedia,h=void 0===l?o?window.matchMedia:null:l,f=s.noSsr,d=void 0!==f&&f,p=s.ssrMatchMedia,v=void 0===p?null:p,g=r.useState((function(){return d&&o?h(a).matches:v?v(a).matches:u})),m=g[0],b=g[1];return r.useEffect((function(){var e=!0;if(o){var t=h(a),n=function(){e&&b(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[a,h,o]),m}var V=n("Ff2n"),W=n("rePB"),G=n("iuhU"),H=n("H2TA"),X=n("TrhM");function q(e){if("string"!=typeof e)throw new Error(Object(X.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}var Y=n("i8i4"),Z=n.n(Y);function K(e){return e&&e.ownerDocument||document}function $(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Q(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){$(e,n),$(t,n)}}),[e,t])}var J="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;var ee=r.forwardRef((function(e,t){var n=e.children,i=e.container,a=e.disablePortal,o=void 0!==a&&a,s=e.onRendered,c=r.useState(null),u=c[0],l=c[1],h=Q(r.isValidElement(n)?n.ref:null,t);return J((function(){o||l(function(e){return e="function"==typeof e?e():e,Y.findDOMNode(e)}(i)||document.body)}),[i,o]),J((function(){if(u&&!o)return $(t,u),function(){$(t,null)}}),[t,u,o]),J((function(){s&&(u||o)&&s()}),[s,u,o]),o?r.isValidElement(n)?r.cloneElement(n,{ref:h}):n:u?Y.createPortal(n,u):u}));function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var ne="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function re(e){var t=r.useRef(e);return ne((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}var ie=n("HwzS"),ae=n("1OyB"),oe=n("vuIU");function se(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function ce(e){return K(e).defaultView||window}function ue(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function le(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function he(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,a=[t,n].concat(Object(s.a)(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===a.indexOf(e)&&-1===o.indexOf(e.tagName)&&ue(e,i)}))}function fe(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function de(e,t){var n,r=[],i=[],a=e.container;if(!t.disableScrollLock){if(function(e){var t=K(e);return t.body===e?ce(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(a)){var o=se();r.push({value:a.style.paddingRight,key:"padding-right",el:a}),a.style["padding-right"]="".concat(le(a)+o,"px"),n=K(a).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(le(e)+o,"px")}))}var s=a.parentElement,c="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:a;r.push({value:c.style.overflow,key:"overflow",el:c}),c.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var pe=function(){function e(){Object(ae.a)(this,e),this.modals=[],this.containers=[]}return Object(oe.a)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ue(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);he(t,e.mountNode,e.modalRef,r,!0);var i=fe(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=fe(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=de(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=fe(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&ue(e.modalRef,!0),he(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&ue(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var ve=function(e){var t=e.children,n=e.disableAutoFocus,i=void 0!==n&&n,a=e.disableEnforceFocus,o=void 0!==a&&a,s=e.disableRestoreFocus,c=void 0!==s&&s,u=e.getDoc,l=e.isEnabled,h=e.open,f=r.useRef(),d=r.useRef(null),p=r.useRef(null),v=r.useRef(),g=r.useRef(null),m=r.useCallback((function(e){g.current=Y.findDOMNode(e)}),[]),b=Q(t.ref,m),y=r.useRef();return r.useEffect((function(){y.current=h}),[h]),!y.current&&h&&"undefined"!=typeof window&&(v.current=u().activeElement),r.useEffect((function(){if(h){var e=K(g.current);i||!g.current||g.current.contains(e.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex",-1),g.current.focus());var t=function(){null!==g.current&&(e.hasFocus()&&!o&&l()&&!f.current?g.current&&!g.current.contains(e.activeElement)&&g.current.focus():f.current=!1)},n=function(t){!o&&l()&&9===t.keyCode&&e.activeElement===g.current&&(f.current=!0,t.shiftKey?p.current.focus():d.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),c||(v.current&&v.current.focus&&v.current.focus(),v.current=null)}}}),[i,o,c,l,h]),r.createElement(r.Fragment,null,r.createElement("div",{tabIndex:0,ref:d,"data-test":"sentinelStart"}),r.cloneElement(t,{ref:b}),r.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))},ge={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},me=r.forwardRef((function(e,t){var n=e.invisible,i=void 0!==n&&n,a=e.open,o=Object(V.a)(e,["invisible","open"]);return a?r.createElement("div",Object(B.a)({"aria-hidden":!0,ref:t},o,{style:Object(B.a)({},ge.root,i?ge.invisible:{},o.style)})):null}));var be=new pe,ye=r.forwardRef((function(e,t){var n=Object(D.a)(),i=Object(z.a)({name:"MuiModal",props:Object(B.a)({},e),theme:n}),a=i.BackdropComponent,o=void 0===a?me:a,s=i.BackdropProps,c=i.children,u=i.closeAfterTransition,l=void 0!==u&&u,h=i.container,f=i.disableAutoFocus,d=void 0!==f&&f,p=i.disableBackdropClick,v=void 0!==p&&p,g=i.disableEnforceFocus,m=void 0!==g&&g,b=i.disableEscapeKeyDown,y=void 0!==b&&b,w=i.disablePortal,O=void 0!==w&&w,_=i.disableRestoreFocus,j=void 0!==_&&_,k=i.disableScrollLock,x=void 0!==k&&k,E=i.hideBackdrop,P=void 0!==E&&E,S=i.keepMounted,T=void 0!==S&&S,C=i.manager,M=void 0===C?be:C,A=i.onBackdropClick,L=i.onClose,R=i.onEscapeKeyDown,I=i.onRendered,N=i.open,F=Object(V.a)(i,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),U=r.useState(!0),W=U[0],G=U[1],H=r.useRef({}),X=r.useRef(null),q=r.useRef(null),Z=Q(q,t),$=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(i),J=function(){return K(X.current)},ne=function(){return H.current.modalRef=q.current,H.current.mountNode=X.current,H.current},ae=function(){M.mount(ne(),{disableScrollLock:x}),q.current.scrollTop=0},oe=re((function(){var e=function(e){return e="function"==typeof e?e():e,Y.findDOMNode(e)}(h)||J().body;M.add(ne(),e),q.current&&ae()})),se=r.useCallback((function(){return M.isTopModal(ne())}),[M]),ce=re((function(e){X.current=e,e&&(I&&I(),N&&se()?ae():ue(q.current,!0))})),le=r.useCallback((function(){M.remove(ne())}),[M]);if(r.useEffect((function(){return function(){le()}}),[le]),r.useEffect((function(){N?oe():$&&l||le()}),[N,le,$,l,oe]),!T&&!N&&(!$||W))return null;var he=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:ie.a}),fe={};return void 0===c.props.tabIndex&&(fe.tabIndex=c.props.tabIndex||"-1"),$&&(fe.onEnter=te((function(){G(!1)}),c.props.onEnter),fe.onExited=te((function(){G(!0),l&&le()}),c.props.onExited)),r.createElement(ee,{ref:ce,container:h,disablePortal:O},r.createElement("div",Object(B.a)({ref:Z,onKeyDown:function(e){"Escape"===e.key&&se()&&(R&&R(e),y||(e.stopPropagation(),L&&L(e,"escapeKeyDown")))},role:"presentation"},F,{style:Object(B.a)({},he.root,!N&&W?he.hidden:{},F.style)}),P?null:r.createElement(o,Object(B.a)({open:N,onClick:function(e){e.target===e.currentTarget&&(A&&A(e),!v&&L&&L(e,"backdropClick"))}},s)),r.createElement(ve,{disableEnforceFocus:m,disableAutoFocus:d,disableRestoreFocus:j,getDoc:J,isEnabled:se,open:N},r.cloneElement(c,fe))))})),we=n("ODXe"),Oe=n("zLVn"),_e=n("dI71"),je=!1,ke=i.a.createContext(null),xe=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Object(_e.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Z.a.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),c=r?s.appear:s.enter;!e&&!n||je?this.safeSetState({status:"entered"},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:"entering"},(function(){t.props.onEntering(a,o),t.onTransitionEnd(c,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Z.a.findDOMNode(this);t&&!je?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Z.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(Oe.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.a.createElement(ke.Provider,{value:null},"function"==typeof n?n(e,r):i.a.cloneElement(i.a.Children.only(n),r))},t}(i.a.Component);function Ee(){}xe.contextType=ke,xe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ee,onEntering:Ee,onEntered:Ee,onExit:Ee,onExiting:Ee,onExited:Ee},xe.UNMOUNTED="unmounted",xe.EXITED="exited",xe.ENTERING="entering",xe.ENTERED="entered",xe.EXITING="exiting";var Pe=xe,Se=n("wpWl"),Te=function(e){return e.scrollTop};function Ce(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"==typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}var Me={entering:{opacity:1},entered:{opacity:1}},Ae={enter:Se.b.enteringScreen,exit:Se.b.leavingScreen},Le=r.forwardRef((function(e,t){var n=e.children,i=e.disableStrictModeCompat,a=void 0!==i&&i,o=e.in,s=e.onEnter,c=e.onEntered,u=e.onEntering,l=e.onExit,h=e.onExited,f=e.onExiting,d=e.style,p=e.TransitionComponent,v=void 0===p?Pe:p,g=e.timeout,m=void 0===g?Ae:g,b=Object(V.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),y=F(),w=y.unstable_strictMode&&!a,O=r.useRef(null),_=Q(n.ref,t),j=Q(w?O:void 0,_),k=function(e){return function(t,n){if(e){var r=w?[O.current,t]:[t,n],i=Object(we.a)(r,2),a=i[0],o=i[1];void 0===o?e(a):e(a,o)}}},x=k(u),E=k((function(e,t){Te(e);var n=Ce({style:d,timeout:m},{mode:"enter"});e.style.webkitTransition=y.transitions.create("opacity",n),e.style.transition=y.transitions.create("opacity",n),s&&s(e,t)})),P=k(c),S=k(f),T=k((function(e){var t=Ce({style:d,timeout:m},{mode:"exit"});e.style.webkitTransition=y.transitions.create("opacity",t),e.style.transition=y.transitions.create("opacity",t),l&&l(e)})),C=k(h);return r.createElement(v,Object(B.a)({appear:!0,in:o,nodeRef:w?O:void 0,onEnter:E,onEntered:P,onEntering:x,onExit:T,onExited:C,onExiting:S,timeout:m},b),(function(e,t){return r.cloneElement(n,Object(B.a)({style:Object(B.a)({opacity:0,visibility:"exited"!==e||o?void 0:"hidden"},Me[e],d,n.props.style),ref:j},t))}))})),Re=r.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.className,o=e.invisible,s=void 0!==o&&o,c=e.open,u=e.transitionDuration,l=e.TransitionComponent,h=void 0===l?Le:l,f=Object(V.a)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return r.createElement(h,Object(B.a)({in:c,timeout:u},f),r.createElement("div",{className:Object(G.a)(i.root,a,s&&i.invisible),"aria-hidden":!0,ref:t},n))})),Ie=Object(H.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(Re),De=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.component,o=void 0===a?"div":a,s=e.square,c=void 0!==s&&s,u=e.elevation,l=void 0===u?1:u,h=e.variant,f=void 0===h?"elevation":h,d=Object(V.a)(e,["classes","className","component","square","elevation","variant"]);return r.createElement(o,Object(B.a)({className:Object(G.a)(n.root,i,"outlined"===f?n.outlined:n["elevation".concat(l)],!c&&n.rounded),ref:t},d))})),Ne=Object(H.a)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Object(B.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(De),Fe={enter:Se.b.enteringScreen,exit:Se.b.leavingScreen},Be=r.forwardRef((function(e,t){var n=e.BackdropProps,i=e.children,a=e.classes,o=e.className,s=e.disableBackdropClick,c=void 0!==s&&s,u=e.disableEscapeKeyDown,l=void 0!==u&&u,h=e.fullScreen,f=void 0!==h&&h,d=e.fullWidth,p=void 0!==d&&d,v=e.maxWidth,g=void 0===v?"sm":v,m=e.onBackdropClick,b=e.onClose,y=e.onEnter,w=e.onEntered,O=e.onEntering,_=e.onEscapeKeyDown,j=e.onExit,k=e.onExited,x=e.onExiting,E=e.open,P=e.PaperComponent,S=void 0===P?Ne:P,T=e.PaperProps,C=void 0===T?{}:T,M=e.scroll,A=void 0===M?"paper":M,L=e.TransitionComponent,R=void 0===L?Le:L,I=e.transitionDuration,D=void 0===I?Fe:I,N=e.TransitionProps,F=e["aria-describedby"],z=e["aria-labelledby"],U=Object(V.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),W=r.useRef();return r.createElement(ye,Object(B.a)({className:Object(G.a)(a.root,o),BackdropComponent:Ie,BackdropProps:Object(B.a)({transitionDuration:D},n),closeAfterTransition:!0,disableBackdropClick:c,disableEscapeKeyDown:l,onEscapeKeyDown:_,onClose:b,open:E,ref:t},U),r.createElement(R,Object(B.a)({appear:!0,in:E,timeout:D,onEnter:y,onEntering:O,onEntered:w,onExit:j,onExiting:x,onExited:k,role:"none presentation"},N),r.createElement("div",{className:Object(G.a)(a.container,a["scroll".concat(q(A))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===W.current&&(W.current=null,m&&m(e),!c&&b&&b(e,"backdropClick"))},onMouseDown:function(e){W.current=e.target}},r.createElement(S,Object(B.a)({elevation:24,role:"dialog","aria-describedby":F,"aria-labelledby":z},C,{className:Object(G.a)(a.paper,a["paperScroll".concat(q(A))],a["paperWidth".concat(q(String(g)))],C.className,f&&a.paperFullScreen,p&&a.paperFullWidth)}),i))))})),ze=Object(H.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(W.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(W.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(W.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(W.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(W.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(Be),Ue=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.dividers,o=void 0!==a&&a,s=Object(V.a)(e,["classes","className","dividers"]);return r.createElement("div",Object(B.a)({className:Object(G.a)(n.root,i,o&&n.dividers),ref:t},s))})),Ve=Object(H.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(Ue),We=n("ye/S"),Ge=!0,He=!1,Xe=null,qe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Ye(e){e.metaKey||e.altKey||e.ctrlKey||(Ge=!0)}function Ze(){Ge=!1}function Ke(){"hidden"===this.visibilityState&&He&&(Ge=!0)}function $e(e){var t,n,r,i=e.target;try{return i.matches(":focus-visible")}catch(a){}return Ge||(n=(t=i).type,!("INPUT"!==(r=t.tagName)||!qe[n]||t.readOnly)||"TEXTAREA"===r&&!t.readOnly||!!t.isContentEditable)}function Qe(){He=!0,window.clearTimeout(Xe),Xe=window.setTimeout((function(){He=!1}),100)}function Je(){return{isFocusVisible:$e,onBlurVisible:Qe,ref:r.useCallback((function(e){var t,n=Y.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",Ye,!0),t.addEventListener("mousedown",Ze,!0),t.addEventListener("pointerdown",Ze,!0),t.addEventListener("touchstart",Ze,!0),t.addEventListener("visibilitychange",Ke,!0))}),[])}}var et=n("JX7q");function tt(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(r.isValidElement)(e)?t(e):e}(e)})),n}function nt(e,t,n){return null!=n[t]?n[t]:e.props[t]}function rt(e,t,n){var i=tt(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var c in t){if(i[c])for(r=0;r<i[c].length;r++){var u=i[c][r];s[i[c][r]]=n(u)}s[c]=n(c)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(t,i);return Object.keys(a).forEach((function(o){var s=a[o];if(Object(r.isValidElement)(s)){var c=o in t,u=o in i,l=t[o],h=Object(r.isValidElement)(l)&&!l.props.in;!u||c&&!h?u||!c||h?u&&c&&Object(r.isValidElement)(l)&&(a[o]=Object(r.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:nt(s,"exit",e),enter:nt(s,"enter",e)})):a[o]=Object(r.cloneElement)(s,{in:!1}):a[o]=Object(r.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:nt(s,"exit",e),enter:nt(s,"enter",e)})}})),a}var it=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},at=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Object(et.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Object(_e.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,i=o,tt(n.children,(function(e){return Object(r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:nt(e,"appear",n),enter:nt(e,"enter",n),exit:nt(e,"exit",n)})}))):rt(e,a,o),firstRender:!1}},n.handleExited=function(e,t){var n=tt(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(B.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(Oe.a)(e,["component","childFactory"]),a=this.state.contextValue,o=it(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i.a.createElement(ke.Provider,{value:a},o):i.a.createElement(ke.Provider,{value:a},i.a.createElement(t,r,o))},t}(i.a.Component);at.defaultProps={component:"div",childFactory:function(e){return e}};var ot=at,st="undefined"==typeof window?r.useEffect:r.useLayoutEffect;var ct=function(e){var t=e.classes,n=e.pulsate,i=void 0!==n&&n,a=e.rippleX,o=e.rippleY,s=e.rippleSize,c=e.in,u=e.onExited,l=void 0===u?function(){}:u,h=e.timeout,f=r.useState(!1),d=f[0],p=f[1],v=Object(G.a)(t.ripple,t.rippleVisible,i&&t.ripplePulsate),g={width:s,height:s,top:-s/2+o,left:-s/2+a},m=Object(G.a)(t.child,d&&t.childLeaving,i&&t.childPulsate),b=re(l);return st((function(){if(!c){p(!0);var e=setTimeout(b,h);return function(){clearTimeout(e)}}}),[b,c,h]),r.createElement("span",{className:v,style:g},r.createElement("span",{className:m}))},ut=r.forwardRef((function(e,t){var n=e.center,i=void 0!==n&&n,a=e.classes,o=e.className,c=Object(V.a)(e,["center","classes","className"]),u=r.useState([]),l=u[0],h=u[1],f=r.useRef(0),d=r.useRef(null);r.useEffect((function(){d.current&&(d.current(),d.current=null)}),[l]);var p=r.useRef(!1),v=r.useRef(null),g=r.useRef(null),m=r.useRef(null);r.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var b=r.useCallback((function(e){var t=e.pulsate,n=e.rippleX,i=e.rippleY,o=e.rippleSize,c=e.cb;h((function(e){return[].concat(Object(s.a)(e),[r.createElement(ct,{key:f.current,classes:a,timeout:550,pulsate:t,rippleX:n,rippleY:i,rippleSize:o})])})),f.current+=1,d.current=c}),[a]),y=r.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,a=void 0!==r&&r,o=t.center,s=void 0===o?i||t.pulsate:o,c=t.fakeElement,u=void 0!==c&&c;if("mousedown"===e.type&&p.current)p.current=!1;else{"touchstart"===e.type&&(p.current=!0);var l,h,f,d=u?null:m.current,y=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(y.width/2),h=Math.round(y.height/2);else{var w=e.touches?e.touches[0]:e,O=w.clientX,_=w.clientY;l=Math.round(O-y.left),h=Math.round(_-y.top)}if(s)(f=Math.sqrt((2*Math.pow(y.width,2)+Math.pow(y.height,2))/3))%2==0&&(f+=1);else{var j=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,k=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(j,2)+Math.pow(k,2))}e.touches?null===g.current&&(g.current=function(){b({pulsate:a,rippleX:l,rippleY:h,rippleSize:f,cb:n})},v.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):b({pulsate:a,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[i,b]),w=r.useCallback((function(){y({},{pulsate:!0})}),[y]),O=r.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&g.current)return e.persist(),g.current(),g.current=null,void(v.current=setTimeout((function(){O(e,t)})));g.current=null,h((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return r.useImperativeHandle(t,(function(){return{pulsate:w,start:y,stop:O}}),[w,y,O]),r.createElement("span",Object(B.a)({className:Object(G.a)(a.root,o),ref:m},c),r.createElement(ot,{component:null,exit:!0},l))})),lt=Object(H.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(r.memo(ut)),ht=r.forwardRef((function(e,t){var n=e.action,i=e.buttonRef,a=e.centerRipple,o=void 0!==a&&a,s=e.children,c=e.classes,u=e.className,l=e.component,h=void 0===l?"button":l,f=e.disabled,d=void 0!==f&&f,p=e.disableRipple,v=void 0!==p&&p,g=e.disableTouchRipple,m=void 0!==g&&g,b=e.focusRipple,y=void 0!==b&&b,w=e.focusVisibleClassName,O=e.onBlur,_=e.onClick,j=e.onFocus,k=e.onFocusVisible,x=e.onKeyDown,E=e.onKeyUp,P=e.onMouseDown,S=e.onMouseLeave,T=e.onMouseUp,C=e.onTouchEnd,M=e.onTouchMove,A=e.onTouchStart,L=e.onDragLeave,R=e.tabIndex,I=void 0===R?0:R,D=e.TouchRippleProps,N=e.type,F=void 0===N?"button":N,z=Object(V.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),U=r.useRef(null);var W=r.useRef(null),H=r.useState(!1),X=H[0],q=H[1];d&&X&&q(!1);var Z=Je(),K=Z.isFocusVisible,$=Z.onBlurVisible,J=Z.ref;function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return re((function(r){return t&&t(r),!n&&W.current&&W.current[e](r),!0}))}r.useImperativeHandle(n,(function(){return{focusVisible:function(){q(!0),U.current.focus()}}}),[]),r.useEffect((function(){X&&y&&!v&&W.current.pulsate()}),[v,y,X]);var te=ee("start",P),ne=ee("stop",L),ie=ee("stop",T),ae=ee("stop",(function(e){X&&e.preventDefault(),S&&S(e)})),oe=ee("start",A),se=ee("stop",C),ce=ee("stop",M),ue=ee("stop",(function(e){X&&($(e),q(!1)),O&&O(e)}),!1),le=re((function(e){U.current||(U.current=e.currentTarget),K(e)&&(q(!0),k&&k(e)),j&&j(e)})),he=function(){var e=Y.findDOMNode(U.current);return h&&"button"!==h&&!("A"===e.tagName&&e.href)},fe=r.useRef(!1),de=re((function(e){y&&!fe.current&&X&&W.current&&" "===e.key&&(fe.current=!0,e.persist(),W.current.stop(e,(function(){W.current.start(e)}))),e.target===e.currentTarget&&he()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&he()&&"Enter"===e.key&&!d&&(e.preventDefault(),_&&_(e))})),pe=re((function(e){y&&" "===e.key&&W.current&&X&&!e.defaultPrevented&&(fe.current=!1,e.persist(),W.current.stop(e,(function(){W.current.pulsate(e)}))),E&&E(e),_&&e.target===e.currentTarget&&he()&&" "===e.key&&!e.defaultPrevented&&_(e)})),ve=h;"button"===ve&&z.href&&(ve="a");var ge={};"button"===ve?(ge.type=F,ge.disabled=d):("a"===ve&&z.href||(ge.role="button"),ge["aria-disabled"]=d);var me=Q(i,t),be=Q(J,U),ye=Q(me,be),we=r.useState(!1),Oe=we[0],_e=we[1];r.useEffect((function(){_e(!0)}),[]);var je=Oe&&!v&&!d;return r.createElement(ve,Object(B.a)({className:Object(G.a)(c.root,u,X&&[c.focusVisible,w],d&&c.disabled),onBlur:ue,onClick:_,onFocus:le,onKeyDown:de,onKeyUp:pe,onMouseDown:te,onMouseLeave:ae,onMouseUp:ie,onDragLeave:ne,onTouchEnd:se,onTouchMove:ce,onTouchStart:oe,ref:ye,tabIndex:d?-1:I},ge,z),s,je?r.createElement(lt,Object(B.a)({ref:W,center:o},D)):null)})),ft=Object(H.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(ht),dt=r.forwardRef((function(e,t){var n=e.edge,i=void 0!==n&&n,a=e.children,o=e.classes,s=e.className,c=e.color,u=void 0===c?"default":c,l=e.disabled,h=void 0!==l&&l,f=e.disableFocusRipple,d=void 0!==f&&f,p=e.size,v=void 0===p?"medium":p,g=Object(V.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return r.createElement(ft,Object(B.a)({className:Object(G.a)(o.root,s,"default"!==u&&o["color".concat(q(u))],h&&o.disabled,"small"===v&&o["size".concat(q(v))],{start:o.edgeStart,end:o.edgeEnd}[i]),centerRipple:!0,focusRipple:!d,disabled:h,ref:t},g),r.createElement("span",{className:o.label},a))})),pt=Object(H.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(We.b)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(We.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(We.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(dt),vt=n("7O5W"),gt=n("17x9"),mt=n.n(gt);function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kt(e){return t=e,(t-=0)==t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function xt(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=kt(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{})}var Et=!1;try{Et=!0}catch(Gy){}function Pt(e){return vt.b.icon?vt.b.icon(e):null===e?null:"object"===bt(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function St(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?yt({},e,t):{}}function Tt(e){var t=e.forwardedRef,n=_t(e,["forwardedRef"]),r=n.icon,i=n.mask,a=n.symbol,o=n.className,s=n.title,c=n.titleId,u=Pt(r),l=St("classes",[].concat(jt(function(e){var t,n=e.spin,r=e.pulse,i=e.fixedWidth,a=e.inverse,o=e.border,s=e.listItem,c=e.flip,u=e.size,l=e.rotation,h=e.pull,f=(yt(t={"fa-spin":n,"fa-pulse":r,"fa-fw":i,"fa-inverse":a,"fa-border":o,"fa-li":s,"fa-flip-horizontal":"horizontal"===c||"both"===c,"fa-flip-vertical":"vertical"===c||"both"===c},"fa-".concat(u),null!=u),yt(t,"fa-rotate-".concat(l),null!=l&&0!==l),yt(t,"fa-pull-".concat(h),null!=h),yt(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(f).map((function(e){return f[e]?e:null})).filter((function(e){return e}))}(n)),jt(o.split(" ")))),h=St("transform","string"==typeof n.transform?vt.b.transform(n.transform):n.transform),f=St("mask",Pt(i)),d=Object(vt.a)(u,Ot({},l,{},h,{},f,{symbol:a,title:s,titleId:c}));if(!d)return function(){var e;!Et&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var p=d.abstract,v={ref:t};return Object.keys(n).forEach((function(e){Tt.defaultProps.hasOwnProperty(e)||(v[e]=n[e])})),Ct(p[0],v)}Tt.displayName="FontAwesomeIcon",Tt.propTypes={border:mt.a.bool,className:mt.a.string,mask:mt.a.oneOfType([mt.a.object,mt.a.array,mt.a.string]),fixedWidth:mt.a.bool,inverse:mt.a.bool,flip:mt.a.oneOf(["horizontal","vertical","both"]),icon:mt.a.oneOfType([mt.a.object,mt.a.array,mt.a.string]),listItem:mt.a.bool,pull:mt.a.oneOf(["right","left"]),pulse:mt.a.bool,rotation:mt.a.oneOf([0,90,180,270]),size:mt.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:mt.a.bool,symbol:mt.a.oneOfType([mt.a.bool,mt.a.string]),title:mt.a.string,transform:mt.a.oneOfType([mt.a.string,mt.a.object]),swapOpacity:mt.a.bool},Tt.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var Ct=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=xt(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[kt(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,c=_t(r,["style"]);return a.attrs.style=Ot({},a.attrs.style,{},s),t.apply(void 0,[n.tag,Ot({},a.attrs,{},c)].concat(jt(i)))}.bind(null,i.a.createElement),Mt=n("wHSu");const At=Object(I.a)(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},root:{zIndex:"10000 !important"}})),Lt=e=>{let{open:t,onClose:n,children:r}=e;const a=At(),o=U(F().breakpoints.down("sm"));return i.a.createElement(ze,{open:t,onClose:n,fullScreen:o,maxWidth:"md",scroll:"paper",keepMounted:!0,disablePortal:!0,fullWidth:!0,classes:{root:a.root,paper:a.root}},i.a.createElement(Ve,null,i.a.createElement(pt,{"aria-label":"close",className:a.closeButton,onClick:n},i.a.createElement(Tt,{icon:Mt.m,width:"0"})),r))},Rt=e=>{const t=Object(a.b)(),n=Object(o.a)(),r=Object(a.c)(v),s=Object(a.c)(p),c=()=>{t(R.N())};return i.a.createElement(i.a.Fragment,null,n.map(e=>i.a.createElement(Lt,{key:e.solverKey,open:s&&r===e.solverKey,onClose:c},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.html}}))))},It=e=>{const t=Object(a.b)(),n=Object(o.b)(),r=Object(a.c)(d);return i.a.createElement(Lt,{open:r,onClose:()=>{t(R.O())}},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}}))},Dt=Object(I.a)(e=>({container:{height:"100vh",display:"flex",overflow:"hidden",flexDirection:"row"},[e.breakpoints.down("sm")]:{container:{justifyContent:"flex-end",flexDirection:"column-reverse"}}})),Nt=e=>{let{children:t}=e;const n=Dt();return i.a.createElement("div",{className:n.container},t)};var Ft=n("md7G"),Bt=n("foSv"),zt=n("Ji7U"),Ut=n("bl9R");function Vt(e,t){var n=Ut.b([],t,e);return Ut.a(n,n,1/n[3]),n}function Wt(e,t){var n=e%t;return n<0?t+n:n}function Gt(e,t,n){return n*t+(1-n)*e}var Ht=n("ZaHm"),Xt=n("ZxFD"),qt=n("n+fv");function Yt(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var Zt=Math.PI,Kt=Zt/4,$t=Zt/180,Qt=180/Zt;function Jt(e){return Math.pow(2,e)}function en(e){return Math.log2(e)}function tn(e,t){var n=Object(we.a)(e,2),r=n[0],i=n[1];Yt(Number.isFinite(r)&&Number.isFinite(t)),Yt(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");var a=i*$t;return[(t*=512)*(r*$t+Zt)/(2*Zt),t*(Zt-Math.log(Math.tan(Kt+.5*a)))/(2*Zt)]}function nn(e,t){var n=Object(we.a)(e,2),r=n[0],i=n[1],a=r/(t*=512)*(2*Zt)-Zt,o=2*(Math.atan(Math.exp(Zt-i/t*(2*Zt)))-Kt);return[a*Qt,o*Qt]}function rn(e){var t=e.latitude,n=e.longitude,r=e.zoom,i=e.scale,a=e.highPrecision,o=void 0!==a&&a;i=void 0!==i?i:Jt(r),Yt(Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(i));var s={},c=512*i,u=Math.cos(t*$t),l=c/360,h=l/u,f=c/4003e4/u;if(s.pixelsPerMeter=[f,-f,f],s.metersPerPixel=[1/f,-1/f,1/f],s.pixelsPerDegree=[l,-h,f],s.degreesPerPixel=[1/l,-1/h,1/f],o){var d=$t*Math.tan(t*$t)/u,p=l*d/2,v=c/4003e4*d,g=v/h*f;s.pixelsPerDegree2=[0,-p,v],s.pixelsPerMeter2=[g,0,g]}return s}function an(e,t){var n=Object(we.a)(e,3),r=n[0],i=n[1],a=n[2],o=Object(we.a)(t,3),s=o[0],c=o[1],u=o[2],l=rn({longitude:r,latitude:i,scale:1,highPrecision:!0}),h=l.pixelsPerMeter,f=l.pixelsPerMeter2,d=tn(e,1);d[0]+=s*(h[0]+f[0]*c),d[1]+=c*(h[1]+f[1]*c);var p=nn(d,1),v=(a||0)+(u||0);return Number.isFinite(a)||Number.isFinite(u)?[p[0],p[1],v]:p}function on(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,a=e.center,o=void 0===a?null:a,s=e.flipY,c=void 0!==s&&s,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return Ht.o(u,u,[0,0,-i]),Ht.n(u,u,[1,1,1/t]),Ht.k(u,u,-n*$t),Ht.m(u,u,r*$t),c&&Ht.n(u,u,[1,-1,1]),o&&Ht.o(u,u,qt.d([],o)),u}function sn(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?1.5:r,a=e.pitch,o=void 0===a?0:a,s=e.nearZMultiplier,c=void 0===s?1:s,u=e.farZMultiplier,l=void 0===u?1:u,h=o*$t,f=Math.atan(.5/i),d=Math.sin(f)*i/Math.sin(Math.PI/2-h-f),p=Math.cos(Math.PI/2-h)*d+i;return{fov:2*Math.atan(n/2/i),aspect:t/n,focalDistance:i,near:c,far:p*l}}function cn(e){var t=e.width,n=e.height,r=e.pitch,i=sn({width:t,height:n,altitude:e.altitude,pitch:r,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),a=i.fov,o=i.aspect,s=i.near,c=i.far;return Ht.i([],a,o,s,c)}function un(e,t){var n=Object(we.a)(e,3),r=n[0],i=n[1],a=n[2],o=void 0===a?0:a;return Yt(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o)),Vt(t,[r,i,o,1])}function ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(we.a)(e,3),i=r[0],a=r[1],o=r[2];if(Yt(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=Vt(t,[i,a,o,1]);return s}var c=Vt(t,[i,a,0,1]),u=Vt(t,[i,a,1,1]),l=c[2],h=u[2],f=l===h?0:((n||0)-l)/(h-l);return Xt.c([],c,u,f)}var hn=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function fn(e){var t=e.width,n=e.height,r=e.bounds,i=e.minExtent,a=void 0===i?0:i,o=e.maxZoom,s=void 0===o?24:o,c=e.padding,u=void 0===c?0:c,l=e.offset,h=void 0===l?[0,0]:l,f=Object(we.a)(r,2),d=Object(we.a)(f[0],2),p=d[0],v=d[1],g=Object(we.a)(f[1],2),m=g[0],b=g[1];if(Number.isFinite(u)){u={top:u,bottom:u,left:u,right:u}}else Yt(Number.isFinite(u.top)&&Number.isFinite(u.bottom)&&Number.isFinite(u.left)&&Number.isFinite(u.right));var y=new dn({width:t,height:n,longitude:0,latitude:0,zoom:0}),w=y.project([p,b]),O=y.project([m,v]),_=[Math.max(Math.abs(O[0]-w[0]),a),Math.max(Math.abs(O[1]-w[1]),a)],j=[t-u.left-u.right-2*Math.abs(h[0]),n-u.top-u.bottom-2*Math.abs(h[1])];Yt(j[0]>0&&j[1]>0);var k=j[0]/_[0],x=j[1]/_[1],E=(u.right-u.left)/2/k,P=(u.bottom-u.top)/2/x,S=[(O[0]+w[0])/2+E,(O[1]+w[1])/2+P],T=y.unproject(S),C=y.zoom+Math.log2(Math.abs(Math.min(k,x)));return{longitude:T[0],latitude:T[1],zoom:Math.min(C,s)}}var dn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,o=void 0===a?0:a,s=n.longitude,c=void 0===s?0:s,u=n.zoom,l=void 0===u?0:u,h=n.pitch,f=void 0===h?0:h,d=n.bearing,p=void 0===d?0:d,v=n.altitude,g=void 0===v?1.5:v,m=n.nearZMultiplier,b=n.farZMultiplier;Object(ae.a)(this,t),r=r||1,i=i||1;var y=Jt(l);g=Math.max(.75,g);var w=tn([c,o],y);w[2]=0;var O=cn({width:r,height:i,pitch:f,bearing:p,altitude:g,nearZMultiplier:m||1/i,farZMultiplier:b||1.01}),_=on({height:i,center:w,pitch:f,bearing:p,altitude:g,flipY:!0});return(e=Object(Ft.a)(this,Object(Bt.a)(t).call(this,{width:r,height:i,viewMatrix:_,projectionMatrix:O}))).latitude=o,e.longitude=c,e.zoom=l,e.pitch=f,e.bearing=p,e.altitude=g,e.scale=y,e.center=w,e.pixelsPerMeter=rn(Object(et.a)(Object(et.a)(e))).pixelsPerMeter[2],Object.freeze(Object(et.a)(Object(et.a)(e))),e}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return tn(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return nn(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=ln(e.pos,this.pixelUnprojectionMatrix),r=tn(t,this.scale),i=Xt.a([],r,Xt.d([],n));return nn(Xt.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=fn(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,s=a.latitude,c=a.zoom;return new t({width:r,height:i,longitude:o,latitude:s,zoom:c})}}]),t}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.viewMatrix,a=void 0===i?hn:i,o=t.projectionMatrix,s=void 0===o?hn:o;Object(ae.a)(this,e),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=s;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ht.g(c,c,this.projectionMatrix),Ht.g(c,c,this.viewMatrix),this.viewProjectionMatrix=c;var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ht.n(u,u,[this.width/2,-this.height/2,1]),Ht.o(u,u,[1,-1,0]),Ht.g(u,u,this.viewProjectionMatrix);var l=Ht.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=u,this.pixelUnprojectionMatrix=l,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(oe.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Ht.b(t.projectionMatrix,this.projectionMatrix)&&Ht.b(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),a=un(i,this.pixelProjectionMatrix),o=Object(we.a)(a,2),s=o[0],c=o[1],u=r?c:this.height-c;return 2===e.length?[s,u]:[s,u,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,a=Object(we.a)(e,3),o=a[0],s=a[1],c=a[2],u=r?s:this.height-s,l=i&&i*this.pixelsPerMeter,h=ln([o,u,c],this.pixelUnprojectionMatrix,l),f=this.unprojectPosition(h),d=Object(we.a)(f,3),p=d[0],v=d[1],g=d[2];return Number.isFinite(c)?[p,v,g]:Number.isFinite(i)?[p,v,i]:[p,v]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),n=Object(we.a)(t,2);return[n[0],n[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),n=Object(we.a)(t,2);return[n[0],n[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]||this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]||this.scale;return e}}]),e}()),pn=n("bdgK"),vn=n("6pOq"),gn=n("t8gk"),mn=n.n(gn);function bn(e){var t=e.width,n=e.height,r=e.longitude,i=e.latitude,a=e.zoom,o=e.pitch,s=void 0===o?0:o,c=e.bearing,u=void 0===c?0:c;(r<-180||r>180)&&(r=Wt(r+180,360)-180),(u<-180||u>180)&&(u=Wt(u+180,360)-180);var l=new dn({width:t,height:n,longitude:r,latitude:i,zoom:a}),h=l.project([r,85.05113])[1],f=l.project([r,-85.05113])[1],d=0;return f-h<n&&(a+=Math.log2(n/(f-h)),h=(l=new dn({width:t,height:n,longitude:r,latitude:i,zoom:a})).project([r,85.05113])[1],f=l.project([r,-85.05113])[1]),h>0?d=h:f<n&&(d=f-n),d&&(i=l.unproject([t/2,n/2+d])[1]),{width:t,height:n,longitude:r,latitude:i,zoom:a,pitch:s,bearing:u}}function yn(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function wn(e,t){if(e===t)return!0;if(yn(e)&&yn(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!wn(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=1e-7}function On(e,t,n){return Math.max(t,Math.min(n,e))}function _n(e,t,n){return yn(e)?e.map((function(e,r){return _n(e,t[r],n)})):n*t+(1-n)*e}function jn(e,t){if(!e)throw new Error(t||"react-map-gl: assertion failed.")}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},Pn=0,Sn=0,Tn=1.5,Cn=function(){function e(t){var n=t.width,r=t.height,i=t.latitude,a=t.longitude,o=t.zoom,s=t.bearing,c=void 0===s?Sn:s,u=t.pitch,l=void 0===u?Pn:u,h=t.altitude,f=void 0===h?Tn:h,d=t.maxZoom,p=void 0===d?En.maxZoom:d,v=t.minZoom,g=void 0===v?En.minZoom:v,m=t.maxPitch,b=void 0===m?En.maxPitch:m,y=t.minPitch,w=void 0===y?En.minPitch:y,O=t.transitionDuration,_=t.transitionEasing,j=t.transitionInterpolator,k=t.transitionInterruption,x=t.startPanLngLat,E=t.startZoomLngLat,P=t.startRotatePos,S=t.startBearing,T=t.startPitch,C=t.startZoom;Object(ae.a)(this,e),jn(Number.isFinite(n),"`width` must be supplied"),jn(Number.isFinite(r),"`height` must be supplied"),jn(Number.isFinite(a),"`longitude` must be supplied"),jn(Number.isFinite(i),"`latitude` must be supplied"),jn(Number.isFinite(o),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:i,longitude:a,zoom:o,bearing:c,pitch:l,altitude:f,maxZoom:p,minZoom:g,maxPitch:b,minPitch:w,transitionDuration:O,transitionEasing:_,transitionInterpolator:j,transitionInterruption:k}),this._state={startPanLngLat:x,startZoomLngLat:E,startRotatePos:P,startBearing:S,startPitch:T,startZoom:C}}return Object(oe.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),a=Object(we.a)(i,2),o=a[0],s=a[1];return this._getUpdatedMapState({longitude:o,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startRotatePos:t,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t,n=e.pos,r=e.deltaAngleX,i=void 0===r?0:r,a=e.deltaAngleY,o=void 0===a?0:a,s=this._state,c=s.startRotatePos,u=s.startBearing,l=s.startPitch;return Number.isFinite(u)&&Number.isFinite(l)?(t=n?this._calculateNewPitchAndBearing(xn(xn({},this._getRotationParams(n,c)),{},{startBearing:u,startPitch:l})):{bearing:u+i,pitch:l+o},this._getUpdatedMapState(t)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;jn(r>0,"`scale` must be a positive number");var i=this._state,a=i.startZoom,o=i.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,o=this._unproject(n)||this._unproject(t)),jn(o,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:a||0}),c=new dn(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:o,pos:t}),u=Object(we.a)(c,2),l=u[0],h=u[1];return this._getUpdatedMapState({zoom:s,longitude:l,latitude:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(t){return new e(Object.assign({},this._viewportProps,this._state,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=On(r,n,t);var i=e.maxPitch,a=e.minPitch,o=e.pitch;return e.pitch=On(o,a,i),Object.assign(e,bn(e)),e}},{key:"_unproject",value:function(e){var t=new dn(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new dn(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom;return On(n+Math.log2(t),a,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=On(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,c=i;return n>0?c=i+n*(s-i):n<0&&(c=i-n*(o-i)),{pitch:c,bearing:r+180*t}}},{key:"_getRotationParams",value:function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[1],a=t[1],o=this._viewportProps,s=o.width,c=o.height,u=n/s,l=0;return r>0?Math.abs(c-a)>5&&(l=r/(a-c)*1.2):r<0&&a>5&&(l=1-i/a),{deltaScaleX:u,deltaScaleY:l=Math.min(1,Math.max(-1,l))}}}]),e}();function Mn(e){return e[0].toLowerCase()+e.slice(1)}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=Object(r.createContext)({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),In=Rn.Provider;Rn.Provider=function(e){var t=e.value,n=e.children,i=Object(r.useState)(null),a=Object(we.a)(i,2),o=a[0],s=a[1],c=Object(r.useContext)(Rn);return t=Ln(Ln({setMap:s},c),{},{map:c&&c.map||o},t),r.createElement(In,{value:t},n)};var Dn=Rn,Nn="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zn="A valid API access token is required to use Mapbox data";var Un={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},Vn=Object.assign({},vn.a.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:En});function Wn(){return r.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},r.createElement("h3",{key:"header"},zn),r.createElement("div",{key:"text"},"For information on setting up your basemap, read"),r.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}function Gn(e){e.target.scrollTo(0,0)}var Hn=Object(r.forwardRef)((function(e,t){var n=Object(r.useState)(!0),i=Object(we.a)(n,2),a=i[0],o=i[1],s=Object(r.useState)([0,0]),c=Object(we.a)(s,2),u=c[0],l=c[1],h=Object(r.useRef)(null),f=Object(r.useRef)(null),d=Object(r.useRef)(null),p=Object(r.useContext)(Dn);Nn((function(){if(Hn.supported()){var t=new vn.a(Bn(Bn({},e),{},{mapboxgl:mn.a,width:u[0],height:u[1],container:f.current,onError:function(t){401===(t.error&&t.error.status||t.status)&&a&&(console.error(zn),o(!1)),e.onError(t)}}));h.current=t,p&&p.setMap&&p.setMap(t.getMap());var n=new pn.a((function(t){if(t[0].contentRect){var n=t[0].contentRect,r=n.width,i=n.height;l([r,i]),e.onResize({width:r,height:i})}}));return n.observe(d.current),function(){t.finalize(),h.current=null,n.disconnect()}}}),[]),Nn((function(){h.current&&h.current.setProps(Object.assign({},e,{width:u[0],height:u[1]}))}));var v=h.current&&h.current.getMap();Object(r.useImperativeHandle)(t,(function(){return function(e){return{getMap:function(){return e.current&&e.current.getMap()},queryRenderedFeatures:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.current&&e.current.getMap();return r&&r.queryRenderedFeatures(t,n)}}}(h)}),[]);var g=v&&r.createElement(In,{value:Bn(Bn({},p),{},{viewport:p.viewport||new dn(Bn(Bn(Bn({},e),e.viewState),{},{width:u[0],height:u[1]})),map:v,container:p.container||d.current})},r.createElement("div",{key:"map-overlays",className:"overlays",style:Un,onScroll:Gn},e.children)),m=e.className,b=e.width,y=e.height,w=e.style,O=e.visibilityConstraints,_=Object.assign({position:"relative"},w,{width:b,height:y}),j=e.visible&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:En;for(var n in t){var r=n.slice(0,3),i=Mn(n.slice(3));if("min"===r&&e[i]<t[n])return!1;if("max"===r&&e[i]>t[n])return!1}return!0}(e.viewState||e,O),k=Object.assign({},Un,{visibility:j?"inherit":"hidden"});return r.createElement("div",{key:"map-container",ref:d,style:_},r.createElement("div",{key:"map-mapbox",ref:f,style:k,className:m}),g,!a&&!e.disableTokenWarning&&r.createElement(Wn,null))}));Hn.supported=function(){return mn.a&&mn.a.supported()},Hn.defaultProps=Vn;var Xn=Hn;function qn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zn=function(){function e(){Object(ae.a)(this,e),Object(W.a)(this,"propNames",[])}return Object(oe.a)(e,[{key:"arePropsEqual",value:function(e,t){var n,r=qn(this.propNames||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!wn(e[i],t[i]))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){jn(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(e,t){return t.transitionDuration}}]),e}(),Kn=["longitude","latitude","zoom"],$n={curve:1.414,speed:1.2};function Qn(e,t,n){var r=(n=Object.assign({},$n,n)).curve,i=e.zoom,a=[e.longitude,e.latitude],o=Jt(i),s=t.zoom,c=[t.longitude,t.latitude],u=Jt(s-i),l=tn(a,o),h=tn(c,o),f=Xt.f([],h,l),d=Math.max(e.width,e.height),p=d/u,v=Xt.b(f),g=Math.max(v,.01),m=r*r,b=(p*p-d*d+m*m*g*g)/(2*d*m*g),y=(p*p-d*d-m*m*g*g)/(2*p*m*g),w=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(y*y+1)-y);return{startZoom:i,startCenterXY:l,uDelta:f,w0:d,u1:v,S:(O-w)/r,rho:r,rho2:m,r0:w,r1:O}}var Jn={longitude:1,bearing:1};function er(e){return Number.isFinite(e)||Array.isArray(e)}function tr(e,t,n){return function(e){return e in Jn}(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}function nr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(Gy){return!1}}();return function(){var n,r=Object(Bt.a)(e);if(t){var i=Object(Bt.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(Ft.a)(this,n)}}var ar=["longitude","latitude","zoom","bearing","pitch"],or=["latitude","longitude","zoom","width","height"],sr=["bearing","pitch"],cr={speed:1.2,curve:1.414};!function(e){Object(zt.a)(n,e);var t=ir(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ae.a)(this,n),e=t.call(this),Object(W.a)(Object(et.a)(e),"propNames",ar),e.props=Object.assign({},cr,r),e}Object(oe.a)(n,[{key:"initializeProps",value:function(e,t){var n,r={},i={},a=nr(or);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=e[o],c=t[o];jn(er(s)&&er(c),"".concat(o," must be supplied for transition")),r[o]=s,i[o]=tr(o,s,c)}}catch(p){a.e(p)}finally{a.f()}var u,l=nr(sr);try{for(l.s();!(u=l.n()).done;){var h=u.value,f=e[h]||0,d=t[h]||0;r[h]=f,i[h]=tr(h,f,d)}}catch(p){l.e(p)}finally{l.f()}return{start:r,end:i}}},{key:"interpolateProps",value:function(e,t,n){var r,i=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},a=Qn(e,t,r),o=a.startZoom,s=a.startCenterXY,c=a.uDelta,u=a.w0,l=a.u1,h=a.S,f=a.rho,d=a.rho2,p=a.r0;if(l<.01){for(var v=0;v<Kn.length;v++){var g=Kn[v],m=e[g],b=t[g];i[g]=Gt(m,b,n)}return i}var y=n*h,w=Math.cosh(p)/Math.cosh(p+f*y),O=u*((Math.cosh(p)*Math.tanh(p+f*y)-Math.sinh(p))/d)/l,_=1/w,j=o+en(_),k=Xt.e([],c,O);Xt.a(k,k,s),Xt.e(k,k,_);var x=nn(k,Jt(j));return i.longitude=x[0],i.latitude=x[1],i.zoom=j,i}(e,t,n,this.props),a=nr(sr);try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o]=_n(e[o],t[o],n)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"getDuration",value:function(e,t){var n=t.transitionDuration;return"auto"===n&&(n=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=Object.assign({},$n,r),a=i.screenSpeed,o=i.speed,s=i.maxDuration,c=Qn(e,t,r),u=c.S,l=c.rho,h=1e3*u;return n=Number.isFinite(a)?h/(a/l):h/o,Number.isFinite(s)&&n>s?0:n}(e,t,this.props)),n}}])}(Zn);function ur(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(Gy){return!1}}();return function(){var n,r=Object(Bt.a)(e);if(t){var i=Object(Bt.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(Ft.a)(this,n)}}var fr=["longitude","latitude","zoom","bearing","pitch"],dr=function(e){Object(zt.a)(n,e);var t=hr(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ae.a)(this,n),e=t.call(this),Array.isArray(r)&&(r={transitionProps:r}),e.propNames=r.transitionProps||fr,r.around&&(e.around=r.around),e}return Object(oe.a)(n,[{key:"initializeProps",value:function(e,t){var n={},r={};if(this.around){n.around=this.around;var i=new dn(e).unproject(this.around);Object.assign(r,t,{around:new dn(t).project(i),aroundLngLat:i})}var a,o=ur(this.propNames);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=e[s],u=t[s];jn(er(c)&&er(u),"".concat(s," must be supplied for transition")),n[s]=c,r[s]=tr(s,c,u)}}catch(l){o.e(l)}finally{o.f()}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r,i={},a=ur(this.propNames);try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o]=_n(e[o],t[o],n)}}catch(h){a.e(h)}finally{a.f()}if(t.around){var s=new dn(Object.assign({},t,i)).getMapCenterByLngLatPosition({lngLat:t.aroundLngLat,pos:_n(e.around,t.around,n)}),c=Object(we.a)(s,2),u=c[0],l=c[1];i.longitude=u,i.latitude=l}return i}}]),n}(Zn),pr=function(){};var vr=1,gr=2,mr=3,br=4,yr={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new dr,transitionInterruption:vr,onTransitionStart:pr,onTransitionInterrupt:pr,onTransitionEnd:pr,onViewportChange:pr,onStateChange:pr},wr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e),Object(W.a)(this,"_animationFrame",null),Object(W.a)(this,"_onTransitionFrame",(function(){t._animationFrame=requestAnimationFrame(t._onTransitionFrame),t._updateViewport()})),this.props=null,this.onViewportChange=n.onViewportChange||pr,this.onStateChange=n.onStateChange||pr,this.time=n.getTime||Date.now}return Object(oe.a)(e,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(e){var t=this.props;if(this.props=e,!t||this._shouldIgnoreViewportChange(t,e))return!1;if(this._isTransitionEnabled(e)){var n=Object.assign({},t),r=Object.assign({},e);if(this._isTransitionInProgress()&&(t.onTransitionInterrupt(),this.state.interruption===gr?Object.assign(n,this.state.endProps):Object.assign(n,this.state.propsInTransition),this.state.interruption===br)){var i=this.time(),a=(i-this.state.startTime)/this.state.duration;r.transitionDuration=this.state.duration-(i-this.state.startTime),r.transitionEasing=function(e,t){var n=e(t);return function(r){return 1/(1-n)*(e(r*(1-t)+t)-n)}}(this.state.easing,a),r.transitionInterpolator=n.transitionInterpolator}return r.onTransitionStart(),this._triggerTransition(n,r),!0}return this._isTransitionInProgress()&&(t.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,n=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return!e||(this._isTransitionInProgress()?this.state.interruption===mr||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t))}},{key:"_triggerTransition",value:function(e,t){jn(this._isTransitionEnabled(t)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var n=t.transitionInterpolator,r=n.getDuration?n.getDuration(e,t):t.transitionDuration;if(0!==r){var i=t.transitionInterpolator.initializeProps(e,t),a={inTransition:!0,isZooming:e.zoom!==t.zoom,isPanning:e.longitude!==t.longitude||e.latitude!==t.latitude,isRotating:e.bearing!==t.bearing||e.pitch!==t.pitch};this.state={duration:r,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:this.time(),startProps:i.start,endProps:i.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(a)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var e=this.time(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,a=t.interpolator,o=t.startProps,s=t.endProps,c=!1,u=(e-n)/r;u>=1&&(u=1,c=!0),u=i(u);var l=a.interpolateProps(o,s,u),h=new Cn(Object.assign({},this.props,l));this.state.propsInTransition=h.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),c&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();Object(W.a)(wr,"defaultProps",yr);var Or,_r,jr=n("yLV6"),kr=n.n(jr),xr={mousedown:1,mousemove:2,mouseup:4};Or=kr.a.PointerEventInput,_r=Or.prototype.handler,Or.prototype.handler=function(e){var t=this.store;e.button>0&&(function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(t,(function(t){return t.pointerId===e.pointerId}))||t.push(e)),_r.call(this,e)},kr.a.MouseInput.prototype.handler=function(e){var t=xr[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};var Er=kr.a.Manager,Pr=kr.a,Sr=Pr?[[Pr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Pr.Rotate,{enable:!1}],[Pr.Pinch,{enable:!1}],[Pr.Swipe,{enable:!1}],[Pr.Pan,{threshold:0,enable:!1}],[Pr.Press,{enable:!1}],[Pr.Tap,{event:"doubletap",taps:2,enable:!1}],[Pr.Tap,{event:"anytap",enable:!1}],[Pr.Tap,{enable:!1}]]:null,Tr={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Cr={doubletap:["tap"]},Mr={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Ar=["keydown","keyup"],Lr=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Rr=["wheel","mousewheel","DOMMouseScroll"],Ir={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Dr={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Nr=n("s5q1"),Fr=-1!==Nr.b.indexOf("firefox"),Br=Rr,zr=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=Br.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent,!!Nr.a&&{passive:!1})}))}return Object(oe.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;Nr.c.WheelEvent&&(Fr&&e.deltaMode===Nr.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=Nr.c.devicePixelRatio),e.deltaMode===Nr.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),Ur=Lr,Vr=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=Ur.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Object(oe.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),Wr=Ar,Gr=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=Wr.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=i.tabIndex||0,t.style.outline="none",this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Object(oe.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}(),Hr=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return Object(oe.a)(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),Xr=n("U8pU"),qr={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var Yr={srcElement:"root",priority:0},Zr=function(){function e(t){Object(ae.a)(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(oe.a)(e,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.handlers,o=this.handlersByElement;n&&("object"!==Object(Xr.a)(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},Yr,n):Yr;var s=o.get(n.srcElement);s||(s=[],o.set(n.srcElement,s));var c={type:e,handler:t,srcElement:n.srcElement,priority:n.priority};r&&(c.once=!0),i&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;for(var u=s.length-1;u>=0&&!(s[u].priority>=c.priority);)u--;s.splice(u+1,0,c)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var a=n[i];if(a.type===e&&a.handler===t){n.splice(i,1);var o=r.get(a.srcElement);o.splice(o.indexOf(a),1),0===o.length&&r.delete(a.srcElement)}}this._active=n.some((function(e){return!e.passive}))}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},a=function(){e.handled=!0,r=!0},o=[],s=0;s<n.length;s++){var c=n[s],u=c.type,l=c.handler,h=c.once;if(l(Object.assign({},e,{type:u,stopPropagation:i,stopImmediatePropagation:a})),h&&o.push(n[s]),r)break}for(var f=0;f<o.length;f++){var d=o[f],p=d.type,v=d.handler;this.remove(p,v)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=qr[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,a=n.which,o=!1,s=!1,c=!1;return 4===t||2===t&&!Number.isFinite(r)?(o=1===a,s=2===a,c=3===a):2===t?(o=Boolean(1&r),s=Boolean(4&r),c=Boolean(2&r)):1===t&&(o=0===i,s=1===i,c=2===i),{leftButton:o,middleButton:s,rightButton:c}}(e),function(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),a=i.width/t.offsetWidth,o=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/a,y:(r.y-i.top-t.clientTop)/o}}}(e,t),{handled:!1,rootElement:t})}}]),e}();function Kr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qr={events:null,recognizers:null,recognizerOptions:{},Manager:Er,touchAction:"none",tabIndex:0},Jr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),this.options=Object.assign({},Qr,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var r=n.events;r&&this.on(r)}return Object(oe.a)(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager;for(var i in this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Sr}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Tr).forEach((function(e){var n=t.manager.get(e);n&&Tr[e].forEach((function(e){n.recognizeWith(e)}))})),n.recognizerOptions){var a=this.manager.get(i);if(a){var o=n.recognizerOptions[i];delete o.enable,a.set(o)}}this.wheelInput=new zr(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Vr(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Gr(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Hr(e,this._onOtherEvent,{enable:!1});var s,c=Kr(this.events);try{for(c.s();!(s=c.n()).done;){var u=Object(we.a)(s.value,2),l=u[0],h=u[1];h.isEmpty()||(this._toggleRecognizer(h.recognizerName,!0),this.manager.on(l,h.handleEvent))}}catch(f){c.e(f)}finally{c.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=Cr[e];i&&!this.options.recognizers&&i.forEach((function(i){var a=n.get(i);t?(a.requireFailure(e),r.dropRequireFailure(i)):a.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var a=this.manager,o=this.events,s=Dr[e]||e,c=o.get(s);c||(c=new Zr(this),o.set(s,c),c.recognizerName=Ir[s]||s,a&&a.on(s,c.handleEvent)),c.add(e,t,n,r,i),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}else for(var u in n=t,e)this._addEventHandler(u,e[u],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=Dr[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var a,o=i.recognizerName,s=!1,c=Kr(n.values());try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u.recognizerName===o&&!u.isEmpty()){s=!0;break}}}catch(h){c.e(h)}finally{c.f()}s||this._toggleRecognizer(o,!1)}}else for(var l in e)this._removeEventHandler(l,e[l])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=Mr[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ni={transitionDuration:0},ri={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new dr,transitionInterruption:vr},ii=function(e){return 1-(1-e)*(1-e)},ai=["wheel"],oi=["panstart","panmove","panend"],si=["pinchstart","pinchmove","pinchend"],ci=["tripanstart","tripanmove","tripanend"],ui=["doubletap"],li=["keydown"],hi=function(){function e(){var t=this;Object(ae.a)(this,e),Object(W.a)(this,"events",[]),Object(W.a)(this,"scrollZoom",!0),Object(W.a)(this,"dragPan",!0),Object(W.a)(this,"dragRotate",!0),Object(W.a)(this,"doubleClickZoom",!0),Object(W.a)(this,"touchZoom",!0),Object(W.a)(this,"touchRotate",!1),Object(W.a)(this,"keyboard",!0),Object(W.a)(this,"_interactionState",{isDragging:!1}),Object(W.a)(this,"_events",{}),Object(W.a)(this,"_setInteractionState",(function(e){Object.assign(t._interactionState,e),t.onStateChange&&t.onStateChange(t._interactionState)})),Object(W.a)(this,"_onTransition",(function(e,n){t.onViewportChange(e,t._interactionState,n)})),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new wr({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return Object(oe.a)(e,[{key:"handleEvent",value:function(e){this.mapState=this.getMapState();var t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"blockEvents",value:function(e){var t=this,n=setTimeout((function(){t._eventStartBlocked===n&&(t._eventStartBlocked=null)}),e);this._eventStartBlocked=n}},{key:"updateViewport",value:function(e,t,n){var r=this.mapState instanceof Cn?this.mapState.getViewportProps():this.mapState,i=ti(ti({},e.getViewportProps()),t),a=Object.keys(i).some((function(e){return r[e]!==i[e]}));this._state=e.getState(),this._setInteractionState(n),a&&this.onViewportChange(i,this._interactionState,r)}},{key:"getMapState",value:function(e){return new Cn(ti(ti(ti({},this.mapStateProps),this._state),e))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(e){var t=e.onViewportChange,n=e.onStateChange,r=e.eventManager,i=void 0===r?this.eventManager:r,a=e.isInteractive,o=void 0===a||a,s=e.scrollZoom,c=void 0===s?this.scrollZoom:s,u=e.dragPan,l=void 0===u?this.dragPan:u,h=e.dragRotate,f=void 0===h?this.dragRotate:h,d=e.doubleClickZoom,p=void 0===d?this.doubleClickZoom:d,v=e.touchZoom,g=void 0===v?this.touchZoom:v,m=e.touchRotate,b=void 0===m?this.touchRotate:m,y=e.keyboard,w=void 0===y?this.keyboard:y;this.onViewportChange=t,this.onStateChange=n;var O=this.mapStateProps||{},_=O.height!==e.height||O.width!==e.width;this.mapStateProps=e,_&&(this.mapState=O,this.updateViewport(new Cn(e))),this._transitionManager.processViewportChange(e),this.eventManager!==i&&(this.eventManager=i,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(ai,o&&Boolean(c)),this.toggleEvents(oi,o&&Boolean(l||f)),this.toggleEvents(si,o&&Boolean(g||b)),this.toggleEvents(ci,o&&Boolean(b)),this.toggleEvents(ui,o&&Boolean(p)),this.toggleEvents(li,o&&Boolean(w)),this.scrollZoom=c,this.dragPan=l,this.dragRotate=f,this.doubleClickZoom=p,this.touchZoom=g,this.touchRotate=b,this.keyboard=w}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);this._panRotate=this.isFunctionKeyPressed(e)||e.rightButton;var n=this._panRotate?this.mapState.rotateStart({pos:t}):this.mapState.panStart({pos:t});return this.updateViewport(n,ni,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return!!this.isDragging()&&(this._panRotate?this._onPanRotate(e):this._onPanMove(e))}},{key:"_onPanEnd",value:function(e){return!!this.isDragging()&&(this._panRotate?this._onPanRotateEnd(e):this._onPanMoveEnd(e))}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.mapState.pan({pos:t});return this.updateViewport(n,ni,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(e){if(this.dragPan){var t=this.dragPan.inertia,n=void 0===t?300:t;if(n&&e.velocity){var r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],a=this.mapState.pan({pos:i}).panEnd();return this.updateViewport(a,ti(ti({},ri),{},{transitionDuration:n,transitionEasing:ii}),{isDragging:!1,isPanning:!0}),!0}}var o=this.mapState.panEnd();return this.updateViewport(o,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=this.getCenter(e),n=this.mapState.rotate({pos:t});return this.updateViewport(n,ni,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(e){if(this.dragRotate){var t=this.dragRotate.inertia,n=void 0===t?300:t;if(n&&e.velocity){var r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],a=this.mapState.rotate({pos:i}).rotateEnd();return this.updateViewport(a,ti(ti({},ri),{},{transitionDuration:n,transitionEasing:ii}),{isDragging:!1,isRotating:!0}),!0}}var o=this.mapState.panEnd();return this.updateViewport(o,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;var t=this.scrollZoom,n=t.speed,r=void 0===n?.01:n,i=t.smooth,a=void 0!==i&&i;e.preventDefault();var o=this.getCenter(e),s=e.delta,c=2/(1+Math.exp(-Math.abs(s*r)));s<0&&0!==c&&(c=1/c);var u=this.mapState.zoom({pos:o,scale:c});return this.updateViewport(u,ti(ti({},ri),{},{transitionInterpolator:new dr({around:o}),transitionDuration:a?250:1}),{isPanning:!0,isZooming:!0}),!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.mapState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,ni,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.isDragging())return!1;if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.mapState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,ni,{isDragging:!0,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:Boolean(this.touchRotate)}),this._lastPinchEvent=e,!0}},{key:"_onPinchEnd",value:function(e){if(!this.isDragging())return!1;if(this.touchZoom){var t=this.touchZoom.inertia,n=void 0===t?300:t,r=this._lastPinchEvent;if(n&&r&&e.scale!==r.scale){var i=this.getCenter(e),a=this.mapState.rotateEnd(),o=Math.log2(e.scale),s=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),c=Math.pow(2,o+s*n/2);return a=a.zoom({pos:i,scale:c}).zoomEnd(),this.updateViewport(a,ti(ti({},ri),{},{transitionInterpolator:new dr({around:i}),transitionDuration:n,transitionEasing:ii}),{isDragging:!1,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:!1}),this.blockEvents(n),!0}}var u=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(u,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(e){var t=this.getCenter(e),n=this.mapState.rotateStart({pos:t});return this.updateViewport(n,ni,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(e){if(!this.isDragging())return!1;if(!this.touchRotate)return!1;var t=this.getCenter(e);t[0]-=e.deltaX;var n=this.mapState.rotate({pos:t});return this.updateViewport(n,ni,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(e){if(!this.isDragging())return!1;if(this.touchRotate){var t=this.touchRotate.inertia,n=void 0===t?300:t;if(n&&e.velocityY){var r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],a=this.mapState.rotate({pos:i});return this.updateViewport(a,ti(ti({},ri),{},{transitionDuration:n,transitionEasing:ii}),{isDragging:!1,isRotating:!0}),this.blockEvents(n),!1}}var o=this.mapState.rotateEnd();return this.updateViewport(o,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.mapState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,Object.assign({},ri,{transitionInterpolator:new dr({around:t})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.keyboard,i=r.zoomSpeed,a=void 0===i?2:i,o=r.moveSpeed,s=void 0===o?100:o,c=r.rotateSpeedX,u=void 0===c?15:c,l=r.rotateSpeedY,h=void 0===l?10:l,f=this.mapStateProps;switch(e.srcEvent.keyCode){case 189:t=n?this.getMapState({zoom:f.zoom-Math.log2(a)-1}):this.getMapState({zoom:f.zoom-Math.log2(a)});break;case 187:t=n?this.getMapState({zoom:f.zoom+Math.log2(a)+1}):this.getMapState({zoom:f.zoom+Math.log2(a)});break;case 37:t=n?this.getMapState({bearing:f.bearing-u}):this.mapState.pan({pos:[s,0],startPos:[0,0]});break;case 39:t=n?this.getMapState({bearing:f.bearing+u}):this.mapState.pan({pos:[-s,0],startPos:[0,0]});break;case 38:t=n?this.getMapState({pitch:f.pitch+h}):this.mapState.pan({pos:[0,s],startPos:[0,0]});break;case 40:t=n?this.getMapState({pitch:f.pitch-h}):this.mapState.pan({pos:[0,-s],startPos:[0,0]});break;default:return!1}return this.updateViewport(t,ri)}}]),e}();function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pi=Object.assign({},Xn.propTypes,{maxZoom:gt.number,minZoom:gt.number,maxPitch:gt.number,minPitch:gt.number,onViewStateChange:gt.func,onViewportChange:gt.func,onInteractionStateChange:gt.func,transitionDuration:gt.oneOfType([gt.number,gt.string]),transitionInterpolator:gt.object,transitionInterruption:gt.number,transitionEasing:gt.func,onTransitionStart:gt.func,onTransitionInterrupt:gt.func,onTransitionEnd:gt.func,scrollZoom:gt.oneOfType([gt.bool,gt.object]),dragPan:gt.oneOfType([gt.bool,gt.object]),dragRotate:gt.oneOfType([gt.bool,gt.object]),doubleClickZoom:gt.bool,touchZoom:gt.oneOfType([gt.bool,gt.object]),touchRotate:gt.oneOfType([gt.bool,gt.object]),keyboard:gt.oneOfType([gt.bool,gt.object]),onHover:gt.func,onClick:gt.func,onDblClick:gt.func,onContextMenu:gt.func,onMouseDown:gt.func,onMouseMove:gt.func,onMouseUp:gt.func,onTouchStart:gt.func,onTouchMove:gt.func,onTouchEnd:gt.func,onMouseEnter:gt.func,onMouseLeave:gt.func,onMouseOut:gt.func,onWheel:gt.func,touchAction:gt.string,eventRecognizerOptions:gt.object,clickRadius:gt.number,interactiveLayerIds:gt.array,getCursor:gt.func,controller:gt.instanceOf(hi)}),vi=Object.assign({},Xn.defaultProps,En,wr.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(e){return e.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:function(e){var t=e.isDragging,n=e.isHovering;return t?"grabbing":n?"pointer":"grab"}});function gi(e){if(e.lngLat||!e.offsetCenter)return e;var t=e.offsetCenter,n=[t.x,t.y],r=new dn(Object.assign({},this.props,this.props.viewState,{width:this.width,height:this.height}));return e.point=n,e.lngLat=r.unproject(n),e}function mi(e){var t=this.map;if(!t||!e)return null;var n={},r=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return t.queryRenderedFeatures(r?[[e[0]-r,e[1]+r],[e[0]+r,e[1]-r]]:e,n)}catch(i){return null}}function bi(e,t){var n=this.props[e];n&&n(gi.call(this,t))}function yi(e){bi.call(this,"touch"===e.pointerType?"onTouchStart":"onMouseDown",e)}function wi(e){bi.call(this,"touch"===e.pointerType?"onTouchEnd":"onMouseUp",e)}function Oi(e){if(bi.call(this,"touch"===e.pointerType?"onTouchMove":"onMouseMove",e),!this.state.isDragging){var t,n=this.props,r=n.onHover,i=n.interactiveLayerIds;e=gi.call(this,e),(i||r)&&(t=mi.call(this,e.point)),r&&(e.features=t,r(e));var a=Boolean(i&&t&&t.length>0),o=a&&!this.state.isHovering,s=!a&&this.state.isHovering;o&&bi.call(this,"onMouseEnter",e),s&&bi.call(this,"onMouseLeave",e),(o||s)&&this.setState({isHovering:a})}}function _i(e){var t=this.props,n=t.onClick,r=t.onNativeClick,i=t.onDblClick,a=t.doubleClickZoom,o=[],s=i||a;switch(e.type){case"anyclick":o.push(r),s||o.push(n);break;case"click":s&&o.push(n)}(o=o.filter(Boolean)).length&&((e=gi.call(this,e)).features=mi.call(this,e.point),o.forEach((function(t){return t(e)})))}var ji=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(Dn),i=Object(r.useMemo)((function(){return e.controller||new hi}),[]),a=Object(r.useMemo)((function(){return new Jr(null,{touchAction:e.touchAction,recognizerOptions:e.eventRecognizerOptions})}),[]),o=Object(r.useRef)(null),c=Object(r.useRef)(null),u=Object(r.useRef)({width:0,height:0,state:{isHovering:!1,isDragging:!1}}).current;u.props=e,u.map=c.current&&c.current.getMap(),u.setState=function(t){u.state=di(di({},u.state),t),o.current.style.cursor=e.getCursor(u.state)};var l,h,f=!0,d=function(e,t,n){if(f)l=[e,t,n];else{var r=u.props,i=r.onViewStateChange,a=r.onViewportChange;i&&i({viewState:e,interactionState:t,oldViewState:n}),a&&a(e,t,n)}};Object(r.useImperativeHandle)(t,(function(){return function(e){return{getMap:e.current&&e.current.getMap,queryRenderedFeatures:e.current&&e.current.queryRenderedFeatures}}(c)}),[]);var p=Object(r.useMemo)((function(){return di(di({},n),{},{eventManager:a,container:n.container||o.current})}),[n,o.current]);p.onViewportChange=d;var v=function(e){var t=e.isDragging,n=void 0!==t&&t;if(n!==u.state.isDragging&&u.setState({isDragging:n}),f)h=e;else{var r=u.props.onInteractionStateChange;r&&r(e)}},g=function(){u.width&&u.height&&i.setOptions(di(di(di({},u.props),u.props.viewState),{},{isInteractive:Boolean(u.props.onViewStateChange||u.props.onViewportChange),onViewportChange:d,onStateChange:v,eventManager:a,width:u.width,height:u.height}))};Object(r.useEffect)((function(){return a.setElement(o.current),a.on({pointerdown:yi.bind(u),pointermove:Oi.bind(u),pointerup:wi.bind(u),pointerleave:bi.bind(u,"onMouseOut"),click:_i.bind(u),anyclick:_i.bind(u),dblclick:bi.bind(u,"onDblClick"),wheel:bi.bind(u,"onWheel"),contextmenu:bi.bind(u,"onContextMenu")}),function(){a.destroy()}}),[]),Nn((function(){l&&d.apply(void 0,Object(s.a)(l)),h&&v(h)})),g();var m=e.width,b=e.height,y=e.style,w=e.getCursor,O=Object(r.useMemo)((function(){return di(di({position:"relative"},y),{},{width:m,height:b,cursor:w(u.state)})}),[y,m,b,w,u.state]);return l&&u._child||(u._child=r.createElement(In,{value:p},r.createElement("div",{key:"event-canvas",ref:o,style:O},r.createElement(Xn,Object(B.a)({},e,{width:"100%",height:"100%",style:null,onResize:function(e){var t=e.width,n=e.height;u.width=t,u.height=n,g(),u.props.onResize({width:t,height:n})},ref:c}))))),f=!1,u._child}));ji.supported=Xn.supported,ji.propTypes=pi,ji.defaultProps=vi;var ki=ji;function xi(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!xi(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===Object(Xr.a)(e)&&"object"===Object(Xr.a)(t)){var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a];if(!t.hasOwnProperty(s))return!1;if(!xi(e[s],t[s]))return!1}return!0}return!1}function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si={type:gt.oneOf(["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade"]).isRequired,id:gt.string,source:gt.string,beforeId:gt.string};function Ti(e,t,n,r){jn(n.id===r.id,"layer id changed"),jn(n.type===r.type,"layer type changed");try{!function(e,t,n,r){var i=n.layout,a=void 0===i?{}:i,o=n.paint,s=void 0===o?{}:o,c=n.filter,u=n.minzoom,l=n.maxzoom,h=n.beforeId,f=Object(V.a)(n,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(h!==r.beforeId&&e.moveLayer(t,h),a!==r.layout){var d=r.layout||{};for(var p in a)xi(a[p],d[p])||e.setLayoutProperty(t,p,a[p]);for(var v in d)a.hasOwnProperty(v)||e.setLayoutProperty(t,v,void 0)}if(s!==r.paint){var g=r.paint||{};for(var m in s)xi(s[m],g[m])||e.setPaintProperty(t,m,s[m]);for(var b in g)s.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}for(var y in xi(c,r.filter)||e.setFilter(t,c),u===r.minzoom&&l===r.maxzoom||e.setLayerZoomRange(t,u,l),f)xi(f[y],r[y])||e.setLayerProperty(t,y,f[y])}(e,t,n,r)}catch(i){console.warn(i)}}var Ci=0;function Mi(e){var t=Object(r.useContext)(Dn),n=Object(r.useRef)({id:e.id,type:e.type}),i=Object(r.useState)(0),a=Object(we.a)(i,2)[1],o=Object(r.useMemo)((function(){return e.id||"jsx-layer-".concat(Ci++)}),[]),s=t.map;return Object(r.useEffect)((function(){if(s){var e=function(){return a((function(e){return e+1}))};return s.on("styledata",e),function(){s.off("styledata",e),s.style&&s.style._loaded&&s.removeLayer(o)}}}),[s]),s&&s.style&&s.getLayer(o)?Ti(s,o,e,n.current):function(e,t,n){if(e.style&&e.style._loaded){var r=Pi(Pi({},n),{},{id:t});delete r.beforeId,e.addLayer(r,n.beforeId)}}(s,o,e),n.current=e,null}Mi.propTypes=Si;var Ai={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},Li={captureScroll:gt.bool,captureDrag:gt.bool,captureClick:gt.bool,captureDoubleClick:gt.bool,capturePointerMove:gt.bool};function Ri(e){var t=e.containerRef.current,n=e.context.eventManager;if(t&&n){var r={wheel:function(t){var n=e.props;n.captureScroll&&t.stopPropagation(),n.onScroll&&n.onScroll(t,e)},panstart:function(t){var n=e.props;n.captureDrag&&t.stopPropagation(),n.onDragStart&&n.onDragStart(t,e)},anyclick:function(t){var n=e.props;n.captureClick&&t.stopPropagation(),n.onClick&&n.onClick(t,e)},click:function(t){var n=e.props;n.captureClick&&t.stopPropagation(),n.onClick&&n.onClick(t,e)},dblclick:function(t){var n=e.props;n.captureDoubleClick&&t.stopPropagation(),n.onDoubleClick&&n.onDoubleClick(t,e)},pointermove:function(t){var n=e.props;n.capturePointerMove&&t.stopPropagation(),n.onPointerMove&&n.onPointerMove(t,e)}};return n.watch(r,t),function(){n.off(r)}}}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useContext)(Dn),n=Object(r.useRef)(null),i=Object(r.useRef)({props:e,state:{},context:t,containerRef:n}),a=i.current;return a.props=e,a.context=t,Object(r.useEffect)((function(){return Ri(a)}),[t.eventManager]),a}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(Gy){return!1}}();return function(){var n,r=Object(Bt.a)(e);if(t){var i=Object(Bt.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(Ft.a)(this,n)}}function Ni(e){var t=e.instance,n=Ii(e),r=n.context,i=n.containerRef;return t._context=r,t._containerRef=i,t._render()}var Fi=function(e){Object(zt.a)(n,e);var t=Di(n);function n(){var e;Object(ae.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(W.a)(Object(et.a)(e),"_context",{}),Object(W.a)(Object(et.a)(e),"_containerRef",Object(r.createRef)()),Object(W.a)(Object(et.a)(e),"_onScroll",(function(e){})),Object(W.a)(Object(et.a)(e),"_onDragStart",(function(e){})),Object(W.a)(Object(et.a)(e),"_onDblClick",(function(e){})),Object(W.a)(Object(et.a)(e),"_onClick",(function(e){})),Object(W.a)(Object(et.a)(e),"_onPointerMove",(function(e){})),e}return Object(oe.a)(n,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return r.createElement(Ni,Object(B.a)({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),n}(r.PureComponent);function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(W.a)(Fi,"propTypes",Li),Object(W.a)(Fi,"defaultProps",Ai);Object.assign({},Li,{draggable:gt.bool,onDrag:gt.func,onDragEnd:gt.func,onDragStart:gt.func,offsetLeft:gt.number,offsetTop:gt.number});var Ui=Object.assign({},Ai,{draggable:!1,offsetLeft:0,offsetTop:0});function Vi(e){var t=e.offsetCenter;return[t.x,t.y]}function Wi(e,t,n,r){var i=e[0]+t[0]-n.offsetLeft,a=e[1]+t[1]-n.offsetTop;return r.viewport.unproject([i,a])}function Gi(e,t){var n=t.props,r=t.callbacks,i=t.state,a=t.context,o=t.containerRef;if(n.draggable){e.stopPropagation();var s=Vi(e),c=function(e,t){var n=e.center,r=n.x,i=n.y;if(t){var a=t.getBoundingClientRect();return[a.left-r,a.top-i]}return null}(e,o.current);if(i.setDragPos(s),i.setDragOffset(c),r.onDragStart&&c){var u=Object.assign({},e);u.lngLat=Wi(s,c,n,a),r.onDragStart(u)}}}function Hi(e){var t=e.context.eventManager;if(t&&e.state.dragPos){var n={panmove:function(t){return function(e,t){var n=t.props,r=t.callbacks,i=t.state,a=t.context;e.stopPropagation();var o=Vi(e);i.setDragPos(o);var s=i.dragOffset;if(r.onDrag&&s){var c=Object.assign({},e);c.lngLat=Wi(o,s,n,a),r.onDrag(c)}}(t,e)},panend:function(t){return function(e,t){var n=t.props,r=t.callbacks,i=t.state,a=t.context;e.stopPropagation();var o=i.dragPos,s=i.dragOffset;if(i.setDragPos(null),i.setDragOffset(null),r.onDragEnd&&o&&s){var c=Object.assign({},e);c.lngLat=Wi(o,s,n,a),r.onDragEnd(c)}}(t,e)},pancancel:function(t){return n=t,r=e.state,n.stopPropagation(),r.setDragPos(null),void r.setDragOffset(null);var n,r}};return t.watch(n),function(){t.off(n)}}}var Xi="undefined"!=typeof window&&window.devicePixelRatio||1,qi=function(e){return Math.round(e*Xi)/Xi},Yi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===e)return t;var r="x"===n?e.offsetWidth:e.offsetHeight;return qi(t/100*r)/r*100},Zi=Object.assign({},Ui,{className:""});function Ki(e){var t=function(e){var t=Object(r.useState)(null),n=Object(we.a)(t,2),i=n[0],a=n[1],o=Object(r.useState)(null),s=Object(we.a)(o,2),c=s[0],u=s[1],l=Ii(zi(zi({},e),{},{onDragStart:Gi}));return l.callbacks=e,l.state.dragPos=i,l.state.setDragPos=a,l.state.dragOffset=c,l.state.setDragOffset=u,Object(r.useEffect)((function(){return Hi(l)}),[l.context.eventManager,Boolean(i)]),l}(e),n=t.state,i=t.containerRef,a=e.children,o=e.className,s=e.draggable,c=n.dragPos,u=function(e){var t=e.props,n=e.state,r=e.context,i=t.longitude,a=t.latitude,o=t.offsetLeft,s=t.offsetTop,c=n.dragPos,u=n.dragOffset;if(c&&u)return[c[0]+u[0],c[1]+u[1]];var l=r.viewport.project([i,a]),h=Object(we.a)(l,2),f=h[0],d=h[1];return[f+=o,d+=s]}(t),l=Object(we.a)(u,2),h=l[0],f=l[1],d="translate(".concat(qi(h),"px, ").concat(qi(f),"px)"),p=s?c?"grabbing":"grab":"auto",v=Object(r.useMemo)((function(){var e={position:"absolute",left:0,top:0,transform:d,cursor:p};return r.createElement("div",{className:"mapboxgl-marker ".concat(o),ref:t.containerRef,style:e},a)}),[a,o]),g=i.current;return g&&(g.style.transform=d,g.style.cursor=p),v}Ki.defaultProps=Zi;r.memo(Ki);var $i={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},Qi=Object.keys($i);function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ta=Object.assign({},Ai,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function na(e,t,n,r){var i=Object(we.a)(r,2),a=i[0],o=i[1],s=e.anchor,c=e.dynamicPosition,u=e.tipSize;return n&&c?function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.selfWidth,o=e.selfHeight,s=e.anchor,c=e.padding,u=void 0===c?0:c,l=$i[s],h=l.x,f=l.y,d=n-f*o,p=d+o,v=Math.max(0,u-d)+Math.max(0,p-i+u);if(v>0){var g=f,m=v;for(f=0;f<=1;f+=.5)p=(d=n-f*o)+o,(v=Math.max(0,u-d)+Math.max(0,p-i+u))<m&&(m=v,g=f);f=g}var b=.5;.5===f&&(h=Math.floor(h),b=1);var y=t-h*a,w=y+a,O=Math.max(0,u-y)+Math.max(0,w-r+u);if(O>0){var _=h,j=O;for(h=0;h<=1;h+=b)w=(y=t-h*a)+a,(O=Math.max(0,u-y)+Math.max(0,w-r+u))<j&&(j=O,_=h);h=_}return Qi.find((function(e){var t=$i[e];return t.x===h&&t.y===f}))||s}({x:a,y:o,anchor:s,padding:u,width:t.width,height:t.height,selfWidth:n.clientWidth,selfHeight:n.clientHeight}):s}function ra(e,t){var n=t.props,r=t.context;(n.closeOnClick||"mapboxgl-popup-close-button"===e.target.className)&&(n.onClose(),r.eventManager&&r.eventManager.once("click",(function(e){return e.stopPropagation()}),e.target))}function ia(e){var t=Object(r.useRef)(null),n=Ii(ea(ea({},e),{},{onClick:ra})),i=n.context,a=n.containerRef,o=Object(r.useState)(!1),s=Object(we.a)(o,2)[1];Object(r.useEffect)((function(){s(!0)}),[t.current]);var c=i.viewport,u=e.className,l=e.longitude,h=e.latitude,f=e.altitude,d=e.tipSize,p=e.closeButton,v=e.children,g=c.project([l,h,f]),m=na(e,c,t.current,g),b=function(e,t,n,r,i){var a=Object(we.a)(r,3),o=a[0],s=a[1],c=a[2],u=e.offsetLeft,l=e.offsetTop,h=e.sortByDepth,f=$i[i],d=o+u,p=s+l,v=Yi(n,100*-f.x),g=Yi(n,100*-f.y,"y"),m={position:"absolute",transform:"\n      translate(".concat(v,"%, ").concat(g,"%)\n      translate(").concat(qi(d),"px, ").concat(qi(p),"px)\n    "),display:void 0,zIndex:void 0};return h?(c>1||c<-1||o<0||o>t.width||s<0||s>t.height?m.display="none":m.zIndex=Math.floor((1-c)/2*1e5),m):m}(e,c,a.current,g,m),y=Object(r.useCallback)((function(e){return!i.eventManager&&ra(e,n)}),[i.eventManager]);return r.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(m," ").concat(u),style:b,ref:a},r.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:d}}),r.createElement("div",{key:"content",ref:t,className:"mapboxgl-popup-content",onClick:y},p&&r.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},"×"),v))}ia.defaultProps=ta;r.memo(ia);function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oa=Object.assign({},Ai,{className:"",toggleLabel:"Toggle Attribution"});function sa(e){var t=Ii(e),n=t.context,i=t.containerRef,a=Object(r.useRef)(null),o=Object(r.useState)(!1),s=Object(we.a)(o,2),c=s[0],u=s[1];Object(r.useEffect)((function(){var t;return n.map&&(t=function(e,t,n,r){var i=new mn.a.AttributionControl(e);return i._map=t,i._container=n,i._innerContainer=r,i._updateAttributions(),i._updateEditLink(),t.on("styledata",i._updateData),t.on("sourcedata",i._updateData),i}({customAttribution:e.customAttribution},n.map,i.current,a.current)),function(){return t&&function(e){e._map.off("styledata",e._updateData),e._map.off("sourcedata",e._updateData)}(t)}}),[n.map]);var l=void 0===e.compact?n.viewport.width<=640:e.compact;Object(r.useEffect)((function(){!l&&c&&u(!1)}),[l]);var h=Object(r.useCallback)((function(){return u((function(e){return!e}))}),[]),f=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:f,className:e.className},r.createElement("div",{ref:i,"aria-pressed":c,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(l?"mapboxgl-compact":""," ").concat(c?"mapboxgl-compact-show":"")},r.createElement("button",{className:"mapboxgl-ctrl-attrib-button",title:e.toggleLabel,onClick:h}),r.createElement("div",{ref:a,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}sa.defaultProps=oa;r.memo(sa);var ca=n("2lZV");function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var la=Object.assign({},Ai,{className:"",container:null,label:"Toggle fullscreen"});function ha(e){var t=Ii(e),n=t.context,i=t.containerRef,a=Object(r.useState)(!1),o=Object(we.a)(a,2),s=o[0],c=o[1],u=Object(r.useState)(!1),l=Object(we.a)(u,2),h=l[0],f=l[1],d=Object(r.useState)(null),p=Object(we.a)(d,2),v=p[0],g=p[1];Object(r.useEffect)((function(){var e=new mn.a.FullscreenControl;g(e),f(e._checkFullscreenSupport());var t=function(){var t=!e._fullscreen;e._fullscreen=t,c(t)};return ca.a.addEventListener(e._fullscreenchange,t),function(){ca.a.removeEventListener(e._fullscreenchange,t)}}),[]);var m=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);if(!h)return null;var b=e.className,y=e.label,w=s?"shrink":"fullscreen";return r.createElement("div",{style:m,className:b},r.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},r.createElement("button",{key:w,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(w),type:"button",title:y,onClick:function(){v&&(v._container=e.container||n.container,v._onClickFullscreen())}},r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}ha.defaultProps=la;var fa;r.memo(ha);function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pa=Object.assign({},wr.defaultProps,{transitionDuration:500}),va=function(){},ga=Object.assign({},Ai,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showAccuracyCircle:!0,onGeolocate:function(){}});function ma(e,t){var n=t.context,r=t.props,i=function(e){var t=new mn.a.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=t.toBounds(n);return[[r._ne.lng,r._ne.lat],[r._sw.lng,r._sw.lat]]}(e),a=n.viewport.fitBounds(i,r.fitBoundsOptions),o=a.longitude,s=a.latitude,c=a.zoom,u=Object.assign({},n.viewport,{longitude:o,latitude:s,zoom:c}),l=new Cn(u),h=Object.assign({},l.getViewportProps(),pa),f=r.onViewportChange||n.onViewportChange||va;(r.onViewStateChange||n.onViewStateChange||va)({viewState:h}),f(h)}function ba(e){var t=Ii(e),n=t.context,i=t.containerRef,a=Object(r.useRef)(null),o=Object(r.useState)(null),s=Object(we.a)(o,2),c=s[0],u=s[1],l=Object(r.useState)(!1),h=Object(we.a)(l,2),f=h[0],d=h[1];Object(r.useEffect)((function(){var r;return n.map&&(void 0!==fa?Promise.resolve(fa):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(e){return fa="denied"!==e.state})):(fa=Boolean(window.navigator.geolocation),Promise.resolve(fa))).then((function(i){d(i),a.current&&((r=function(e,t,n){var r=new mn.a.GeolocateControl(t);r._container=ca.a.createElement("div"),r._map={on:function(){},_getUIString:function(){return""}},r._setupUI(!0),r._map=e.map,r._geolocateButton=n;var i=e.eventManager;return r.options.trackUserLocation&&i&&i.on("panstart",(function(){"ACTIVE_LOCK"===r._watchState&&(r._watchState="BACKGROUND",n.classList.add("mapboxgl-ctrl-geolocate-background"),n.classList.remove("mapboxgl-ctrl-geolocate-active"))})),r.on("geolocate",t.onGeolocate),r}(n,e,a.current))._updateCamera=function(e){return ma(e,t)},u(r))})),function(){r&&r._clearWatch()}}),[n.map]);var p=Object(r.useCallback)((function(){c&&(c.options=t.props,c.trigger())}),[c]);Object(r.useEffect)((function(){e.auto&&p()}),[c,e.auto]),Object(r.useEffect)((function(){c&&c._onZoom()}),[n.viewport.zoom]);var v=e.className,g=e.label,m=e.disabledLabel,b=e.trackUserLocation,y=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:y,className:v},r.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},r.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:a,disabled:!f,"aria-pressed":!b,type:"button",title:f?g:m,"aria-label":f?g:m,onClick:p},r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}ba.defaultProps=ga;r.memo(ba);function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wa=function(){},Oa=Object.assign({},Ai,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function _a(e){return function(e,t){for(var n=(e||"").split(".").map(Number),r=(t||"").split(".").map(Number),i=0;i<3;i++){var a=n[i]||0,o=r[i]||0;if(a<o)return-1;if(a>o)return 1}return 0}(e,"1.6.0")>=0?2:1}function ja(e,t,n){var r=e.viewport,i=new Cn(Object.assign({},r,n)),a=Object.assign({},i.getViewportProps(),ri),o=t.onViewportChange||e.onViewportChange||wa;(t.onViewStateChange||e.onViewStateChange||wa)({viewState:a}),o(a)}function ka(e,t,n,i){return r.createElement("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(e),type:"button",title:t,onClick:n},i||r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function xa(e){var t=Ii(e),n=t.context,i=t.containerRef,a=e.className,o=e.showCompass,s=e.showZoom,c=e.zoomInLabel,u=e.zoomOutLabel,l=e.compassLabel,h=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:h,className:a},r.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},s&&ka("zoom-in",c,(function(){ja(n,e,{zoom:n.viewport.zoom+1})})),s&&ka("zoom-out",u,(function(){ja(n,e,{zoom:n.viewport.zoom-1})})),o&&ka("compass",l,(function(){ja(n,e,{bearing:0,pitch:0})}),function(e){var t=Object(r.useMemo)((function(){return e.map?_a(e.map.version):2}),[e.map]),n=e.viewport.bearing,i={transform:"rotate(".concat(-n,"deg)")};return 2===t?r.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:i}):r.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:i})}(n))))}xa.defaultProps=Oa;r.memo(xa);function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pa=Object.assign({},Ai,{className:"",maxWidth:100,unit:"metric"});function Sa(e){var t=Ii(e),n=t.context,i=t.containerRef,a=Object(r.useState)(null),o=Object(we.a)(a,2),s=o[0],c=o[1];Object(r.useEffect)((function(){if(n.map){var e=new mn.a.ScaleControl;e._map=n.map,e._container=i.current,c(e)}}),[n.map]),s&&(s.options=e,s._onMove());var u=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute"},e.style)}),[e.style]);return r.createElement("div",{style:u,className:e.className},r.createElement("div",{ref:i,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}Sa.defaultProps=Pa;r.memo(Sa);var Ta="undefined"!=typeof window&&window.devicePixelRatio||1;function Ca(e){var t=Ii(e),n=t.context,i=t.containerRef,a=Object(r.useState)(null),o=Object(we.a)(a,2),s=o[0],c=o[1];Object(r.useEffect)((function(){c(i.current.getContext("2d"))}),[]);var u=n.viewport,l=n.isDragging;return s&&(s.save(),s.scale(Ta,Ta),e.redraw({width:u.width,height:u.height,ctx:s,isDragging:l,project:u.project,unproject:u.unproject}),s.restore()),r.createElement("canvas",{ref:i,width:u.width*Ta,height:u.height*Ta,style:{width:"".concat(u.width,"px"),height:"".concat(u.height,"px"),position:"absolute",left:0,top:0}})}Ca.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};function Ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){var t=Ii(e),n=t.context,i=t.containerRef,a=n.viewport,o=n.isDragging,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute",left:0,top:0,width:a.width,height:a.height},e.style);return r.createElement("div",{ref:i,style:s},e.redraw({width:a.width,height:a.height,isDragging:o,project:a.project,unproject:a.unproject}))}Aa.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e){var t=Ii(e),n=t.context,i=t.containerRef,a=n.viewport,o=n.isDragging,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:"absolute",left:0,top:0},e.style);return r.createElement("svg",{width:a.width,height:a.height,ref:i,style:s},e.redraw({width:a.width,height:a.height,isDragging:o,project:a.project,unproject:a.unproject}))}Ra.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};mn.a&&mn.a.setRTLTextPlugin,n("rG3h");function Ia(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filter,r=void 0===n?function(){return!0}:n,i=t.map,a=void 0===i?function(e){return e}:i,o=t.result,s=void 0===o?[]:o;return Array.isArray(e)?Da(e,r,a,s):r(e)?[a(e)]:[]}function Da(e,t,n,r){for(var i=-1;++i<e.length;){var a=e[i];Array.isArray(a)?Da(a,t,n,r):t(a)&&r.push(n(a))}return r}function Na(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,a=e.count,o=void 0===a?1:a,s=n.length,c=o*s,u=0,l=i;u<s;u++)t[l++]=n[u];for(;u<c;)u<c-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+c-u),u=c);return t}var Fa=[],Ba=[];function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=Fa,i={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?r=e:e.length>0&&(Ba.length=e.length,r=Ba):r=Fa,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}function Ua(e){return e&&e[Symbol.asyncIterator]}var Va=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.overAlloc,r=void 0===n?2:n,i=t.poolSize,a=void 0===i?100:i;Object(ae.a)(this,e),this.overAlloc=r,this.poolSize=a,this._pool=[]}return Object(oe.a)(e,[{key:"allocate",value:function(e,t,n){var r=n.size,i=void 0===r?1:r,a=n.type,o=n.padding,s=void 0===o?0:o,c=n.copy,u=void 0!==c&&c,l=a||e&&e.constructor||Float32Array,h=t*i+s;if(ArrayBuffer.isView(e)){if(h<=e.length)return e;if(h*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,h)}var f=this._allocate(l,h);return e&&u?f.set(e):f.fill(0,0,4),this._release(e),f}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,t){t=Math.max(Math.ceil(t*this.overAlloc),1);var n=this._pool,r=e.BYTES_PER_ELEMENT*t,i=n.findIndex((function(e){return e.byteLength>=r}));return i>=0?new e(n.splice(i,1)[0],0,t):new e(t)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var t=this._pool,n=e.buffer,r=n.byteLength,i=t.findIndex((function(e){return e.byteLength>=r}));i<0?t.push(n):(i>0||t.length<this.poolSize)&&t.splice(i,0,n),t.length>this.poolSize&&t.shift()}}}]),e}()),Wa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e);var n=t.attributes,r=void 0===n?{}:n;this.typedArrayManager=Va,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t),Object.seal(this)}return Object(oe.a)(e,[{key:"updateGeometry",value:function(e){var t=e.data,n=e.getGeometry,r=e.positionFormat,i=e.dataChanged;if(this.data=t,this.getGeometry=n,this.positionSize="XY"===r?2:3,Array.isArray(i)){var a=!0,o=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;this._rebuildGeometry(l)}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,n=e.endRow;this._rebuildGeometry({startRow:t,endRow:n})}},{key:"updateGeometryAttributes",value:function(e,t,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function(e,t,n){var r=this.data,i=this.getGeometry,a=za(r,t,n),o=a.iterable,s=a.objectInfo,c=!0,u=!1,l=void 0;try{for(var h,f=o[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;s.index++,e(i(d,s),s.index)}}catch(p){u=!0,l=p}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var n=this.indexLayout,r=this.bufferLayout;e||(n=[],r=[]);var i=e||{},a=i.startRow,o=void 0===a?0:a,s=i.endRow,c=void 0===s?1/0:s;this._forEachGeometry((function(e,n){r[n]=t.getGeometrySize(e)}),o,c);var u=0,l=!0,h=!1,f=void 0;try{for(var d,p=r[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){u+=d.value}}catch(x){h=!0,f=x}finally{try{l||null==p.return||p.return()}finally{if(h)throw f}}var v=this.attributes,g=this._attributeDefs,m=this.typedArrayManager,b=this.fp64;for(var y in g){var w=g[y];w.copy=Boolean(e),w.fp64Only&&!b||(v[y]=m.allocate(v[y],u,w))}this.indexLayout=n,this.bufferLayout=r,this.instanceCount=u;for(var O={vertexStart:0,indexStart:0},_=0;_<o;_++)O.vertexStart+=r[_],O.indexStart+=n[_]||0;this._forEachGeometry((function(e,i){var a=r[i];O.geometryIndex=i,O.geometrySize=a,t.updateGeometryAttributes(e,O),O.vertexStart+=a,O.indexStart+=n[i]||0}),o,c);for(var j=O.indexStart,k=c;k<n.length;k++)j+=n[k];this.vertexCount=j}}}]),e}();function Ga(e){if(null===(t=e)||"object"!==Object(Xr.a)(t))throw new Error("count(): argument not an object");var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===Object(Xr.a)(e)&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function Ha(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function Xa(e){var t,n={};return function(r){for(var i in r)if(!Ha(r[i],n[i])){t=e(r),n=r;break}return t}}var qa={Tesselator:Wa,flattenVertices:function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.result,i=void 0===r?[]:r,a=n.dimensions,o=void 0===a?3:a,s=-1,c=0;++s<t.length;){var u=t[s];Array.isArray(u)||ArrayBuffer.isView(u)?e(u,{result:i,dimensions:o}):c<o&&(i.push(u),c++)}return c>0&&c<o&&i.push(0),i},fillArray:Na,count:Ga,memoize:Xa};function Ya(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}var Za=1,Ka=1,$a=function(){function e(){Object(ae.a)(this,e),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(oe.a)(e,[{key:"addChannel",value:function(e){var t=e.delay,n=void 0===t?0:t,r=e.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.rate,o=void 0===a?1:a,s=e.repeat,c=Za++,u={time:0,delay:n,duration:i,rate:o,repeat:void 0===s?1:s};return this._setChannelTime(u,this.time),this.channels.set(c,u),c}},{key:"removeChannel",value:function(e){this.channels.delete(e);var t=!0,n=!1,r=void 0;try{for(var i,a=this.animations[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=Object(we.a)(i.value,2),s=o[0];o[1].channel===e&&this.detachAnimation(s)}}catch(c){n=!0,r=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isFinished",value:function(e){var t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}},{key:"getTime",value:function(e){if(void 0===e)return this.time;var t=this.channels.get(e);return void 0===t?-1:t.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var t=this.channels.values(),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this._setChannelTime(s,this.time)}}catch(m){r=!0,i=m}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var c=this.animations.values(),u=!0,l=!1,h=void 0;try{for(var f,d=c[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value,v=p.animation,g=p.channel;v.setTime(this.getTime(g))}}catch(m){l=!0,h=m}finally{try{u||null==d.return||d.return()}finally{if(l)throw h}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,t){var n=Ka++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,t){var n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}]),e}(),Qa=n("kLp3"),Ja=n.n(Qa),eo=1,to=5,no=2,ro=2,io=3,ao=0,oo={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function so(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(Bt.a)(e)););return e}function co(){return(co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=so(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}var uo=n("IIwk"),lo=n("iTDY"),ho=n("5ku3"),fo="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",po=Object(ho.a)();function vo(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(Gy){return null}}var go=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(ae.a)(this,e),this.storage=vo(r),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(oe.a)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function mo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var a=e.width*n,o=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var bo={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function yo(e){return"string"==typeof e?bo[e.toUpperCase()]||bo.WHITE:e}function wo(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oo(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(r),a=wo(i);try{var o=function(){var r=t.value;"function"==typeof e[r]&&(n.find((function(e){return r===e}))||(e[r]=e[r].bind(e)))};for(a.s();!(t=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}function jo(e,t){if(!e)throw new Error(t||"Assertion failed")}var ko=n("K9nA");function xo(){var e;if(po&&ko.b.performance)e=ko.b.performance.now();else if(ko.a.hrtime){var t=ko.a.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var Eo={debug:po&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Po={enabled:!0,level:0};function So(){}var To={},Co={once:!0};function Mo(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}var Ao=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id;Object(ae.a)(this,e),this.id=n,this.VERSION=fo,this._startTs=xo(),this._deltaTs=xo(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new go("__probe-".concat(this.id,"__"),Po),this.userData={},this.timeStamp("".concat(this.id," started")),_o(this),Object.seal(this)}return Object(oe.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((xo()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((xo()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){jo(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,Eo.warn,arguments,Co)}},{key:"error",value:function(e){return this._getLogFunction(0,e,Eo.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,Eo.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,Eo.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,Eo.debug||Eo.info,arguments,Co)}},{key:"table",value:function(e,t,n){return t?this._getLogFunction(e,t,console.table||So,n&&[n],{tag:Mo(t)}):So}},{key:"image",value:function(e){var t=e.logLevel,r=e.priority,i=e.image,a=e.message,o=void 0===a?"":a,c=e.scale,u=void 0===c?1:c;return this._shouldLog(t||r)?po?function(e){var t=e.image,n=e.message,r=void 0===n?"":n,i=e.scale,a=void 0===i?1:i;if("string"==typeof t){var o=new Image;return o.onload=function(){var e,t=mo(o,r,a);(e=console).log.apply(e,Object(s.a)(t))},o.src=t,So}var c=t.nodeName||"";if("img"===c.toLowerCase()){var u;return(u=console).log.apply(u,Object(s.a)(mo(t,r,a))),So}if("canvas"===c.toLowerCase()){var l=new Image;return l.onload=function(){var e;return(e=console).log.apply(e,Object(s.a)(mo(l,r,a)))},l.src=t.toDataURL(),So}return So}({image:i,message:o,scale:u}):function(e){var t=e.image,r=(e.message,e.scale),i=void 0===r?1:r,a=null;try{a=n(2)}catch(o){}if(a)return function(){return a(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(e){return console.log(e)}))};return So}({image:i,message:o,scale:u}):So}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Object(W.a)({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||So)}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=Ro({logLevel:e,message:t,opts:n}),i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||So)}},{key:"withGroup",value:function(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=Lo(e)}},{key:"_getLogFunction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var a;i=Ro({logLevel:e,message:t,args:r,opts:i}),jo(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=xo();var o=i.tag||i.message;if(i.once){if(To[o])return So;To[o]=xo()}return t=Io(this.id,i.message,i),(a=n).bind.apply(a,[console,t].concat(Object(s.a)(i.args)))}return So}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function Lo(e){if(!e)return 0;var t;switch(Object(Xr.a)(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return jo(Number.isFinite(t)&&t>=0),t}function Ro(e){var t=e.logLevel,n=e.message;e.logLevel=Lo(t);for(var r=e.args?Array.from(e.args):[];r.length&&r.shift()!==n;);switch(e.args=r,Object(Xr.a)(t)){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());var i=Object(Xr.a)(e.message);return jo("string"===i||"object"===i),Object.assign(e,e.opts)}function Io(e,t,n){if("string"==typeof t){var r=n.time?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=n.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),i=t,a=n.color,o=n.background,po||"string"!=typeof i||(a&&(a=yo(a),i="[".concat(a,"m").concat(i,"[39m")),o&&(a=yo(o),i="[".concat(o+10,"m").concat(i,"[49m"))),t=i}var i,a,o,s;return t}Ao.VERSION=fo;var Do=new Ao({id:"luma"}).enable(),No=n("GawU"),Fo=function(){function e(t,n){Object(ae.a)(this,e),this.name=t,this.type=n,this.sampleSize=1,this.reset()}return Object(oe.a)(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(No.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(No.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),Bo=function(){function e(t){var n=t.id,r=t.stats;Object(ae.a)(this,e),this.id=n,this.stats={},this._initializeStats(r),Object.seal(this)}return Object(oe.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,n=e.type;return this.stats[t]||(this.stats[t]=e instanceof Fo?e:new Fo(t,n)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}(),zo=(n("eUbh"),new(function(){function e(){Object(ae.a)(this,e),this.stats=new Map}return Object(oe.a)(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new Bo({id:e})),this.stats.get(e)}}]),e}()));if(lo.a.luma&&"7.3.1"!==lo.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(lo.a.luma.VERSION," vs ").concat("7.3.1"));lo.a.luma||(uo.a&&Do.log(1,"luma.gl ".concat("7.3.1"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),lo.a.luma=lo.a.luma||{VERSION:"7.3.1",version:"7.3.1",log:Do,stats:zo,globals:{modules:{},nodeIO:{}}});lo.a.luma;function Uo(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function Vo(e){return Boolean(e&&Number.isFinite(e._version))}function Wo(e){return Boolean(e&&2===e._version)}function Go(e){Uo(Vo(e),"Invalid WebGLRenderingContext")}function Ho(e){Uo(Wo(e),"Requires WebGL2")}function Xo(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var r=e[t=t.replace(/^.*\./,"")];return Uo(void 0!==r,"Accessing undefined constant GL.".concat(t)),r}function qo(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}var Yo={};function Zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";Yo[e]=Yo[e]||1;var t=Yo[e]++;return"".concat(e,"-").concat(t)}function Ko(e){return Uo("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function $o(e){var t=!0;for(var n in e){t=!1;break}return t}function Qo(e,t,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),a=Object.getPrototypeOf(e);r.forEach((function(e){a.methodName||(a[e]=function(){throw Do.removed("Calling removed method ".concat(t,".").concat(e,": "),i)(),new Error(e)})}))}var Jo="Resource subclass must define virtual methods",es=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),Go(t);var r=n.id,i=n.userData,a=void 0===i?{}:i;this.gl=t,this.id=r||Zo(this.constructor.name),this.userData=a,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(oe.a)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(e){e.delete()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Uo(e=Xo(this.gl,e));var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Wo(this.gl),a=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!a){var o=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1,c=i?s:o;return c}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},a=Wo(this.gl),o={},s=n||Object.keys(i),c=!0,u=!1,l=void 0;try{for(var h,f=s[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value,p=i[d],v=p&&(!("webgl2"in p)||a)&&(!("extension"in p)||this.gl.getExtension(p.extension));if(v){var g=r?qo(this.gl,d):d;o[g]=this.getParameter(d,e),r&&"GLenum"===p.type&&(o[g]=qo(this.gl,o[g]))}}}catch(m){u=!0,l=m}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}return o}},{key:"setParameter",value:function(e,t){Uo(e=Xo(this.gl,e));var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Wo(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Xo(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return Qo(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(Jo)}},{key:"_deleteHandle",value:function(){throw new Error(Jo)}},{key:"_bindHandle",value:function(){throw new Error(Jo)}},{key:"_getOptsFromHandle",value:function(){throw new Error(Jo)}},{key:"_getParameter",value:function(e,t){throw new Error(Jo)}},{key:"_setParameter",value:function(e,t){throw new Error(Jo)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=zo.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;zo.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=zo.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=zo.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}(),ts=n("RHh3");function ns(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function rs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function is(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,a=void 0===i?4:i,o=e.temp,s=n*a;o=o||new Uint8Array(s);for(var c=0;c<r/2;++c){var u=c*s,l=(r-c-1)*s;o.set(t.subarray(u,u+s)),t.copyWithin(u,l,l+s),t.set(o,l)}}function as(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),a=Math.round(r/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var c=0;c<i;c++)for(var u=0;u<4;u++)o[4*(s*i+c)+u]=t[4*(2*s*n+2*c)+u];return{data:o,width:i,height:a}}function os(e,t,n){var r=n.removedProps,i=void 0===r?{}:r,a=n.deprecatedProps,o=void 0===a?{}:a,s=n.replacedProps,c=void 0===s?{}:s;for(var u in i)if(u in t){var l=i[u]?"".concat(e,".").concat(i[u]):"N/A";Do.removed("".concat(e,".").concat(u),l)()}for(var h in o)if(h in t){var f=o[h];Do.deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(f))()}var d=null;for(var p in c)if(p in t){var v=c[p];Do.deprecated("".concat(e,".").concat(p),"".concat(e,".").concat(v))(),(d=d||Object.assign({},t))[v]=t[p],delete d[p]}return d||t}var ss={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},cs={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},us=function(){function e(){var t=this;Object(ae.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Object(oe.a)(e,null,[{key:"getBytesPerElement",value:function(e){return rs(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return Uo(e.size),rs(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Object(ts.a)(e,[ss].concat(n))}}]),Object(oe.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=os("Accessor",e,cs)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}(),ls={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},hs={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:ls},fs={removedProps:ls},ds=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=r.target||(n.gl.webgl2?36662:34962),n.initialize(r),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/us.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/us.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=os("Buffer",e,hs),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=os("Buffer",e,fs))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new us(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,a=t.srcOffset,o=void 0===a?0:a,s=e.byteLength||e.length;Uo(n);var c=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(c,this.handle),0!==o||void 0!==s?(Ho(this.gl),this.gl.bufferSubData(this.target,i,n,o,s)):this.gl.bufferSubData(c,i,n),this.gl.bindBuffer(c,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,a=void 0===i?0:i,o=e.size,s=this.gl;return Ho(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,a=e.dstOffset,o=void 0===a?0:a,s=e.length,c=void 0===s?0:s;Ho(this.gl);var u,l,h=rs(this.accessor.type||5126,{clamped:!1}),f=this._getAvailableElementCount(i),d=o;n?u=(l=n.length)-d:l=d+(u=Math.min(f,c||f));var p=Math.min(f,u);return Uo((c=c||p)<=p),n=n||new h(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,o,c),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,o,s):(Uo(0===o),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=35345===n||35982===n;return a?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Uo(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,10),this.bytesUsed=e.byteLength,this._trackAllocatedMemory(e.byteLength);var r=ns(e);return Uo(r),this.setAccessor(new us(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Uo(e>=0),this._trackDeallocatedMemory();var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/rs(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new us(this.accessor,{type:ns(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return Do.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return Do.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new us(this.accessor,e),this}},{key:"type",get:function(){return Do.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return Do.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),t}(es),ps=[],vs=[[0,1/0]];function gs(e,t){if(e===vs)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;for(var n=[],r=e.length,i=0,a=0;a<r;a++){var o=e[a];o[1]<t[0]?(n.push(o),i=a+1):o[0]>t[1]?n.push(o):t=[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}return n.splice(i,0,t),n}var ms,bs,ys,ws=new Ao({id:"deck"}).enable(),Os=(ms={},Object(W.a)(ms,6407,{dataFormat:6407,types:[5121,33635]}),Object(W.a)(ms,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(W.a)(ms,6406,{dataFormat:6406,types:[5121]}),Object(W.a)(ms,6409,{dataFormat:6409,types:[5121]}),Object(W.a)(ms,6410,{dataFormat:6410,types:[5121]}),Object(W.a)(ms,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(W.a)(ms,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(W.a)(ms,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(W.a)(ms,34836,{dataFormat:6408,types:[5126],gl2:!0}),ms),_s=(bs={},Object(W.a)(bs,6403,1),Object(W.a)(bs,36244,1),Object(W.a)(bs,33319,2),Object(W.a)(bs,33320,2),Object(W.a)(bs,6407,3),Object(W.a)(bs,36248,3),Object(W.a)(bs,6408,4),Object(W.a)(bs,36249,4),Object(W.a)(bs,6402,1),Object(W.a)(bs,34041,1),Object(W.a)(bs,6406,1),Object(W.a)(bs,6409,1),Object(W.a)(bs,6410,2),bs),js=(ys={},Object(W.a)(ys,5126,4),Object(W.a)(ys,5125,4),Object(W.a)(ys,5124,4),Object(W.a)(ys,5123,2),Object(W.a)(ys,5122,2),Object(W.a)(ys,5131,2),Object(W.a)(ys,5120,1),Object(W.a)(ys,5121,1),ys);function ks(e,t){var n=Os[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Wo(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}function xs(e,t){var n=Os[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var Es=n("U//q"),Ps=n("t+rZ");function Ss(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var Ts={framebuffer:function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:function(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,Object(s.a)(t))},blendEquation:function(e,t){t=Ss(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(s.a)(t))},blendFunc:function(e,t){t=Ss(t)&&2===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,e.blendFuncSeparate.apply(e,Object(s.a)(t))},clearColor:function(e,t){return e.clearColor.apply(e,Object(s.a)(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,Object(s.a)(t))},cull:function(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,Object(s.a)(t))},dither:function(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function(e,t){e.hint(35723,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(33170,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,Object(s.a)(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,Object(s.a)(t))},scissorTest:function(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,Object(s.a)(t))},stencilTest:function(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function(e,t){var n=t=Ss(t)?t:[t,t],r=Object(we.a)(n,2),i=r[0],a=r[1];e.stencilMaskSeparate(1028,i),e.stencilMaskSeparate(1029,a)},stencilFunc:function(e,t){var n=t=Ss(t)&&3===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,r=Object(we.a)(n,6),i=r[0],a=r[1],o=r[2],c=r[3],u=r[4],l=r[5];e.stencilFuncSeparate(1028,i,a,o),e.stencilFuncSeparate(1029,c,u,l)},stencilOp:function(e,t){var n=t=Ss(t)&&3===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,r=Object(we.a)(n,6),i=r[0],a=r[1],o=r[2],c=r[3],u=r[4],l=r[5];e.stencilOpSeparate(1028,i,a,o),e.stencilOpSeparate(1029,c,u,l)},viewport:function(e,t){return e.viewport.apply(e,Object(s.a)(t))}};function Cs(e,t){for(var n in Object(Ps.c)(e,t),t){var r=Ts[n];r&&r(e,t[n],n)}}var Ms=n("y7xQ"),As=n("c+tY");function Ls(e,t,n){if(Object(Ms.a)(t))return n(e);var r,i=t.nocatch,a=void 0===i||i;if(Object(As.a)(!t.frameBuffer),Object(Es.c)(e),Cs(e,t),a)r=n(e),Object(Es.b)(e);else try{r=n(e)}finally{Object(Es.b)(e)}return r}var Rs=n("FWU8"),Is=[9729,9728],Ds=function(e){function t(e,n){var r;Object(ae.a)(this,t);var i=n.id,a=void 0===i?Zo("texture"):i,o=n.handle,s=n.target;return(r=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,{id:a,handle:o}))).target=s,r.textureUnit=void 0,r.loaded=!1,r.width=void 0,r.height=void 0,r.depth=void 0,r.format=void 0,r.type=void 0,r.dataFormat=void 0,r.border=void 0,r.textureUnit=void 0,r.mipmaps=void 0,r}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&ks(e,n))&&(!r||xs(e,n))),i}}]),Object(oe.a)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n instanceof Promise)return n.then((function(n){return e.initialize(Object.assign({},t,{pixels:n,data:n}))})),this;var r=t.pixels,i=void 0===r?null:r,a=t.format,o=void 0===a?6408:a,s=t.border,c=void 0===s?0:s,u=t.recreate,l=void 0!==u&&u,h=t.parameters,f=void 0===h?{}:h,d=t.pixelStore,p=void 0===d?{}:d,v=t.textureUnit,g=void 0===v?void 0:v,m=t.unpackFlipY,b=void 0===m||m,y=t.mipmaps,w=void 0===y||y;n||(n=i);var O=t.width,_=t.height,j=t.dataFormat,k=t.type,x=t.depth,E=void 0===x?0:x,P=this._deduceParameters({format:o,type:k,dataFormat:j,compressed:!1,data:n,width:O,height:_});O=P.width,_=P.height,j=P.dataFormat,k=P.type,this.width=O,this.height=_,this.depth=E,this.format=o,this.type=k,this.dataFormat=j,this.border=c,this.textureUnit=g,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var S=Object(W.a)({},37440,b),T=Object.assign({},S,p);return w&&this._isNPOT()&&(Do.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(f)),this.mipmaps=w,this.setImageData({data:n,width:O,height:_,depth:E,format:o,type:k,dataFormat:j,border:c,mipmaps:w,parameters:T}),w&&this.generateMipmap(),this.setParameters(f),l&&(this.data=n),this}},{key:"resize",value:function(e){var t=e.height,n=e.width,r=e.mipmaps,i=void 0!==r&&r;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Do.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ls(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,a=e.level,o=void 0===a?0:a,s=e.format,c=void 0===s?this.format:s,u=e.border,l=void 0===u?this.border:u,h=e.offset,f=void 0===h?0:h,d=e.parameters,p=void 0===d?{}:d,v=e.data,g=void 0===v?null:v,m=e.type,b=void 0===m?this.type:m,y=e.width,w=void 0===y?this.width:y,O=e.height,_=void 0===O?this.height:O,j=e.dataFormat,k=void 0===j?this.dataFormat:j,x=e.compressed,E=void 0!==x&&x;g||(g=i);var P=this._deduceParameters({format:c,type:b,dataFormat:k,compressed:E,data:g,width:w,height:_});b=P.type,k=P.dataFormat,E=P.compressed,w=P.width,_=P.height;var S=this.gl;S.bindTexture(this.target,this.handle);var T,C=this._getDataType({data:g,compressed:E});if(g=C.data,T=C.dataType,Ls(this.gl,p,(function(){switch(T){case"null":S.texImage2D(n,o,c,w,_,l,k,b,g);break;case"typed-array":S.texImage2D(n,o,c,w,_,l,k,b,g,f);break;case"buffer":Ho(S),S.bindBuffer(35052,g.handle||g),S.texImage2D(n,o,c,w,_,l,k,b,f),S.bindBuffer(35052,null);break;case"browser-object":Wo(S)?S.texImage2D(n,o,c,w,_,l,k,b,g):S.texImage2D(n,o,c,k,b,g);break;case"compressed":S.compressedTexImage2D(n,o,c,w,_,l,g);break;default:Uo(!1,"Unknown image data type")}})),g&&g.byteLength)this._trackAllocatedMemory(g.byteLength,"Texture");else{var M=_s[this.dataFormat]||4,A=js[this.type]||1;this._trackAllocatedMemory(this.width*this.height*M*A,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,a=void 0===i?null:i,o=e.data,s=void 0===o?null:o,c=e.x,u=void 0===c?0:c,l=e.y,h=void 0===l?0:l,f=e.width,d=void 0===f?this.width:f,p=e.height,v=void 0===p?this.height:p,g=e.level,m=void 0===g?0:g,b=e.format,y=void 0===b?this.format:b,w=e.type,O=void 0===w?this.type:w,_=e.dataFormat,j=void 0===_?this.dataFormat:_,k=e.compressed,x=void 0!==k&&k,E=e.offset,P=void 0===E?0:E,S=e.border,T=(void 0===S&&this.border,e.parameters),C=void 0===T?{}:T,M=this._deduceParameters({format:y,type:O,dataFormat:j,compressed:x,data:s,width:d,height:v});if(O=M.type,j=M.dataFormat,x=M.compressed,d=M.width,v=M.height,Uo(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=a),s&&s.data){var A=s;s=A.data,d=A.shape[0],v=A.shape[1]}s instanceof ds&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Ls(this.gl,C,(function(){x?t.gl.compressedTexSubImage2D(r,m,u,h,d,v,y,s):null===s?t.gl.texSubImage2D(r,m,u,h,d,v,j,O,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,m,u,h,d,v,j,O,s,P):s instanceof Rs.b?(Ho(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(r,m,u,h,d,v,j,O,P),t.gl.bindBuffer(35052,null)):Wo(t.gl)?t.gl.texSubImage2D(r,m,u,h,d,v,j,O,s):t.gl.texSubImage2D(r,m,u,h,j,O,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return Do.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof ds?{data:t.handle,dataType:"buffer"}:t instanceof Rs.b?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,a=e.dataFormat,o=e.type,s=e.compressed,c=Os[t];a=a||c&&c.dataFormat,o=o||c&&c.types[0],s=s||c&&c.compressed;var u=this._deduceImageSize(n,r,i);return{dataFormat:a,type:o,compressed:s,width:r=u.width,height:i=u.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var r;return Uo(r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},"Could not deduced texture size"),Uo(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Uo(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Uo(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Wo(this.gl)&&(!(!this.width||!this.height)&&(!Ko(this.width)||!Ko(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===Is.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}(es),Ns="";function Fs(e,t){return Uo("string"==typeof e),e=Ns+e,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(a){r(a)}}))}var Bs,zs=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),Go(e),(r instanceof Promise||"string"==typeof r)&&(r={data:r}),"string"==typeof r.data&&(r=Object.assign({},r,{data:Fs(r.data)})),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Object.assign({},r,{target:3553})))).initialize(r),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e,t){return Ds.isSupported(e,t)}}]),t}(Ds),Us="EXT_color_buffer_float",Vs=(Bs={},Object(W.a)(Bs,33189,{bpp:2}),Object(W.a)(Bs,33190,{gl2:!0,bpp:3}),Object(W.a)(Bs,36012,{gl2:!0,bpp:4}),Object(W.a)(Bs,36168,{bpp:1}),Object(W.a)(Bs,34041,{bpp:4}),Object(W.a)(Bs,35056,{gl2:!0,bpp:4}),Object(W.a)(Bs,36013,{gl2:!0,bpp:5}),Object(W.a)(Bs,32854,{bpp:2}),Object(W.a)(Bs,36194,{bpp:2}),Object(W.a)(Bs,32855,{bpp:2}),Object(W.a)(Bs,33321,{gl2:!0,bpp:1}),Object(W.a)(Bs,33330,{gl2:!0,bpp:1}),Object(W.a)(Bs,33329,{gl2:!0,bpp:1}),Object(W.a)(Bs,33332,{gl2:!0,bpp:2}),Object(W.a)(Bs,33331,{gl2:!0,bpp:2}),Object(W.a)(Bs,33334,{gl2:!0,bpp:4}),Object(W.a)(Bs,33333,{gl2:!0,bpp:4}),Object(W.a)(Bs,33323,{gl2:!0,bpp:2}),Object(W.a)(Bs,33336,{gl2:!0,bpp:2}),Object(W.a)(Bs,33335,{gl2:!0,bpp:2}),Object(W.a)(Bs,33338,{gl2:!0,bpp:4}),Object(W.a)(Bs,33337,{gl2:!0,bpp:4}),Object(W.a)(Bs,33340,{gl2:!0,bpp:8}),Object(W.a)(Bs,33339,{gl2:!0,bpp:8}),Object(W.a)(Bs,32849,{gl2:!0,bpp:3}),Object(W.a)(Bs,32856,{gl2:!0,bpp:4}),Object(W.a)(Bs,32857,{gl2:!0,bpp:4}),Object(W.a)(Bs,36220,{gl2:!0,bpp:4}),Object(W.a)(Bs,36238,{gl2:!0,bpp:4}),Object(W.a)(Bs,36975,{gl2:!0,bpp:4}),Object(W.a)(Bs,36214,{gl2:!0,bpp:8}),Object(W.a)(Bs,36232,{gl2:!0,bpp:8}),Object(W.a)(Bs,36226,{gl2:!0,bpp:16}),Object(W.a)(Bs,36208,{gl2:!0,bpp:16}),Object(W.a)(Bs,33325,{gl2:Us,bpp:2}),Object(W.a)(Bs,33327,{gl2:Us,bpp:4}),Object(W.a)(Bs,34842,{gl2:Us,bpp:8}),Object(W.a)(Bs,33326,{gl2:Us,bpp:4}),Object(W.a)(Bs,33328,{gl2:Us,bpp:8}),Object(W.a)(Bs,34836,{gl2:Us,bpp:16}),Object(W.a)(Bs,35898,{gl2:Us,bpp:4}),Bs);function Ws(e,t,n){var r=n[t];if(!r)return!1;var i=Wo(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}var Gs=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).initialize(r),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||Ws(e,n,Vs)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(oe.a)(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,a=void 0===i?1:i,o=e.samples,s=void 0===o?0:o;return Uo(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Wo(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,a):this.gl.renderbufferStorage(36161,t,r,a),this.format=t,this.width=r,this.height=a,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Vs[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(es);function Hs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,a=void 0===i?null:i,o=t.depth,s=void 0===o?null:o,c=t.stencil,u=void 0===c?null:c,l={};r&&(l.framebuffer=r);var h=0;a&&(h|=16384,!0!==a&&(l.clearColor=a)),s&&(h|=256,!0!==s&&(l.clearDepth=s)),u&&(h|=1024,!0!==s&&(l.clearStencil=s)),Uo(0!==h,"clear: bad arguments"),Ls(e,l,(function(){e.clear(h)}))}function Xs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,a=void 0===i?6144:i,o=t.drawBuffer,s=void 0===o?0:o,c=t.value,u=void 0===c?[0,0,0,0]:c;Ho(e),Ls(e,{framebuffer:r},(function(){switch(a){case 6144:switch(u.constructor){case Int32Array:e.clearBufferiv(a,s,u);break;case Uint32Array:e.clearBufferuiv(a,s,u);break;case Float32Array:default:e.clearBufferfv(a,s,u)}break;case 6145:e.clearBufferfv(6145,0,[u]);break;case 6146:e.clearBufferiv(6146,0,[u]);break;case 34041:var t=Object(we.a)(u,2),n=t[0],r=t[1];e.clearBufferfi(34041,0,n,r);break;default:Uo(!1,"clear: bad arguments")}}))}function qs(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Uo(!1),0}}var Ys=n("o0o1"),Zs=n.n(Ys);function Ks(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function $s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ks(a,r,i,o,s,"next",e)}function s(e){Ks(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Qs=[34069,34070,34071,34072,34073,34074],Js=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),Go(e),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Object.assign({},r,{target:34067})))).initialize(r),Object.seal(Object(et.a)(n)),n}var n;return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mipmaps,r=void 0===n||n,i=t.parameters,a=void 0===i?{}:i;this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(a)}))}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.mipmapLevel,c=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:o,mipmapLevel:c})}},{key:"setCubeMapImageData",value:(n=$s(Zs.a.mark((function e(t){var n,r,i,a,o,s,c,u,l,h,f,d,p,v=this;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,i=t.pixels,a=t.data,o=t.border,s=void 0===o?0:o,c=t.format,u=void 0===c?6408:c,l=t.type,h=void 0===l?5121:l,f=this.gl,d=i||a,e.next=5,Promise.all(Qs.map((function(e){var t=d[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:p=e.sent,this.bind(),Qs.forEach((function(e,t){p[t].length>1&&!1!==v.opts.mipmaps&&Do.warn("".concat(v.id," has mipmap and multiple LODs."))(),p[t].forEach((function(t,i){n&&r?f.texImage2D(e,i,u,n,r,s,u,h,t):f.texImage2D(e,i,u,u,h,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setImageDataForFace",value:function(e){var t=this,n=e.face,r=e.width,i=e.height,a=e.pixels,o=e.data,s=e.border,c=void 0===s?0:s,u=e.format,l=void 0===u?6408:u,h=e.type,f=void 0===h?5121:h,d=this.gl,p=a||o;return this.bind(),p instanceof Promise?p.then((function(r){return t.setImageDataForFace(Object.assign({},e,{face:n,data:r,pixels:r}))})):this.width||this.height?d.texImage2D(n,0,l,r,i,c,l,f,p):d.texImage2D(n,0,l,l,f,p),this}}]),t}(Ds);Js.FACES=Qs;var ec=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),Ho(e),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).initialize(r),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e){return Wo(e)}}]),Object(oe.a)(t,[{key:"setImageData",value:function(e){var t=this,n=e.level,r=void 0===n?0:n,i=e.dataFormat,a=void 0===i?6408:i,o=e.width,s=e.height,c=e.depth,u=void 0===c?1:c,l=e.border,h=void 0===l?0:l,f=e.format,d=e.type,p=void 0===d?5121:d,v=e.offset,g=void 0===v?0:v,m=e.data,b=e.parameters,y=void 0===b?{}:b;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ls(this.gl,y,(function(){ArrayBuffer.isView(m)&&t.gl.texImage3D(t.target,r,a,o,s,u,h,f,p,m),m instanceof ds&&(t.gl.bindBuffer(35052,m.handle),t.gl.texImage3D(t.target,r,a,o,s,u,h,f,p,g))})),m&&m.byteLength)this._trackAllocatedMemory(m.byteLength,"Texture");else{var w=_s[this.dataFormat]||4,O=js[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*w*O,"Texture")}return this.loaded=!0,this}}]),t}(Ds);function tc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceX,r=void 0===n?0:n,i=t.sourceY,a=void 0===i?0:i,o=t.sourceFormat,s=void 0===o?6408:o,c=t.sourceAttachment,u=void 0===c?36064:c,l=t.target,h=void 0===l?null:l,f=t.sourceWidth,d=t.sourceHeight,p=t.sourceType,v=rc(e),g=v.framebuffer,m=v.deleteFramebuffer;Uo(g);var b=g.gl,y=g.handle,w=g.attachments;f=f||g.width,d=d||g.height,36064===u&&null===y&&(u=1028),Uo(w[u]),h=ic(h,p=p||w[u].type,s,f,d),p=p||ns(h);var O=b.bindFramebuffer(36160,y);return b.readPixels(r,a,f,d,s,p,h),b.bindFramebuffer(36160,O||null),m&&g.delete(),h}function nc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceAttachment,r=void 0===n?36064:n,i=t.targetMaxHeight,a=void 0===i?Number.MAX_SAFE_INTEGER:i,o=tc(e,{sourceAttachment:r}),s=e.width,c=e.height;c>a;){var u=as({data:o,width:s,height:c});o=u.data,s=u.width,c=u.height}is({data:o,width:s,height:c});var l=document.createElement("canvas");l.width=s,l.height=c;var h=l.getContext("2d"),f=h.createImageData(s,c);return f.data.set(o),h.putImageData(f,0,0),l.toDataURL()}function rc(e){return e instanceof ac?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(t=e,r=t.gl,i=t.width,a=t.height,o=t.id,new ac(r,Object.assign({},n,{id:"framebuffer-for-".concat(o),width:i,height:a,attachments:Object(W.a)({},36064,t)}))),deleteFramebuffer:!0};var t,n,r,i,a,o}function ic(e,t,n,r,i){return e||new(rs(t=t||5121,{clamped:!1}))(r*i*qs(n))}var ac=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.ownResources=[],n.initialize(r),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(oe.a)(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,a=e.attachments,o=void 0===a?null:a,s=e.color,c=void 0===s||s,u=e.depth,l=void 0===u||u,h=e.stencil,f=void 0!==h&&h,d=e.check,p=void 0===d||d,v=e.readBuffer,g=e.drawBuffers;if(Uo(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,o)for(var m in o){var b=o[m];(Array.isArray(b)?b[0]:b).resize({width:n,height:i})}else o=this._createDefaultAttachments(c,l,f,n,i);this.update({clearAttachments:!0,attachments:o,readBuffer:v,drawBuffers:g}),o&&p&&this.checkStatus()}},{key:"delete",value:function(){var e=!0,n=!1,r=void 0;try{for(var i,a=this.ownResources[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.delete()}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}co(Object(Bt.a)(t.prototype),"delete",this).call(this)}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,a=e.clearAttachments,o=void 0!==a&&a,s=e.resizeAttachments,c=void 0===s||s;this.attach(n,{clearAttachments:o,resizeAttachments:c});var u=this.gl,l=u.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),u.bindFramebuffer(36160,l||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return Uo(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&Do.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,a=n.resizeAttachments,o=void 0===a||a,s={};i&&Object.keys(this.attachments).forEach((function(e){s[e]=null})),Object.assign(s,e);var c=this.gl.bindFramebuffer(36160,this.handle);for(var u in s){Uo(void 0!==u,"Misspelled framebuffer binding point?");var l=Number(u),h=s[l],f=h;if(f)if(f instanceof Gs)this._attachRenderbuffer({attachment:l,renderbuffer:f});else if(Array.isArray(h)){var d=Object(we.a)(h,3),p=d[0],v=d[1],g=void 0===v?0:v,m=d[2],b=void 0===m?0:m;f=p,this._attachTexture({attachment:l,texture:p,layer:g,level:b})}else this._attachTexture({attachment:l,texture:f,layer:0,level:0});else this._unattach(l);o&&f&&f.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,c||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(function(e){return(ac.STATUS||{})[e]||"Framebuffer error ".concat(e)}(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&Hs(this.gl,{color:t,depth:n,stencil:r}),a.forEach((function(e,t){Xs({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){return Do.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return Do.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return Do.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return Do.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return Do.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return Do.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.width,c=e.height,u=this.gl;Ho(u);var l=u.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===s&&void 0===c?u.invalidateFramebuffer(36008,n):u.invalidateFramebuffer(36008,n,i,o,s,c),u.bindFramebuffer(36008,l),this}},{key:"getAttachmentParameter",value:function(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=qo(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},i=!0,a=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,l=t?qo(this.gl,u):u;r[l]=this.getAttachmentParameter(e,u,t)}}catch(h){a=!0,o=h}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return r}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0,i=t;r<i.length;r++){var a=i[r],o=Number(a),s=e?qo(this.gl,o):o;n[s]=this.getAttachmentParameters(o,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(nc(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>Do.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=nc(this,{maxHeight:100});return Do.image({priority:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,r,i){var a,o=null;e&&((o=o||{})[36064]=new zs(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(a={},Object(W.a)(a,10241,9729),Object(W.a)(a,10240,9729),Object(W.a)(a,10242,33071),Object(W.a)(a,10243,33071),a)}),this.ownResources.push(o[36064]));return t&&n?((o=o||{})[33306]=new Gs(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?((o=o||{})[36096]=new Gs(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&Uo(!1),o}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof Gs?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,a,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,n,s,r.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,a);break;default:Uo(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e){var t=this.gl;Wo(t)?t.readBuffer(e):Uo(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if(Wo(t))t.drawBuffers(e);else{var n=t.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(e):Uo(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=Wo(e),Cc)e.luma.caps[t]=Lc(e,t);return e.luma.caps}(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(es);var oc;ac.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var sc="WEBGL2",cc="VERTEX_ARRAY_OBJECT",uc="TIMER_QUERY",lc="INSTANCED_RENDERING",hc="MULTIPLE_RENDER_TARGETS",fc="ELEMENT_INDEX_UINT32",dc="BLEND_EQUATION_MINMAX",pc="FLOAT_BLEND",vc="COLOR_ENCODING_SRGB",gc="TEXTURE_DEPTH",mc="TEXTURE_FLOAT",bc="TEXTURE_HALF_FLOAT",yc="TEXTURE_FILTER_LINEAR_FLOAT",wc="TEXTURE_FILTER_LINEAR_HALF_FLOAT",Oc="TEXTURE_FILTER_ANISOTROPIC",_c="COLOR_ATTACHMENT_RGBA32F",jc="COLOR_ATTACHMENT_FLOAT",kc="COLOR_ATTACHMENT_HALF_FLOAT",xc="GLSL_FRAG_DATA",Ec="GLSL_FRAG_DEPTH",Pc="GLSL_DERIVATIVES",Sc="GLSL_TEXTURE_LOD",Tc=null;var Cc=(oc={},Object(W.a)(oc,sc,[!1,!0]),Object(W.a)(oc,cc,["OES_vertex_array_object",!0]),Object(W.a)(oc,uc,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(W.a)(oc,lc,["ANGLE_instanced_arrays",!0]),Object(W.a)(oc,hc,["WEBGL_draw_buffers",!0]),Object(W.a)(oc,fc,["OES_element_index_uint",!0]),Object(W.a)(oc,dc,["EXT_blend_minmax",!0]),Object(W.a)(oc,pc,["EXT_float_blend"]),Object(W.a)(oc,vc,["EXT_sRGB",!0]),Object(W.a)(oc,gc,["WEBGL_depth_texture",!0]),Object(W.a)(oc,mc,["OES_texture_float",!0]),Object(W.a)(oc,bc,["OES_texture_half_float",!0]),Object(W.a)(oc,yc,["OES_texture_float_linear"]),Object(W.a)(oc,wc,["OES_texture_half_float_linear"]),Object(W.a)(oc,Oc,["EXT_texture_filter_anisotropic"]),Object(W.a)(oc,_c,[function(e){if(null!==Tc)return Tc;var t=new zs(e,{format:6408,type:5126,dataFormat:6408}),n=new ac(e,{id:"test-framebuffer",check:!1,attachments:Object(W.a)({},36064,t)}),r=n.getStatus();return t.delete(),n.delete(),Tc=36053===r},"EXT_color_buffer_float"]),Object(W.a)(oc,jc,[!1,"EXT_color_buffer_float"]),Object(W.a)(oc,kc,["EXT_color_buffer_half_float"]),Object(W.a)(oc,xc,["WEBGL_draw_buffers",!0]),Object(W.a)(oc,Ec,["EXT_frag_depth",!0]),Object(W.a)(oc,Pc,["OES_standard_derivatives",!0]),Object(W.a)(oc,Sc,["EXT_shader_texture_lod",!0]),oc);function Mc(e,t){return Ac(e,t)}function Ac(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return Lc(e,t)}))}function Lc(e,t){var n=Cc[t];Uo(n,t);var r,i=Wo(e)&&n[1]||n[0];if("function"==typeof i)r=i(e);else if(Array.isArray(i)){r=!0;var a=!0,o=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;r=r&&Boolean(e.getExtension(l))}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}}else"string"==typeof i?r=Boolean(e.getExtension(i)):"boolean"==typeof i?r=i:Uo(!1);return r||Do.log(2,"Feature: ".concat(t," not supported"))(),r}var Rc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e);var r=n.id,i=void 0===r?Zo("attribute"):r,a=n.type,o=n.isIndexed,s=void 0!==o&&o;this.gl=t,this.id=i,this.isIndexed=s,this.target=s?34963:34962,this.type=a,s&&!a&&(this.type=t&&Mc(t,fc)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),this._validateAttributeDefinition()}return Object(oe.a)(e,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,n=e.buffer,r=e.constant,i=void 0===r?this.constant||!1:r;if(this.constant=i,n)this.externalBuffer=n,this.constant=!1,this.value=t||null,this.type=e.type||n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor),void 0!==e.divisor&&(this.divisor=e.divisor);else if(t){this.externalBuffer=null;var a=this.size||e.size||0;if(i&&t.length!==a){this.value=new Float32Array(a),this._setAccessor(e);for(var o=this.elementOffset,s=0;s<this.size;++s)this.value[s]=t[o+s]}else this.value=t;!i&&this.gl&&(this.buffer=this.buffer||this._createBuffer(e),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)}this._setAccessor(e),i&&this.normalized&&(this.value=this._normalizeConstant(this.value))}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_createBuffer",value:function(e){var t=Object.assign({},e,{id:this.id,target:this.target,accessor:{type:this.type}});return Number.isFinite(t.divisor)&&(t.accessor.divisor=t.divisor),delete t.divisor,Number.isFinite(t.size)&&(t.accessor.size=t.size),delete t.size,new ds(this.gl,t)}},{key:"_setAccessor",value:function(e){var t=e.size,n=void 0===t?this.size:t,r=e.offset,i=void 0===r?this.offset||0:r,a=e.stride,o=void 0===a?this.stride||0:a,s=e.normalized,c=void 0===s?this.normalized||!1:s,u=e.integer,l=void 0===u?this.integer||!1:u,h=e.divisor,f=void 0===h?this.divisor||0:h,d=e.instanced,p=e.isInstanced;this.size=n,this.offset=i,this.elementOffset=i/us.getBytesPerElement(this),this.stride=o,this.normalized=c,this.integer=l,this.divisor=f,void 0!==p&&(Do.deprecated("Attribute.isInstanced")(),this.divisor=p?1:0),void 0!==d&&(Do.deprecated("Attribute.instanced")(),this.divisor=d?1:0)}},{key:"_normalizeConstant",value:function(e){switch(this.type){case 5120:return new Float32Array(e).map((function(e){return(e+128)/255*2-1}));case 5122:return new Float32Array(e).map((function(e){return(e+32768)/65535*2-1}));case 5121:return new Float32Array(e).map((function(e){return e/255}));case 5123:return new Float32Array(e).map((function(e){return e/65535}));default:return e}}},{key:"_validateAttributeDefinition",value:function(){}}]),e}(),Ic=n("VvNH");var Dc,Nc=new Ic.b,Fc=new Ic.b,Bc=new Ic.b,zc=new Ic.b,Uc=new Ic.b,Vc=new Ic.b,Wc=new Ic.b;function Gc(e,t){var n=t.size,r=void 0===n?1:n,i=t.startIndex,a=void 0===i?0:i,o=t.endIndex;Number.isFinite(o)||(o=e.length);var s=(o-a)/r;Dc=Va.allocate(Dc,s,{type:Float32Array,size:2*r});for(var c,u=a,l=0;u<o;){for(var h=0;h<r;h++){var f=e[u++];Dc[l+h]=f,Dc[l+h+r]=(c=f)-Math.fround(c)}l+=2*r}return Dc.subarray(0,s*r*2)}function Hc(e){var t=e.source,n=e.target,r=e.start,i=void 0===r?0:r,a=e.end,o=e.getData;a=a||n.length;var s=t.length,c=a-i;if(s>c)n.set(t.subarray(0,c),i);else if(n.set(t,i),o)for(var u=s;u<c;)for(var l=o(u,t),h=0;h<l.length;h++)n[i+u]=l[h],u++}var Xc={interpolation:{duration:0,easing:function(e){return e}},spring:{stiffness:.05,damping:.5}};function qc(e,t){return e?(Number.isFinite(e)&&(e={duration:e}),e.type=e.type||"interpolation",Object.assign({},Xc[e.type],t,e)):null}function Yc(e,t){var n=t.size,r=t.value,i=t.normalized,a=t.constant;if(a)return new Rc(e,{constant:a,value:r,size:n});var o=t.getBuffer();return new Rc(e,{divisor:0,constant:a,buffer:o,size:n,normalized:i})}function Zc(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function Kc(e){e.push(e.shift())}function $c(e,t){var n=e.doublePrecision,r=e.userData,i=e.value,a=e.size,o=n?2:1;return(r.noAlloc?i.length:t*a)*o}function Qc(e){var t=e.buffer,n=e.numInstances,r=e.attribute,i=e.fromLength,a=e.fromBufferLayout,o=e.getData,s=void 0===o?function(e){return e}:o,c=r.doublePrecision?2:1,u=r.size*c,l=r.elementOffset*c,h=r.bufferLayout,f=a&&h,d=$c(r,n);if(f||!(i>=d)){var p=r.constant?r.getValue():r.getBuffer().getData({});if(r.normalized){var v=s;s=function(e,t){return r._normalizeConstant(v(e,t))}}var g=r.constant?function(e,t){return s(p,t)}:function(e,t){return s(p.subarray(e,e+u),t)},m=t.getData({length:i}),b=new Float32Array(d);!function(e){var t=e.source,n=e.target,r=e.size,i=e.offset,a=void 0===i?0:i,o=e.getData,s=e.sourceLayout,c=e.targetLayout;if(!Array.isArray(c))return Hc({source:t,target:n,getData:o}),n;for(var u=a,l=a,h=o&&function(e,t){return o(e+l,t)},f=Math.min(s.length,c.length),d=0;d<f;d++){var p=s[d]*r,v=c[d]*r;Hc({source:t.subarray(u,u+p),target:n,start:l,end:l+v,getData:h}),u+=p,l+=v}l<n.length&&Hc({source:[],target:n,start:l,getData:h})}({source:m,target:b,sourceLayout:a,targetLayout:h,offset:l,size:u,getData:g}),t.setData({data:b})}}function Jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jc(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tu={isExternalBuffer:!1,lastExternalBuffer:null,allocatedValue:null,needsUpdate:!0,needsRedraw:!1,updateRanges:vs};function nu(e,t){var n={};for(var r in t){var i=t[r],a="offset"in i?i.offset:e.offset,o="stride"in i?i.stride:4*e.size;n["".concat(r,"32")]=Object.assign({},i,{offset:a,stride:o}),n["".concat(r,"64")]=Object.assign({},i,{offset:2*a,stride:2*o}),n["".concat(r,"64xyLow")]=Object.assign({},i,{offset:2*a+o,stride:2*o})}return n}var ru=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,t);var i=r.type,a=5130===i;n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,a?eu({},r,{type:5126}):r));var o=r.transition,s=void 0!==o&&o,c=r.noAlloc,u=void 0!==c&&c,l=r.update,h=void 0===l?null:l,f=r.accessor,d=void 0===f?null:f,p=r.transform,v=void 0===p?null:p,g=r.bufferLayout,m=void 0===g?null:g,b=r.defaultValue,y=void 0===b?[0,0,0,0]:b;y=Array.isArray(y)?y:[y],n.defaultType=i||n.type||5126,n.shaderAttributes={},n.hasShaderAttributes=!1,n.doublePrecision=a,a&&!1===r.fp64&&(n.defaultType=5126);var w=r.shaderAttributes||a&&Object(W.a)({},n.id,{});if(w){var O=Object.keys(w);for(var _ in w=a?nu(Object(et.a)(n),w):w){var j=w[_];n.shaderAttributes[_]=new Rc(n.gl,Object.assign({size:n.size,normalized:n.normalized,integer:n.integer,offset:n.offset,stride:n.stride,divisor:n.divisor},j,{id:_,buffer:n.getBuffer()})),n.hasShaderAttributes=O}}return Object.assign(n.userData,tu,r,{transition:s,noAlloc:u,update:h||d&&n._standardAccessor,accessor:d,transform:v,defaultValue:y,bufferLayout:m}),Object.seal(n.userData),n._validateAttributeUpdaters(),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"delete",value:function(){co(Object(Bt.a)(t.prototype),"delete",this).call(this),Va.release(this.userData.allocatedValue)}},{key:"needsUpdate",value:function(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearChangedFlags,n=void 0!==t&&t,r=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!n,r}},{key:"getUpdateTriggers",value:function(){var e=this.userData.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"getAccessor",value:function(){return this.userData.accessor}},{key:"getShaderAttributes",value:function(){var e={};if(this.doublePrecision){var t=this.value instanceof Float64Array,n=!0,r=!1,i=void 0;try{for(var a,o=this.hasShaderAttributes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e[s]=this.shaderAttributes["".concat(s,t?"64":"32")];var c="".concat(s,"64xyLow");e[c]=t?this.shaderAttributes[c]:new Float32Array(this.size)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else this.hasShaderAttributes?Object.assign(e,this.shaderAttributes):e[this.id]=this;return e}},{key:"supportsTransition",value:function(){return Boolean(this.userData.transition)}},{key:"getTransitionSetting",value:function(e){var t=this.userData.accessor,n=this.userData.transition;return this.supportsTransition()?qc(Array.isArray(t)?e[t.find((function(t){return e[t]}))]:e[t],n):null}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.userData.needsUpdate=this.userData.needsUpdate||e,t){var n=t.startRow,r=void 0===n?0:n,i=t.endRow,a=void 0===i?1/0:i;this.userData.updateRanges=gs(this.userData.updateRanges,[r,a])}else this.userData.updateRanges=vs}},{key:"clearNeedsUpdate",value:function(){this.userData.needsUpdate=!1,this.userData.updateRanges=ps}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||e}},{key:"allocate",value:function(e){var t=this.userData;if(t.isExternalBuffer||t.noAlloc)return!1;if(t.update){Ya(Number.isFinite(e));var n=Math.max(e,1),r=iu(this.defaultType),i=t.allocatedValue,a=t.updateRanges!==vs;return this.constant=!1,this.value=Va.allocate(i,n,{size:this.size,type:r,padding:this.elementOffset,copy:a}),this.buffer&&this.buffer.byteLength<this.value.byteLength&&(this.buffer.reallocate(this.value.byteLength),a&&i&&this.buffer.subData({data:i instanceof Float64Array?Gc(i,{size:this.size}):i})),t.allocatedValue=this.value,!0}return!1}},{key:"updateBuffer",value:function(e){var t=e.numInstances,n=e.bufferLayout,r=e.data,i=e.props,a=e.context;if(!this.needsUpdate())return!1;var o=this.userData,s=o.update,c=o.updateRanges,u=o.noAlloc,l=!0;if(s){var h=!0,f=!1,d=void 0;try{for(var p,v=c[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=Object(we.a)(p.value,2),m=g[0],b=g[1];s.call(a,this,{data:r,startRow:m,endRow:b,props:i,numInstances:t,bufferLayout:n})}}catch(T){f=!0,d=T}finally{try{h||null==v.return||v.return()}finally{if(f)throw d}}var y=this.doublePrecision&&this.value instanceof Float64Array;if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength){var w=this.value;this.update({value:y?Gc(w,this):w,constant:this.constant}),this.value=w}else{var O=!0,_=!1,j=void 0;try{for(var k,x=c[Symbol.iterator]();!(O=(k=x.next()).done);O=!0){var E=Object(we.a)(k.value,2),P=(m=E[0],b=E[1],Number.isFinite(m)?this.getVertexOffset(m):0),S=Number.isFinite(b)?this.getVertexOffset(b):u||!Number.isFinite(t)?this.value.length:t*this.size;this.buffer.subData({data:y?Gc(this.value,{size:this.size,startIndex:P,endIndex:S}):this.value.subarray(P,S),offset:P*this.value.BYTES_PER_ELEMENT})}}catch(T){_=!0,j=T}finally{try{O||null==x.return||x.return()}finally{if(_)throw j}}}this._checkAttributeArray()}else l=!1;return this._updateShaderAttributes(),this.clearNeedsUpdate(),o.needsRedraw=!0,l}},{key:"update",value:function(e){co(Object(Bt.a)(t.prototype),"update",this).call(this,e),this._updateShaderAttributes()}},{key:"setConstantValue",value:function(e){var t=this.userData;if(void 0===e||"function"==typeof e)return t.isExternalBuffer=!1,!1;e=this._normalizeValue(e);var n=!this.constant||!this._areValuesEqual(e,this.value);return n&&this.update({constant:!0,value:e}),t.needsRedraw=t.needsUpdate||n,this.clearNeedsUpdate(),t.isExternalBuffer=!0,!0}},{key:"setExternalBuffer",value:function(e){var t,n=this.userData;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.isExternalBuffer=!0,n.lastExternalBuffer=e,t=ArrayBuffer.isView(e)?{constant:!1,value:e}:e instanceof ds?{constant:!1,buffer:e}:Object.assign({constant:!1},e),this._checkExternalBuffer(t),this.doublePrecision&&t.value instanceof Float64Array&&(t.originalValue=t.value,t.value=Gc(t.value,this)),this.update(t),n.needsRedraw=!0,t.originalValue&&(this.value=t.originalValue)),!0):(n.isExternalBuffer=!1,n.lastExternalBuffer=null,!1)}},{key:"_checkExternalBuffer",value:function(e){var t=e.value;if(!e.constant&&t){var n=iu(this.defaultType),r=!1;if(this.doublePrecision?r=t.BYTES_PER_ELEMENT<4:this.hasShaderAttributes&&(r=t.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT&&Object.values(this.shaderAttributes).some((function(e){return e.offset||e.stride}))),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.normalized||"normalized"in e||ws.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"getVertexOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bufferLayout,n=this.elementOffset;if(t){var r=0,i=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(r>=e)break;n+=u*this.size,r++}}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return n}return n+e*this.size}},{key:"_normalizeValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.userData.defaultValue;if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return t[n]=Number.isFinite(e)?e:r[0],t;switch(this.size){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0]}return t}},{key:"_areValuesEqual",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}},{key:"_standardAccessor",value:function(e,t){var n=t.data,r=t.startRow,i=t.endRow,a=t.props,o=(t.numInstances,t.bufferLayout),s=e.userData,c=s.accessor,u=s.transform,l=e.value,h=e.size,f="function"==typeof c?c:a[c];Ya("function"==typeof f,'accessor "'.concat(c,'" is not a function'));var d=e.getVertexOffset(r,o),p=za(n,r,i),v=p.iterable,g=p.objectInfo,m=!0,b=!1,y=void 0;try{for(var w,O=v[Symbol.iterator]();!(m=(w=O.next()).done);m=!0){var _=w.value;g.index++;var j=f(_,g);if(u&&(j=u.call(this,j)),o){e._normalizeValue(j,g.target);var k=o[g.index];Na({target:e.value,source:g.target,start:d,count:k}),d+=k*h}else e._normalizeValue(j,l,d),d+=h}}catch(x){b=!0,y=x}finally{try{m||null==O.return||O.return()}finally{if(b)throw y}}e.constant=!1,e.bufferLayout=o}},{key:"_validateAttributeUpdaters",value:function(){var e=this.userData;if(!(e.noAlloc||"function"==typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value;if(e&&e.length>=4&&!(Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"_updateShaderAttributes",value:function(){var e=this.shaderAttributes;for(var t in e){e[t].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:"bufferLayout",get:function(){return this.userData.bufferLayout},set:function(e){this.userData.bufferLayout=e}}]),t}(Rc);function iu(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function au(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var ou="void main() {gl_FragColor = vec4(0);}",su="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",cu="#version 300 es\n".concat(su);function uu(e,t){t=Array.isArray(t)?t:[t];var n=e.replace(/^\s+/,"").split(/\s+/),r=Object(we.a)(n,3),i=r[0],a=r[1],o=r[2];return t.includes(i)&&a&&o?{qualifier:i,type:a,name:o.split(";")[0]}:null}function lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,r=e.input,i=e.inputType,a=e.output;if(!r)return 300===n?cu:n>300?"#version ".concat(n,"\n").concat(su):ou;var o=fu(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function hu(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return au(!1),null}}function fu(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return au(!1),null}}var du=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),Ho(e),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e){return Wo(e)}}]),Object(oe.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,$o(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(e,t){var n=this,r=this._getVaryingIndex(e),i=this._getBufferParams(t),a=i.buffer,o=i.byteSize,s=i.byteOffset;return r<0?(this.unused[e]=a,Do.warn((function(){return"".concat(n.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,a,s,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,r;return e instanceof ds==!1?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.byteSize,i=t.byteOffset;this._bindBuffer(e,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(es),pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(oe.a)(e,[{key:"setupResources",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.bindings[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._setupTransformFeedback(o,e)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.varyings;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceBuffers,r=t.transformFeedback,i=Object.assign({},n,e.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var t=this.bindings[this.currentIndex].feedbackBuffers,n=e?t[e]:null;return n?n instanceof ds?n:n.buffer:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,n=this.getBuffer(t);return n?n.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Uo(Wo(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var t=e.sourceBuffers,n=void 0===t?{}:t,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var a=this.feedbackMap[i];i in n&&(r[a]=i)}for(var o in Object.assign(r,e.feedbackBuffers),r){var s=r[o];if("string"==typeof s){var c=n[s],u=c.byteLength,l=c.usage,h=c.accessor;r[o]=this._createNewBuffer(o,{byteLength:u,usage:l,accessor:h})}}return r}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,n=void 0===t?null:t;Object.assign(this.feedbackMap,e.feedbackMap);var r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(e,t){var n=t.model.program;e.transformFeedback=new du(this.gl,{program:n,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var t=this._swapBuffers(this.bindings[this.currentIndex]),n=t.sourceBuffers,r=t.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];t[r]=e.feedbackBuffers[i],n[i]=e.sourceBuffers[r],Uo(n[i]instanceof ds)}return{sourceBuffers:t,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(e,t){var n=new ds(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),e}();function vu(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}var gu,mu=(gu={},Object(W.a)(gu,"vs","#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(W.a)(gu,"fs","#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),gu),bu=/void main\s*\([^)]*\)\s*\{\n?/,yu=/}\n?[^{}]*$/,wu=[];function Ou(e){var t={};return au(Array.isArray(e)&&e.length>1),e.forEach((function(e){for(var n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]})),t}var _u,ju={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function ku(e){var t=e.vs,n=e.sourceTextureMap,r=e.targetTextureVarying,i=e.targetTexture,a=Object.keys(n).length,o=null,s={},c=t,u={};if(a>0||r){var l=c.split("\n"),h=l.slice();if(l.forEach((function(e,t,i){if(a>0){var c=function(e,t){var n={},r=function(e){return uu(e,["attribute","in"])}(e);if(!r)return null;var i=r.type,a=r.name;if(a&&t[a]){var o="// ".concat(e," => Replaced by Transform with a sampler"),s=function(e){var t="".concat("transform_uSampler_").concat(e),n="".concat("transform_uSize_").concat(e),r="  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";");return{samplerName:t,sizeName:n,uniformDeclerations:r}}(a),c=s.samplerName,u=s.sizeName,l=s.uniformDeclerations,h=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return au(!1),null}}(i),f="  ".concat(i," ").concat(a," = transform_getInput(").concat(c,", ").concat(u,").").concat(h,";\n");return n[c]=a,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":f},samplerTextureMap:n}}return null}(e,n);if(c){var l=c.updatedLine,f=c.inject;h[t]=l,u=Ou([u,f]),Object.assign(s,c.samplerTextureMap),a--}}r&&!o&&(o=function(e,t){var n=uu(e,["varying","out"]);if(!n)return null;return n.name===t?n.type:null}(e,r))})),r){Uo(i);var f="".concat("transform_uSize_").concat(r),d="uniform vec2 ".concat(f,";\n"),p="     vec2 ".concat("transform_position"," = transform_getPos(").concat(f,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n");u=Ou([u,{"vs:#decl":d,"vs:#main-start":p}])}c=h.join("\n")}return{vs:c,targetTextureType:o,inject:u,samplerTextureMap:s}}function xu(e){var t,n,r=e.sourceTextureMap,i=e.targetTextureVarying,a=e.targetTexture,o={};for(var s in i&&(t=a.width,n=a.height,o["".concat("transform_uSize_").concat(i)]=[t,n]),r){var c=r[s];t=c.width,n=c.height,o["".concat("transform_uSize_").concat(s)]=[t,n]}return o}var Eu=(_u={},Object(W.a)(_u,10241,9728),Object(W.a)(_u,10240,9728),Object(W.a)(_u,10242,33071),Object(W.a)(_u,10243,33071),_u),Pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),this.gl=t,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(oe.a)(e,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e);return Object.assign({},e,t)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceTextures,r=t.framebuffer,i=t.targetTexture,a=Object.assign({},e.attributes),o=Object.assign({},e.uniforms),s=Object.assign({},e.parameters),c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var u in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var l=this.samplerTextureMap[u];o[u]=n[l]}this._setSourceTextureParameters();var h=xu({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(o,h)}return this.hasTargetTexture&&(c=!1,s.viewport=[0,0,r.width,r.height]),{attributes:a,framebuffer:r,uniforms:o,discard:c,parameters:s}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packed,n=void 0!==t&&t,r=this.bindings[this.currentIndex].framebuffer,i=tc(r);if(!n)return i;for(var a=i.constructor,o=hu(this.targetTextureType),s=new a(i.length*o/4),c=0,u=0;u<i.length;u+=4)for(var l=0;l<o;l++)s[c++]=i[u+l];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTextureVarying,n=e._swapTexture;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var t=e.sourceTextures,n=e.textureOrReference;if(n instanceof zs)return n;var r=t[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._sourceTextures,n=void 0===t?{}:t,r=e._targetTexture,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceTextures:n,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!("number"!=typeof e||this.elementCount>=e)){var t=new Float32Array(e);t.forEach((function(e,t,n){n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new ds(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var t=this._swapTextures(this.bindings[this.currentIndex]),n=t.sourceTextures,r=t.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(e,t){var n=t.sourceTextures,r=t.targetTexture;if(e||(e={sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,n),r){e.targetTexture=r;var i=r.width,a=r.height,o=e.framebuffer;o?(o.update({attachments:Object(W.a)({},36064,r),resizeAttachments:!1}),o.resize({width:i,height:a})):e.framebuffer=new ac(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:i,height:a,attachments:Object(W.a)({},36064,r)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,t=this.bindings[e].sourceTextures;for(var n in t)t[n].setParameters(Eu)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(e){var t,n=function(e,t){Uo(e instanceof zs||e instanceof Js||e instanceof ec);var n=e.constructor,r=e.gl,i=e.width,a=e.height,o=e.format,s=e.type,c=e.dataFormat,u=e.border,l=e.mipmaps;return new n(r,Object.assign({width:i,height:a,format:o,type:s,dataFormat:c,border:u,mipmaps:l},t))}(e,{parameters:(t={},Object(W.a)(t,10241,9728),Object(W.a)(t,10240,9728),Object(W.a)(t,10242,33071),Object(W.a)(t,10243,33071),t),pixelStore:Object(W.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceTextures,r=t.targetTexture,i=ku({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),a=i.vs,o=i.uniforms,s=i.targetTextureType,c=i.inject,u=i.samplerTextureMap,l=Ou([e.inject||{},c]);this.targetTextureType=s,this.samplerTextureMap=u;var h=e._fs||lu({version:vu(a),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),f=this.hasSourceTextures||this.targetTextureVarying?[ju].concat(e.modules||[]):e.modules;return{vs:a,fs:h,modules:f,uniforms:o,inject:l}}}]),e}();function Su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){Object(W.a)(e,t,n[t])}))}return e}var Tu={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Cu(e,t){var n=(t||{}).attributeMap,r=void 0===n?Tu:n;return r&&r[e]||e}function Mu(e,t){var n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}Uo(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}function Au(e,t,n){switch(t){case 300:return n?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e);case 100:return n?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version ".concat(t))}}var Lu={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function Ru(e){var t=Iu(e);return"object"===t?e?"type"in e?Object.assign({},e,Lu[e.type]):"value"in e?(t=Iu(e.value),Object.assign({type:t},e,Lu[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},Lu[t])}function Iu(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":Object(Xr.a)(e)}var Du=function(){function e(t){var n=t.name,r=t.vs,i=t.fs,a=t.dependencies,o=void 0===a?[]:a,s=t.uniforms,c=t.getUniforms,u=t.deprecations,l=void 0===u?[]:u,h=t.defines,f=void 0===h?{}:h,d=t.vertexShader,p=t.fragmentShader;Object(ae.a)(this,e),au("string"==typeof n),this.name=n,this.vs=r||d,this.fs=i||p,this.getModuleUniforms=c,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=f,s&&(this.uniforms=function(e){var t={};for(var n in e){var r=Ru(e[n]);t[n]=r}return t}(s))}return Object(oe.a)(e,[{key:"getModuleSource",value:function(e,t){var n;switch(e){case"vs":n=Au(this.vs||"",t,!0);break;case"fs":n=Au(this.fs||"",t,!1);break;default:au(!1)}return"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=this.uniforms;for(var r in n){var i=n[r];r in e&&!i.private?(i.validate&&au(i.validate(e[r],i),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=i.value}return t}}]),e}();function Nu(e){if(!e.normalized&&(e.normalized=!0,e.uniforms&&!e.getUniforms)){var t=new Du(e);e.getUniforms=t.getUniforms.bind(t)}return e}var Fu=new(function(){function e(){Object(ae.a)(this,e),this.shaderModules={},this.defaultShaderModules=[]}return Object(oe.a)(e,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"getDefaultShaderModules",value:function(){return this.defaultShaderModules}},{key:"registerShaderModules",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,r=void 0!==n&&n,i=!0,a=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;this._registerShaderModule(u,r)}}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}},{key:"getShaderModule",value:function(e){if(e instanceof Du)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||au(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function(e){var t=this;return e.map((function(e){return t.getShaderModule(e)}))}},{key:"_registerShaderModule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Du)return e;if(au(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new Du(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),e}());function Bu(e){var t={},n={};return zu({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort((function(e,t){return n[t]-n[e]})).map((function(e){return t[e]}))}function zu(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;r[l.name]=l,(void 0===i[l.name]||i[l.name]<n)&&(i[l.name]=n)}}catch(m){o=!0,s=m}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var h=!0,f=!1,d=void 0;try{for(var p,v=t[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=p.value;g.dependencies&&zu({modules:g.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(m){f=!0,d=m}finally{try{h||null==v.return||v.return()}finally{if(f)throw d}}}function Uu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var Vu={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Wu={};Object.keys(Vu).forEach((function(e){Wu[e]=e}));var Gu,Hu,Xu,qu={};function Yu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Vu[t];if(au(r,t),!Uu(n))return!0;if(t in qu)return qu[t];var i=r[0],a=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(a,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,o),e.compileShader(s);var c=e.getShaderParameter(s,35713);return e.deleteShader(s),qu[t]=c,c}function Zu(e,t){var n=Vu[t];au(n,t);var r=function(e){return Boolean(e&&2===e._version)}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return au(!1===i||!0===i),i}function Ku(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return Zu(e,t)}))}var $u,Qu="\n\n".concat("__LUMA_INJECT_DECLARATIONS__","\n\n"),Ju=(Gu={},Object(W.a)(Gu,"vs","vertex"),Object(W.a)(Gu,"fs","fragment"),Gu),el=(Hu={},Object(W.a)(Hu,"vs",{}),Object(W.a)(Hu,"fs",{}),Hu),tl=(Xu={},Object(W.a)(Xu,"vs",{}),Object(W.a)(Xu,"fs",{}),Xu);function nl(e,t){var n=t.hook,r=t.injection,i=t.order,a=void 0===i?0:i,o=n.slice(0,2),s=tl[o];s[e]=s[e]||{},au(!s[e][n],"Module injection already created"),s[e][n]={injection:r,order:a}}function rl(e,t){var n=t.vs,r=t.fs,i=function(e){return e=e.concat(Fu.defaultShaderModules),Bu(e=Fu.resolveModules(e))}(t.modules||[]);return{gl:e,vs:il(e,Object.assign({},t,{source:n,type:"vs",modules:i})),fs:il(e,Object.assign({},t,{source:r,type:"fs",modules:i})),getUniforms:al(i),modules:ol(i)}}function il(e,t){var n,r,i=t.id,a=t.source,o=t.type,s=t.modules,c=t.defines,u=void 0===c?{}:c,l=t.hookFunctions,h=void 0===l?el:l,f=t.moduleInjections,d=void 0===f?tl:f,p=t.inject,v=void 0===p?{}:p,g=t.prologue,m=void 0===g||g,b=t.log;(au("string"==typeof a,"shader source must be a string"),h!==el)&&(n={},Object(W.a)(n,"vs",Object.assign({},el.vs,h.vs)),Object(W.a)(n,"fs",Object.assign({},el.fs,h.fs)),h=n);d!==tl&&(r={},Object(W.a)(r,"vs",Object.assign({},tl.vs,d.vs)),Object(W.a)(r,"fs",Object.assign({},tl.fs,d.fs)),d=r);var y="vs"===o,w=a.split("\n"),O=100,_="",j=a;0===w[0].indexOf("#version ")?(O=300,_=w[0],j=w.slice(1).join("\n")):_="#version ".concat(O);var k={};s.forEach((function(e){Object.assign(k,e.getDefines())})),Object.assign(k,u);var x=m?"".concat(_,"\n").concat(function(e){var t=e.id,n=e.source,r=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(Ju[r],"\n\n"):""}({id:i,source:a,type:o}),"\n").concat(function(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(Ju[t].toUpperCase(),"\n")}({type:o}),"\n").concat(function(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(e,t){if(e.match(/NVIDIA/i)||t.match(/NVIDIA/i))return"NVIDIA";if(e.match(/INTEL/i)||t.match(/INTEL/i))return"INTEL";if(e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Ku(e,Wu.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Ku(e,Wu.GLSL_DERIVATIVES)&&Yu(e,Wu.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Ku(e,Wu.GLSL_FRAG_DATA)&&Yu(e,Wu.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Ku(e,Wu.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}0===t&&(n+="\n");return n}(k),"\n").concat(y?"":"precision highp float;\n\n","\n"):"".concat(_,"\n"),E=!1,P={},S={};for(var T in v){var C="string"==typeof v[T]?{injection:v[T],order:0}:v[T];T.match(/^(v|f)s:/)?"#"===T[3]?S[T]=[C]:P[T]=[C]:S[T]=[C]}var M=!0,A=!1,L=void 0;try{for(var R,I=s[Symbol.iterator]();!(M=(R=I.next()).done);M=!0){var D=R.value;switch(D.name){case"inject":E=!0;break;default:if(b&&D.checkDeprecations(j,b),x+=D.getModuleSource(o,O),d[o][D.name]){var N=d[o][D.name];for(var F in N)F.match(/^(v|f)s:#/)?(S[F]=S[F]||[],S[F].push(N[F])):(P[F]=P[F]||[],P[F].push(N[F]))}}}}catch(B){A=!0,L=B}finally{try{M||null==I.return||I.return()}finally{if(A)throw L}}return x+=Qu,x+=function(e,t){var n="";for(var r in e){var i=e[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),t[r]){var a=t[r];a.sort((function(e,t){return e.order-t.order}));var o=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;n+="  ".concat(h.injection,"\n")}}catch(B){s=!0,c=B}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(h[o],P),x=function(e,t,n,r){var i="vs"===t,a=function(t){var r=n[t];r.sort((function(e,t){return e.order-t.order})),wu.length=r.length;for(var a=0,o=r.length;a<o;++a)wu[a]=r[a].injection;var s="".concat(wu.join("\n"),"\n");switch(t){case"vs:#decl":i&&(e=e.replace("__LUMA_INJECT_DECLARATIONS__",s));break;case"vs:#main-start":i&&(e=e.replace(bu,(function(e){return e+s})));break;case"vs:#main-end":i&&(e=e.replace(yu,(function(e){return s+e})));break;case"fs:#decl":i||(e=e.replace("__LUMA_INJECT_DECLARATIONS__",s));break;case"fs:#main-start":i||(e=e.replace(bu,(function(e){return e+s})));break;case"fs:#main-end":i||(e=e.replace(yu,(function(e){return s+e})));break;default:e=e.replace(t,(function(e){return e+s}))}};for(var o in n)a(o);return e=e.replace("__LUMA_INJECT_DECLARATIONS__",""),r&&(e=e.replace(/\}\s*$/,(function(e){return e+mu[t]}))),e}(x+=j,o,S,E)}function al(e){return function(t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value.getUniforms(t,n);Object.assign(n,c)}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}function ol(e){var t,n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,u=(t=c,Fu.getShaderModule(t));n[c]=u}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}var sl=($u={},Object(W.a)($u,5126,(function(e,t,n){return e.uniform1fv(t,dl(n,1))})),Object(W.a)($u,35664,(function(e,t,n){return e.uniform2fv(t,dl(n,2))})),Object(W.a)($u,35665,(function(e,t,n){return e.uniform3fv(t,dl(n,3))})),Object(W.a)($u,35666,(function(e,t,n){return e.uniform4fv(t,dl(n,4))})),Object(W.a)($u,5124,(function(e,t,n){return e.uniform1iv(t,pl(n,1))})),Object(W.a)($u,35667,(function(e,t,n){return e.uniform2iv(t,pl(n,2))})),Object(W.a)($u,35668,(function(e,t,n){return e.uniform3iv(t,pl(n,3))})),Object(W.a)($u,35669,(function(e,t,n){return e.uniform4iv(t,pl(n,4))})),Object(W.a)($u,35670,(function(e,t,n){return e.uniform1iv(t,pl(n,1))})),Object(W.a)($u,35671,(function(e,t,n){return e.uniform2iv(t,pl(n,2))})),Object(W.a)($u,35672,(function(e,t,n){return e.uniform3iv(t,pl(n,3))})),Object(W.a)($u,35673,(function(e,t,n){return e.uniform4iv(t,pl(n,4))})),Object(W.a)($u,35674,(function(e,t,n){return e.uniformMatrix2fv(t,!1,dl(n,4))})),Object(W.a)($u,35675,(function(e,t,n){return e.uniformMatrix3fv(t,!1,dl(n,9))})),Object(W.a)($u,35676,(function(e,t,n){return e.uniformMatrix4fv(t,!1,dl(n,16))})),Object(W.a)($u,35678,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,35680,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,5125,(function(e,t,n){return e.uniform1uiv(t,vl(n,1))})),Object(W.a)($u,36294,(function(e,t,n){return e.uniform2uiv(t,vl(n,2))})),Object(W.a)($u,36295,(function(e,t,n){return e.uniform3uiv(t,vl(n,3))})),Object(W.a)($u,36296,(function(e,t,n){return e.uniform4uiv(t,vl(n,4))})),Object(W.a)($u,35685,(function(e,t,n){return e.uniformMatrix2x3fv(t,!1,dl(n,6))})),Object(W.a)($u,35686,(function(e,t,n){return e.uniformMatrix2x4fv(t,!1,dl(n,8))})),Object(W.a)($u,35687,(function(e,t,n){return e.uniformMatrix3x2fv(t,!1,dl(n,6))})),Object(W.a)($u,35688,(function(e,t,n){return e.uniformMatrix3x4fv(t,!1,dl(n,12))})),Object(W.a)($u,35689,(function(e,t,n){return e.uniformMatrix4x2fv(t,!1,dl(n,8))})),Object(W.a)($u,35690,(function(e,t,n){return e.uniformMatrix4x3fv(t,!1,dl(n,12))})),Object(W.a)($u,35679,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,35682,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36289,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36292,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36293,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36298,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36299,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36300,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36303,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36306,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36307,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36308,(function(e,t,n){return e.uniform1i(t,n)})),Object(W.a)($u,36311,(function(e,t,n){return e.uniform1i(t,n)})),$u),cl={},ul={},ll={},hl=[0];function fl(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(hl[0]=e,e=hl);var i=e.length;if(i%t&&Do.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function dl(e,t){return fl(e,t,Float32Array,cl)}function pl(e,t){return fl(e,t,Int32Array,ul)}function vl(e,t){return fl(e,t,Uint32Array,ll)}function gl(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function ml(e,t,n){var r=sl[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,e,t)}function bl(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!yl(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function yl(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof Ds||(e instanceof Gs||e instanceof ac&&Boolean(e.texture))))}function wl(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}function Ol(e){return Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e}function _l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=e.match(n);return r?r[1]:t}function jl(e,t,n,r){for(var i=e.split(/\r?\n/),a={},o={},s=r||_l(t)||"(unnamed)",c="".concat(function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),u=0;u<i.length;u++){var l=i[u];if(!(l.length<=1)){var h=l.split(":"),f=h[0],d=parseInt(h[2],10);if(isNaN(d))throw new Error("GLSL compilation error in ".concat(c,": ").concat(e));"WARNING"!==f?a[d]=l:o[d]=l}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map((function(e,r){var a=r+t,o=String(a).length;return xl(a,i-o)+n+e}))}(t);return{shaderName:c,errors:kl(a,p),warnings:kl(o,p)}}function kl(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var a=e[r+1],o=a.split(":",3),s=o[0],c=parseInt(o[1],10)||0,u=a.substring(o.join(":").length+1).trim();n+=xl("^^^ ".concat(s,": ").concat(u,"\n\n"),c)}}return n}function xl(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}var El,Pl=function(e){function t(e,n){var r;Object(ae.a)(this,t),Go(e),Uo("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string");var i=_l(n.source,null)||n.id||Zo("unnamed ".concat(t.getTypeName(n.shaderType)));return(r=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,{id:i}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Uo(!1),"unknown"}}}]),Object(oe.a)(t,[{key:"initialize",value:function(e){var t=e.source,n=_l(t,null);n&&(this.id=Zo(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return _l(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var n=this.gl.getShaderInfoLog(this.handle),r=jl(n,this.source,this.shaderType,this.id),i=r.shaderName,a=r.errors,o=r.warnings;throw Do.error("GLSL compilation errors in ".concat(i,"\n").concat(a))(),Do.warn("GLSL compilation warnings in ".concat(i,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(es),Sl=function(e){function t(e,n){return Object(ae.a)(this,t),"string"==typeof n&&(n={source:n}),Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Object.assign({},n,{shaderType:35633})))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(Pl),Tl=function(e){function t(e,n){return Object(ae.a)(this,t),"string"==typeof n&&(n={source:n}),Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Object.assign({},n,{shaderType:35632})))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(Pl),Cl=(El={},Object(W.a)(El,5126,[5126,1,"float"]),Object(W.a)(El,35664,[5126,2,"vec2"]),Object(W.a)(El,35665,[5126,3,"vec3"]),Object(W.a)(El,35666,[5126,4,"vec4"]),Object(W.a)(El,5124,[5124,1,"int"]),Object(W.a)(El,35667,[5124,2,"ivec2"]),Object(W.a)(El,35668,[5124,3,"ivec3"]),Object(W.a)(El,35669,[5124,4,"ivec4"]),Object(W.a)(El,5125,[5125,1,"uint"]),Object(W.a)(El,36294,[5125,2,"uvec2"]),Object(W.a)(El,36295,[5125,3,"uvec3"]),Object(W.a)(El,36296,[5125,4,"uvec4"]),Object(W.a)(El,35670,[5126,1,"bool"]),Object(W.a)(El,35671,[5126,2,"bvec2"]),Object(W.a)(El,35672,[5126,3,"bvec3"]),Object(W.a)(El,35673,[5126,4,"bvec4"]),Object(W.a)(El,35674,[5126,8,"mat2"]),Object(W.a)(El,35685,[5126,8,"mat2x3"]),Object(W.a)(El,35686,[5126,8,"mat2x4"]),Object(W.a)(El,35675,[5126,12,"mat3"]),Object(W.a)(El,35687,[5126,12,"mat3x2"]),Object(W.a)(El,35688,[5126,12,"mat3x4"]),Object(W.a)(El,35676,[5126,16,"mat4"]),Object(W.a)(El,35689,[5126,16,"mat4x2"]),Object(W.a)(El,35690,[5126,16,"mat4x3"]),El);function Ml(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Uo(!1),0}}function Al(e){var t=Cl[e];if(!t)return null;var n=Object(we.a)(t,2);return{type:n[0],components:n[1]}}function Ll(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=5126}for(var n in Cl){var r=Object(we.a)(Cl[n],3),i=r[0],a=r[1],o=r[2];if(i===e&&a===t)return{glType:n,name:o}}return null}var Rl=function(){function e(t){Object(ae.a)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(oe.a)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),a=i.name,o=i.type,s=i.size,c=t.getAttribLocation(e.handle,a);c>=0&&this._addAttribute(c,a,o,s)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Wo(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var i=t.getTransformFeedbackVarying(e.handle,r),a=i.name,o=i.type,s=i.size;this._addVarying(r,a,o,s)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,n,r){var i=Al(n),a={type:i.type,size:r*i.components};this._inferProperties(e,t,a);var o={location:e,name:t,accessor:new us(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[e]=o,this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var i=Al(n),a=i.type,o=i.components,s={location:e,name:t,accessor:new us({type:a,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),Il=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Dl=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).stubRemovedMethods("Program","v6.0",Il),n._isCached=!1,n.initialize(r),Object.seal(Object(et.a)(n)),n._setId(r.id),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,n=e.vs,r=e.fs,i=e.varyings,a=e.bufferMode,o=void 0===a?35981:a;return this.hash=t||"",this.vs="string"==typeof n?new Sl(this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new Tl(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Uo(this.vs instanceof Sl),Uo(this.fs instanceof Tl),this.uniforms={},i&&i.length>0&&(Ho(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Rl(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:co(Object(Bt.a)(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,r=e.drawMode,i=void 0===r?4:r,a=e.vertexCount,o=e.offset,s=void 0===o?0:o,c=e.start,u=e.end,l=e.isIndexed,h=void 0!==l&&l,f=e.indexType,d=void 0===f?5123:f,p=e.isInstanced,v=void 0!==p&&p,g=e.instanceCount,m=void 0===g?0:g,b=e.vertexArray,y=void 0===b?null:b,w=e.transformFeedback,O=e.framebuffer,_=e.parameters,j=void 0===_?{}:_,k=e.uniforms,x=e.samplers;if((k||x)&&(Do.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(k||{})),void 0!==n){var E=O?O.id:"default",P="mode=".concat(qo(this.gl,i)," verts=").concat(a," ")+"instances=".concat(m," indexType=").concat(qo(this.gl,d)," ")+"isInstanced=".concat(v," isIndexed=").concat(h," ")+"Framebuffer=".concat(E);Do.log(n,P)()}return Uo(y),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(y.bindForDraw(a,m,(function(){if(void 0!==O&&(j=Object.assign({},j,{framebuffer:O})),w){var e=Ml(i);w.begin(e)}t._bindTextures(),Ls(t.gl,j,(function(){h&&v?t.gl.drawElementsInstanced(i,a,d,s,m):h&&Wo(t.gl)&&!isNaN(c)&&!isNaN(u)?t.gl.drawRangeElements(i,c,u,a,d,s):h?t.gl.drawElements(i,a,d,s):v?t.gl.drawArraysInstanced(i,s,a,m):t.gl.drawArrays(i,s,a)})),w&&w.end()})),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=!1,r={};for(var i in e)wl(this.uniforms[i],e[i])||(n=!0,r[i]=e[i],this.uniforms[i]=Ol(e[i]));return n&&(t(),bl(r,this.id,this._uniformSetters),this._setUniforms(r)),this}},{key:"reset",value:function(){}},{key:"_areTexturesRenderable",value:function(){var e=!0;for(var t in this.uniforms){var n=this._uniformSetters[t];if(n&&void 0!==n.textureIndex){var r=this.uniforms[t];if(r instanceof ac)r=r.texture;if(r instanceof Ds)e=e&&r.loaded}}return e}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var n=this.uniforms[e];if(n instanceof ac&&(n=n.texture),n instanceof Ds)n.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r)if(n instanceof ac&&(n=n.texture),n instanceof Ds){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,a=r.textureIndex;i.bind(a),r(a)}else r(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Sl({handle:c});break;case 35632:n.fs=new Tl({handle:c})}}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Zo(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Do.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Do.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||Do.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=gl(n.name),i=r.name,a=(r.isArray,e.getUniformLocation(this.handle,i));if(this._uniformSetters[i]=ml(e,a,n),n.size>1)for(var o=0;o<n.size;o++)a=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=ml(e,a,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(es),Nl=function(){function e(t){Object(ae.a)(this,e),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._moduleInjections={vs:{},fs:{}},this._hookFunctions={vs:{},fs:{}},this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(oe.a)(e,null,[{key:"getDefaultProgramManager",value:function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager}}]),Object(oe.a)(e,[{key:"addDefaultModule",value:function(e){this._defaultModules.find((function(t){return t.name===e.name}))||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((function(e){return e.name!==t})),this.stateHash++}},{key:"addModuleInjection",value:function(e,t){var n="string"==typeof e?e:e.name,r=t.hook,i=t.injection,a=t.order,o=void 0===a?0:a,s=r.slice(0,2),c=this._moduleInjections[s];c[n]=c[n]||{},c[n][r]={injection:i,order:o},this.stateHash++}},{key:"addShaderHook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e=e.trim()).split(":"),r=Object(we.a)(n,2),i=r[0],a=r[1],o=e.replace(/\(.+/,"");this._hookFunctions[i][o]=Object.assign(t,{signature:a}),this.stateHash++}},{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.vs,r=void 0===n?"":n,i=t.fs,a=void 0===i?"":i,o=t.defines,s=void 0===o?{}:o,c=t.inject,u=void 0===c?{}:c,l=t.varyings,h=void 0===l?[]:l,f=t.bufferMode,d=void 0===f?35981:f,p=this._getModuleList(t.modules),v=this._getHash(r),g=this._getHash(a),m=p.map((function(t){return e._getHash("string"==typeof t?t:t.name)})).sort(),b=h.map((function(t){return e._getHash(t)})),y=Object.keys(s).sort(),w=Object.keys(u).sort(),O=[],_=[],j=!0,k=!1,x=void 0;try{for(var E,P=y[Symbol.iterator]();!(j=(E=P.next()).done);j=!0){var S=E.value;O.push(this._getHash(S)),O.push(this._getHash(s[S]))}}catch(N){k=!0,x=N}finally{try{j||null==P.return||P.return()}finally{if(k)throw x}}var T=!0,C=!1,M=void 0;try{for(var A,L=w[Symbol.iterator]();!(T=(A=L.next()).done);T=!0){var R=A.value;_.push(this._getHash(R)),_.push(this._getHash(u[R]))}}catch(N){C=!0,M=N}finally{try{T||null==L.return||L.return()}finally{if(C)throw M}}var I="".concat(v,"/").concat(g,"D").concat(O.join("/"),"M").concat(m.join("/"),"I").concat(_.join("/"),"V").concat(b.join("/"),"H").concat(this.stateHash,"B").concat(d);if(!this._programCache[I]){var D=rl(this.gl,{vs:r,fs:a,modules:p,inject:u,defines:s,hookFunctions:this._hookFunctions,moduleInjections:this._moduleInjections});this._programCache[I]=new Dl(this.gl,{hash:I,vs:D.vs,fs:D.fs,varyings:h,bufferMode:d}),this._getUniforms[I]=D.getUniforms||function(e){},this._useCounts[I]=0}return this._useCounts[I]++,this._programCache[I]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),n={},r=0,i=0,a=this._defaultModules.length;i<a;++i){var o=this._defaultModules[i],s="string"==typeof o?o:o.name;t[r++]=o,n[s]=!0}for(var c=0,u=e.length;c<u;++c){var l=e[c],h="string"==typeof l?l:l.name;n[h]||(t[r++]=l,n[h]=!0)}return t.length=r,t}}]),e}(),Fl=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r))).target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Wo(e),r=Ac(e,uc),i=n||r,a=!0,o=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;switch(l){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:Uo(!1)}}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}}]),Object(oe.a)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(e){return this._queryPending||(this.target=e,this.gl.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(36795)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function a(){e.isResultAvailable()?(r(e.getResult()),e._pollingPromise=null):n++>t?(i("Timed out"),e._pollingPromise=null):requestAnimationFrame(a)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),t}(es),Bl=null;function zl(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Bl||Bl.byteLength<n)&&(Bl=new ArrayBuffer(n)),Bl),0,t)}var Ul=n("I0ug");function Vl(e){if(!e&&!Object(ho.a)())return"Node";if(Object(Ul.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":ko.b.chrome?"Chrome":ko.b.safari?"Safari":ko.b.mozInnerScreenX?"Firefox":"Unknown"}var Wl="elements must be GL.ELEMENT_ARRAY_BUFFER",Gl=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,t);var i=r.id||r.program&&r.program.id;return(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Object.assign({},r,{id:i})))).hasVertexArrays=t.isSupported(e),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(et.a)(n)),n}return Object(zt.a)(t,e),Object(oe.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.constantAttributeZero?Wo(e)||"Chrome"===Vl():Wo(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,n,r){switch(r.constructor){case Float32Array:t._setConstantFloatArray(e,n,r);break;case Int32Array:t._setConstantIntArray(e,n,r);break;case Uint32Array:t._setConstantUintArray(e,n,r);break;default:Uo(!1)}}}]),Object(oe.a)(t,[{key:"delete",value:function(){co(Object(Bt.a)(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Uo(!t||34963===t.target,Wl),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,i=n.type,a=n.stride,o=n.offset,s=n.normalized,c=n.integer,u=n.divisor,l=this.gl;return e=Number(e),this.bind((function(){l.bindBuffer(34962,t.handle),c?(Uo(Wo(l)),l.vertexAttribIPointer(e,r,i,a,o)):l.vertexAttribPointer(e,r,i,s,a,o),l.enableVertexAttribArray(e),l.vertexAttribDivisor(e,u||0)})),this}},{key:"enable",value:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return i||(e=Number(e),this.bind((function(){return r?n.gl.enableVertexAttribArray(e):n.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t,n){var r=this._normalizeConstantArrayValue(t,n),i=r.byteLength*e,a=r.length*e,o=!this.buffer;if(this.buffer=this.buffer||new ds(this.gl,i),o=(o=o||this.buffer.reallocate(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=zl(t.constructor,a);!function(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,a=e.count,o=void 0===a?1:a,s=n.length,c=o*s,u=0,l=i;u<s;u++)t[l++]=n[u];for(;u<c;)u<c-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+c-u),u=c)}({target:s,source:r,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return Uo(Number.isFinite(r)),this.bind((function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:Uo(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(Uo(Wo(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:Uo(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(Uo(Wo(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:Uo(!1)}}}]),t}(es),Hl=/^(.+)__LOCATION_([0-9]+)$/,Xl=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],ql=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=Gl.isSupported(t)?new Gl(t):Gl.getDefaultArray(t),Qo(this,"VertexArray","v6.0",Xl),this.initialize(n),Object.seal(this)}return Object(oe.a)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var n in e){var r=e[n];t._setAttribute(n,r)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,a=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,a)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n)),i=r.location,a=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,a),this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&(e.vertexArrayObject.isDefaultArray||e.vertexArrayObject.setElementBuffer(null)),e.buffer=e.buffer||new ds(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof ds&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof ds&&e.setBuffer(t,n)}})),this}},{key:"bindForDraw",value:function(e,t,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()})),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var i=this,a=this._getAttributeIndex(e),o=a.location,s=a.name;if(!Number.isFinite(o)||o<0)return this.unused[e]=t,Do.once(3,(function(){return"unused value ".concat(e," in ").concat(i.id)}))(),this;var c=this._getAttributeInfo(s||o);if(!c)return{location:-1,accessor:null};var u=us.resolve(c.accessor,n,r),l=u.size,h=u.type;return Uo(Number.isFinite(l)&&Number.isFinite(h)),{location:o,accessor:u}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var n=Hl.exec(e),r=n?n[1]:e,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof ds)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof ds){var n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var i=t;this.setConstant(e,i)}else{if(!(t.buffer instanceof ds))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var a=t;this.setBuffer(e,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(Gl.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){Gl.setConstant(this.gl,e,t),this.vertexArrayObject.isDefaultArray&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof ds){var a=n;if(i){var o=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,o)}else{var s=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Do.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}(),Yl="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",Zl="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n";function Kl(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,o="[",s=0;s<e.length&&s<r;++s)s>0&&(o+=",".concat(s%a==0?" ":"")),o+=$l(e[s],t);var c=e.length>r?"...":"]";return"".concat(o).concat(c)}function $l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=t.isInteger,i=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return Kl(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<n)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var a=e.toPrecision(2),o=a.indexOf(".0");return o===a.length-2?a.slice(0,-1):a}function Ql(e,t,n,r){var i,a,o=e.gl;if(!t)return a={},Object(W.a)(a,r,"null"),Object(W.a)(a,"Format ","N/A"),a;var s,c,u,l="NOT PROVIDED",h="N/A",f="N/A",d="N/A";if(n&&(l=n.type,h=n.size,s=-1!==(l=String(l).replace("Array","")).indexOf("nt")),t instanceof ds){var p,v,g=t,m=g.getDebugData(),b=m.data;if(c=m.modified?"*":"",u=b,f=(d=g.byteLength)/b.BYTES_PER_ELEMENT/h,n){var y=n.divisor>0;v="".concat(y?"I ":"P "," ").concat(f," (x").concat(h,"=").concat(d," bytes ").concat(qo(o,l),")")}else s=!0,v="".concat(d," bytes");return p={},Object(W.a)(p,r,"".concat(c).concat($l(u,{size:h,isInteger:s}))),Object(W.a)(p,"Format ",v),p}return u=t,h=t.length,s=-1!==(l=String(t.constructor.name).replace("Array","")).indexOf("nt"),i={},Object(W.a)(i,r,"".concat($l(u,{size:h,isInteger:s})," (constant)")),Object(W.a)(i,"Format ","".concat(h,"x").concat(l," (constant)")),i}function Jl(e,t){var n=Ll(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function eh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,a=e.undefinedOnly,o=void 0!==a&&a;Uo(r);var s=".*_.*",c=".*Matrix",u=r._uniformSetters,l={},h=Object.keys(u).sort(),f=0,d=!0,p=!1,v=void 0;try{for(var g,m=h[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var b=g.value;b.match(s)||b.match(c)||th({table:l,header:n,uniforms:i,uniformName:b,undefinedOnly:o})&&f++}}catch(I){p=!0,v=I}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}var y=!0,w=!1,O=void 0;try{for(var _,j=h[Symbol.iterator]();!(y=(_=j.next()).done);y=!0){var k=_.value;k.match(c)&&th({table:l,header:n,uniforms:i,uniformName:k,undefinedOnly:o})&&f++}}catch(I){w=!0,O=I}finally{try{y||null==j.return||j.return()}finally{if(w)throw O}}var x=!0,E=!1,P=void 0;try{for(var S,T=h[Symbol.iterator]();!(x=(S=T.next()).done);x=!0){var C=S.value;l[C]||th({table:l,header:n,uniforms:i,uniformName:C,undefinedOnly:o})&&f++}}catch(I){E=!0,P=I}finally{try{x||null==T.return||T.return()}finally{if(E)throw P}}var M=0,A={};if(!o)for(var L in i){var R=i[L];l[L]||(M++,A[L]=Object(W.a)({Type:"NOT USED: ".concat(R)},n,$l(R)))}return{table:l,count:f,unusedTable:A,unusedCount:M}}function th(e){var t,n=e.table,r=e.header,i=e.uniforms,a=e.uniformName,o=e.undefinedOnly,s=i[a],c=function(e){return null!=e}(s);return(!o||!c)&&(n[a]=(t={},Object(W.a)(t,r,c?$l(s):"N/A"),Object(W.a)(t,"Uniform Type",c?s:"NOT PROVIDED"),t),!0)}function nh(e){var t=e.accessor,n=Ll(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}var rh={},ih=function(e){rh[e.id]||(rh[e.id]=e,Ja.a.listItem("luma.gl",e.id))},ah=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},oh=new Map,sh=function(e,t){if(lo.b.__SEER_INITIALIZED__&&e){var n=oh.get(e);n&&n.forEach((function(e,n){ah(t,n,e)}))}};Ja.a.listenFor("luma.gl",(function(e){var t=rh[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);!function(e,t,n){lo.b.__SEER_INITIALIZED__&&(oh.has(e)||oh.set(e,new Map),oh.get(e).set(t,n))}(e.itemKey,n,e.value);var r=t.getUniforms();ah(r,n,e.value),t.setUniforms(r)}}));var ch=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),Uo(Vo(t));var r=n.id,i=void 0===r?Zo("base-model"):r;this.id=i,this.gl=t,this.id=n.id||Zo("Model"),this.lastLogTime=0,this.initialize(n)}return Object(oe.a)(e,[{key:"initialize",value:function(e){this.props={},e.shaderCache&&Do.warn("ShaderCache property is deprecated")(),this.programManager=e.programManager||Nl.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,n=void 0===t?null:t,r=e.vs,i=e.fs,a=e.modules,o=e.defines,s=e.inject,c=e.varyings,u=e.bufferMode;this.programProps={program:n,vs:r,fs:i,modules:a,defines:o,inject:s,varyings:c,bufferMode:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._checkProgram(),this._setBaseModelProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings)))}},{key:"setProps",value:function(e){this._setBaseModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();var t;this._managedProgram&&this.programManager.release(this.program),this.vertexArray.delete(),t=this.id,delete rh[t],Ja.a.deleteItem("luma.gl",t)}},{key:"isAnimated",value:function(){return this.animated}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){this.programProps=Object.assign({},e),this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({},e),sh(this.id,e),e=this._extractAnimatedUniforms(e),Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return Hs(this.program.gl,e),this}},{key:"drawGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t=e.moduleSettings,n=void 0===t?null:t,r=e.framebuffer,i=e.uniforms,a=void 0===i?{}:i,o=e.attributes,s=void 0===o?{}:o,c=e.transformFeedback,u=void 0===c?this.transformFeedback:c,l=e.parameters,h=void 0===l?{}:l,f=e.vertexArray,d=void 0===f?this.vertexArray:f,p=e.animationProps;ih(this),this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(a),this._refreshAnimationProps(p);var v=this._logDrawCallStart(2),g=this.vertexArray.getDrawParams(this.props);g.isInstanced&&!this.isInstanced&&Do.warn("Found instanced attributes on non-instanced model",this.id)();var m=g.isIndexed,b=g.indexType,y=g.indexOffset,w=this.isInstanced,O=this.instanceCount,_=function(){},j=this.props,k=j.onBeforeRender,x=void 0===k?_:k,E=j.onAfterRender,P=void 0===E?_:E;x(),this._timerQueryStart(),this.program.setUniforms(this.uniforms);var S=this.program.draw(Object.assign({},e,{logPriority:v,uniforms:null,framebuffer:r,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:d,transformFeedback:u,isIndexed:m,indexType:b,isInstanced:w,instanceCount:O,offset:m?y:0}));return this._timerQueryEnd(),P(),this._logDrawCallEnd(v,d,r),S}},{key:"_setBaseModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&Fl.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&Do.warn("GPU timer not supported")()),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"_checkProgram",value:function(){var e=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(e){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var n=this.programProps,r=n.vs,i=void 0===r?Yl:r,a=n.fs,o=void 0===a?Zl:a,s=n.modules,c=n.inject,u=n.defines,l=n.varyings,h=n.bufferMode;t=this.programManager.get({vs:i,fs:o,modules:s,inject:c,defines:u,varyings:l,bufferMode:h}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Uo(t instanceof Dl,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new ql(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_refreshAnimationProps",value:function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function(e){if(!this.animated)return{};var t={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];t[n]=r(e)}return t}},{key:"_extractAnimatedUniforms",value:function(e){var t=!1;for(var n in e){var r=e[n];"function"==typeof r?(this.animatedUniforms[n]=r,t=!0):delete this.animatedUniforms[n]}if(this.animated=!$o(this.animatedUniforms),!t)return e;var i={};for(var a in e)this.animatedUniforms[a]||(i[a]=e[a]);return i}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new Fl(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,Do.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(Do.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),Do.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Do.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,r){if(void 0!==e){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=Ql(t,t.elements,null,r));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var c="".concat(o,": ").concat(s.name),u=t.accessors[s.location];u&&(c="".concat(o,": ").concat(Jl(s.name,u))),i[c]=Ql(t,a[o],u,r)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=eh({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),o=a.table,s=a.unusedTable,c=a.unusedCount,u=eh({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),l=u.table;u.count>0&&Do.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&Do.log("UNUSED UNIFORMS",Object.keys(s))();var h=function(e){var t={},n="Accessors for ".concat(e.id),r=!0,i=!1,a=void 0;try{for(var o,s=e.attributeInfos[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if(c){var u=nh(c);t["in ".concat(u)]=Object(W.a)({},n,JSON.stringify(c.accessor))}}}catch(m){i=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var l=!0,h=!1,f=void 0;try{for(var d,p=e.varyingInfos[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;if(v){var g=nh(v);t["out ".concat(g)]=Object(W.a)({},n,JSON.stringify(v.accessor))}}}catch(m){h=!0,f=m}finally{try{l||null==p.return||p.return()}finally{if(h)throw f}}return t}(this.vertexArray.configuration);Do.table(e,i)(),Do.table(e,o)(),Do.table(e+1,h)(),function(e,t){if(Ja.a.isReady()&&!Ja.a.throttle("luma.gl:".concat(e.id),1e3)){var n=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,r=Object.assign({},e.uniforms,t);Ja.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}}(this,n),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),Do.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}(),uh=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,t);var r=n.id,i=void 0===r?Zo("model"):r;return Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Su({},n,{id:i})))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"initialize",value:function(e){co(Object(Bt.a)(t.prototype),"initialize",this).call(this,e),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced,this._setModelProps(e),this.geometry={},Uo(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){co(Object(Bt.a)(t.prototype),"setProps",this).call(this,e),this._setModelProps(e)}},{key:"delete",value:function(){co(Object(Bt.a)(t.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return Uo(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return Uo(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){var r={},i=t.indices;for(var a in t.attributes){var o=t.attributes[a],s=Cu(a,n);if("indices"===a)i=o;else if(o.constant)r[s]=o.value;else{var c=o.value,u=Su({},o);delete u.value,r[s]=[new ds(e,c),u],Mu(a,u)}}if(i){var l=i.value||i;Uo(l instanceof Uint16Array||l instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new ds(e,{data:l,target:34963}),h]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($o(e))return this;var t={};for(var n in e){var r=e[n];t[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(e)}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,a=void 0===i?[]:i,o=e.parameters;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,Object(W.a)({},35977,n))),a.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Do.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof ds&&t.delete()}}},{key:"_setAnimationProps",value:function(e){if(this.animated){Uo(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);Object.assign(this.uniforms,t)}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($o(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new du(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}}]),t}(ch),lh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(oe.a)(e,null,[{key:"isSupported",value:function(e){return Wo(e)}}]),Object(oe.a)(e,[{key:"delete",value:function(){var e=this.model,t=this.bufferTransform,n=this.textureTransform;e&&e.delete(),t&&t.delete(),n&&n.delete()}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRenderTarget,n=void 0===t||t,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var e=!1,t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e=e||s.swap()}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}Uo(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,c=s.getData(e);if(c)return c}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.update(e)}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new uh(t,Object.assign({},e,{fs:e.fs||lu({version:vu(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var t=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){t=o.value.updateModelProps(t)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"_buildResourceTransforms",value:function(e,t){(function(e){if(!$o(e.sourceBuffers)||!$o(e.feedbackBuffers)||e.varyings&&e.varyings.length>0)return!0;return!1})(t)&&(this.bufferTransform=new pu(e,t)),function(e){if(!$o(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)return!0;return!1}(t)&&(this.textureTransform=new Pu(e,t)),Uo(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var t=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;t=Object.assign(t,c.getDrawOptions(t))}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}}]),e}();function hh(){}var fh={onStart:hh,onUpdate:hh,onInterrupt:hh,onEnd:hh},dh=function(){function e(t){Object(ae.a)(this,e),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return Object(oe.a)(e,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},fh,e),this._inProgress=!0;var t=this.timeline,n=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:n.duration}),n.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){return!!this._inProgress&&(this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0)}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),e}();function ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ph(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ph(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gh=function(){function e(t){var n=t.gl,r=t.attribute,i=t.timeline;Object(ae.a)(this,e),this.gl=n,this.type="interpolation",this.transition=new dh(i),this.attribute=r,this.attributeInTransition=new ru(n,r.userData),this.currentBufferLayout=r.bufferLayout,this.currentLength=0,this.transform=function(e,t){var n=Zc(t.size);return new lh(e,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var a={byteLength:0,usage:35050};this.buffers=[new ds(n,a),new ds(n,a)]}return Object(oe.a)(e,[{key:"start",value:function(e,t){if(e.duration<=0)this.transition.cancel();else{var n=this.gl,r=this.buffers,i=this.attribute;Kc(r);var a={numInstances:t,attribute:i,fromLength:this.currentLength,fromBufferLayout:this.currentBufferLayout,getData:e.enter},o=!0,s=!1,c=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){Qc(vh({buffer:u.value},a))}}catch(h){s=!0,c=h}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}this.currentBufferLayout=i.bufferLayout,this.currentLength=$c(i,t),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:Yc(n,i)},feedbackBuffers:{vCurrent:r[1]}})}}},{key:"update",value:function(){var e=this.transition.update();if(e){var t=this.transition,n=t.time,r=t.settings,i=r.duration,a=(0,r.easing)(n/i);this.transform.run({uniforms:{time:a}})}return e}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}();function mh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mh(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yh={interpolation:gh,spring:function(){function e(t){var n=t.gl,r=t.attribute,i=t.timeline;Object(ae.a)(this,e),this.gl=n,this.type="spring",this.transition=new dh(i),this.attribute=r,this.attributeInTransition=new ru(n,r.userData),this.currentBufferLayout=r.bufferLayout,this.currentLength=0,this.texture=function(e){return new zs(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(e,t){return new ac(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(W.a)({},36064,t)})}(n,this.texture),this.transform=function(e,t,n){var r=Zc(t.size);return new lh(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var a={byteLength:0,usage:35050};this.buffers=[new ds(n,a),new ds(n,a),new ds(n,a)]}return Object(oe.a)(e,[{key:"start",value:function(e,t){var n=this.gl,r=this.buffers,i=this.attribute,a={numInstances:t,attribute:i,fromLength:this.currentLength,fromBufferLayout:this.currentBufferLayout,getData:e.enter},o=!0,s=!1,c=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){Qc(bh({buffer:u.value},a))}}catch(h){s=!0,c=h}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}this.currentBufferLayout=i.bufferLayout,this.currentLength=$c(i,t),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Yc(n,i)}})}},{key:"update",value:function(){var e=this.buffers,t=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Kc(e),this.attributeInTransition.update({buffer:e[1]}),tc(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}()},wh=function(){function e(t,n){var r=n.id,i=n.timeline;Object(ae.a)(this,e),this.id=r,this.gl=t,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,lh.isSupported(t)?this.isSupported=!0:t&&ws.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(oe.a)(e,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var t=e.attributes,n=e.transitions,r=void 0===n?{}:n,i=e.numInstances;if(this.numInstances=i||1,this.isSupported){for(var a in t){var o=t[a],s=o.getTransitionSetting(r);s&&this._updateAttribute(a,o,s)}for(var c in this.transitions){var u=t[c];u&&u.getTransitionSetting(r)||this._removeTransition(c)}}}},{key:"hasAttribute",value:function(e){var t=this.transitions[e];return t&&t.inProgress}},{key:"getAttributes",value:function(){var e={};for(var t in this.transitions){var n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}var t=this.needsRedraw;return this.needsRedraw=!1,t}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,t,n){var r=this.transitions[e],i=!r||r.type!==n.type;if(i){r&&this._removeTransition(e);var a=yh[n.type];a?this.transitions[e]=new a({attribute:t,timeline:this.timeline,gl:this.gl}):(ws.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}]),e}();function Oh(){}var _h={savedMessages:null,timeStart:null,onLog:function(e){var t=e.level,n=e.message;ws.log(t,n)()},onUpdateStart:function(e){e.level,e.numInstances;_h.savedMessages=[],_h.timeStart=new Date},onUpdate:function(e){e.level;var t=e.message;_h.savedMessages&&_h.savedMessages.push(t)},onUpdateEnd:function(e){var t=e.level,n=e.id,r=e.numInstances,i=Math.round(new Date-_h.timeStart),a="".concat(i,"ms");ws.group(t,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a),{collapsed:!0})();var o=!0,s=!1,c=void 0;try{for(var u,l=_h.savedMessages[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;ws.log(t,h)()}}catch(f){s=!0,c=f}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}ws.groupEnd(t,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a))(),_h.savedMessages=null}},jh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,a=n.stats,o=n.timeline;Object(ae.a)(this,e),this.id=i,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=a,this.attributeTransitionManager=new wh(t,{id:"".concat(i,"-transitions"),timeline:o}),Object.seal(this)}return Object(oe.a)(e,null,[{key:"setDefaultLogFunctions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,n=e.onUpdateStart,r=e.onUpdate,i=e.onUpdateEnd;void 0!==t&&(_h.onLog=t||Oh),void 0!==n&&(_h.onUpdateStart=n||Oh),void 0!==r&&(_h.onUpdate=r||Oh),void 0!==i&&(_h.onUpdateEnd=i||Oh)}}]),Object(oe.a)(e,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(e,t){this._add(e,t)}},{key:"addInstanced",value:function(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(e,t){var n=this._invalidateTrigger(e,t);_h.onLog({level:3,message:"invalidated attributes ".concat(n," (").concat(e,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(e){for(var t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);_h.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.bufferLayout,i=e.transitions,a=e.props,o=void 0===a?{}:a,s=e.buffers,c=void 0===s?{}:s,u=e.context,l=void 0===u?{}:u,h=!1;for(var f in _h.onUpdateStart({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var d=this.attributes[f];d.setExternalBuffer(c[f]||t.attributes&&t.attributes[f])||d.setConstantValue(o[d.getAccessor()])||d.needsUpdate()&&(h=!0,this._updateAttribute({attribute:d,numInstances:n,bufferLayout:r,data:t,props:o,context:l})),this.needsRedraw|=d.needsRedraw()}h&&_h.onUpdateEnd({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},t=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in t){var a=t[i];a.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=a)}return r}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&ws.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var i in e){var a=e[i],o=this._createAttribute(i,a,n);r[i]=o}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,t,n){var r={id:e,constant:t.constant||!1,isIndexed:t.isIndexed||t.elements,size:t.elements?1:t.size,value:t.value||null,divisor:t.instanced||n.instanced?1:t.divisor};return new ru(this.gl,Object.assign({},t,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={},n=function(n){e.attributes[n].getUpdateTriggers().forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function(e,t){var n=this.attributes,r=this.updateTriggers[e];if(r)r.forEach((function(e){var r=n[e];r&&r.setNeedsUpdate(r.id,t)}));else{var i="invalidating non-existent trigger ".concat(e," for ").concat(this.id,"\n");i+="Valid triggers: ".concat(Object.keys(n).join(", ")),ws.warn(i,r)()}return r}},{key:"_updateAttribute",value:function(e){var t=e.attribute,n=e.numInstances;t.allocate(n)&&_h.onUpdate({level:3,message:"".concat(t.id," allocated ").concat(n),id:this.id});var r=Date.now();if(t.updateBuffer(e)){this.needsRedraw=!0;var i=Math.round(Date.now()-r);_h.onUpdate({level:3,message:"".concat(t.id," updated ").concat(n," in ").concat(i,"ms")})}}}]),e}(),kh=new Map,xh=function(e){if(Ja.a.isReady()&&e.id){var t=kh.get(e.id);t&&t.forEach((function(t,n){!function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)}(e,n,t),"data"===n[0]&&(e.data=Object(s.a)(e.data))}))}},Eh=function(e){Ja.a.isReady()&&Ja.a.listenFor("deck.gl",e)},Ph=function(e){Ja.a.isReady()&&Ja.a.listenFor("init",e)},Sh=function(e){if(Ja.a.isReady()&&e){var t=[e.constructor.layerName];Ja.a.listItem("deck.gl",e.id,{badges:t,links:e.state&&e.state.model?["luma.gl:".concat(e.state.model.id)]:void 0,parent:e.parent?e.parent.id:void 0})}},Th=function(e){if(Ja.a.isReady()&&!Ja.a.throttle("deck.gl:".concat(e.id),1e3)){var t=function(e){var t=[{path:"objects.props",data:e.props}],n=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var r=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:r})}if(e.state.model){e.state.model.setProps({timerQueryEnabled:!0});var i=e.state.model.stats.lastFrameTime;i&&n.push("".concat((1e3*i).toFixed(0),"μs"))}}return t.push({path:"badges",data:n}),t}(e);Ja.a.multiUpdate("deck.gl",e.id,t)}};var Ch=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"_onUpdate",value:function(){var e=this.time,t=this.settings,n=t.fromValue,r=t.toValue,i=t.duration,a=(0,t.easing)(e/i);this._value=Object(Ic.f)(n,r,a)}},{key:"value",get:function(){return this._value}}]),t}(dh);function Mh(e,t,n,r,i){var a=t-e;return(n-t)*i+-a*r+a+t}function Ah(e,t){if(Array.isArray(e)){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rh={interpolation:Ch,spring:function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"_onUpdate",value:function(){var e=this.settings,t=e.fromValue,n=e.toValue,r=e.damping,i=e.stiffness,a=this._prevValue,o=void 0===a?t:a,s=this._currValue,c=void 0===s?t:s,u=function(e,t,n,r,i){if(Array.isArray(n)){for(var a=[],o=0;o<n.length;o++)a[o]=Mh(e[o],t[o],n[o],r,i);return a}return Mh(e,t,n,r,i)}(o,c,n,r,i),l=Ah(u,n),h=Ah(u,c);l<1e-5&&h<1e-5&&(u=n,this.end()),this._prevValue=c,this._currValue=u}},{key:"value",get:function(){return this._currValue}}]),t}(dh)},Ih=function(){function e(t){Object(ae.a)(this,e),this.transitions=new Map,this.timeline=t}return Object(oe.a)(e,[{key:"add",value:function(e,t,n,r){var i=this.transitions;i.has(e)&&(t=i.get(e).value,this.remove(e));if(r=qc(r)){var a=Rh[r.type];if(a){var o=new a(this.timeline);o.start(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lh(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{fromValue:t,toValue:n})),i.set(e,o)}else ws.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(e){var t=this.transitions;t.has(e)&&(t.get(e).cancel(),t.delete(e))}},{key:"update",value:function(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=this.transitions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=Object(we.a)(i.value,2),s=o[0],c=o[1];c.update(),e[s]=c.value,c.inProgress||this.remove(s)}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.transitions.keys()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.remove(a)}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"active",get:function(){return this.transitions.size>0}}]),e}();function Dh(e,t){var n=Fh({newProps:e,oldProps:t,propTypes:Vh(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";var n=null,r=e.dataComparator,i=e._dataDiff;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t),i=!1;return r||(i=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if(Uh(e,t,"all"))return{all:!0}}var n={},r=!1;for(var i in e.updateTriggers){if("all"!==i)Uh(e,t,i)&&(n[i]=!0,r=n)}return r}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:zh(e,t),transitionsChanged:Nh(e,t)}}function Nh(e,t){if(!e.transitions)return null;var n={},r=Vh(e);for(var i in e.transitions){var a=r[i],o=a&&a.type;("number"===o||"color"===o||"array"===o)&&Bh(e[i],t[i],a)&&(n[i]=!0)}return n}function Fh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,a=e.propTypes,o=void 0===a?{}:a,s=e.triggerName,c=void 0===s?"props":s;if(Ya(void 0!==n&&void 0!==t,"compareProps args"),n===t)return null;if("object"!==Object(Xr.a)(t)||null===t)return"".concat(c," changed shallowly");if("object"!==Object(Xr.a)(n)||null===n)return"".concat(c," changed shallowly");for(var u=0,l=Object.keys(t);u<l.length;u++){var h=l[u];if(!(h in i)){if(!(h in n))return"".concat(c,".").concat(h," added");var f=Bh(t[h],n[h],o[h]);if(f)return"".concat(c,".").concat(h," ").concat(f)}}for(var d=0,p=Object.keys(n);d<p.length;d++){var v=p[d];if(!(v in i)){if(!(v in t))return"".concat(c,".").concat(v," dropped");if(!Object.hasOwnProperty.call(t,v)){var g=Bh(t[v],n[v],o[v]);if(g)return"".concat(c,".").concat(v," ").concat(g)}}}return null}function Bh(e,t,n){var r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||!(r=e&&t&&e.equals)||r.call(e,t)?r||t===e?null:"changed shallowly":"changed deeply"}function zh(e,t){if(null===t)return"oldProps is null, initial diff";var n=t.extensions,r=e.extensions;if(r===n)return!1;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Uh(e,t,n){var r=e.updateTriggers[n];r=null==r?{}:r;var i=t.updateTriggers[n];return Fh({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function Vh(e){var t=e._component,n=t&&t.constructor;return n?n._propTypes:{}}function Wh(e,t){if(!t)return e;var n=Object.assign({},e,t);if("defines"in t&&(n.defines=Object.assign({},e.defines,t.defines)),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((function(e){return"project64"===e||"project64"===e.name})))){var r=n.modules.findIndex((function(e){return"project32"===e||"project32"===e.name}));r>=0&&n.modules.splice(r,1)}return"inject"in t&&(n.inject=Object.assign({},e.inject,t.inject)),n}var Gh={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0},Hh=[0,0,0,0],Xh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],qh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Yh=[0,0,0],Zh=[0,0,0],Kh=Xa((function(e){var t=e.viewport,n=e.devicePixelRatio,r=e.coordinateSystem,i=e.coordinateOrigin,a=e.wrapLongitude,o=t.zoom,s=function(e){var t,n=e.viewport,r=e.coordinateSystem,i=e.coordinateOrigin,a=e.coordinateZoom,o=n.viewMatrixUncentered,s=n.viewMatrix,c=n.projectionMatrix,u=n.viewProjectionMatrix,l=n.cameraPosition,h=function(e){switch(e){case eo:default:return Gh.LNGLAT_AUTO_OFFSET;case to:return Gh.LNG_LAT;case no:case ro:return Gh.METER_OFFSETS;case io:return Gh.LNGLAT_OFFSETS;case ao:return Gh.IDENTITY}}(r),f=i;if(h===Gh.LNGLAT_AUTO_OFFSET)if(a<12)h=Gh.LNG_LAT;else{var d=Math.fround(n.longitude),p=Math.fround(n.latitude);f=[d,p]}h===Gh.IDENTITY&&(f=[Math.fround(n.position[0]),Math.fround(n.position[1])]);switch(f[2]=f[2]||0,h){case Gh.LNG_LAT:t=Hh;break;case Gh.LNGLAT_OFFSETS:case Gh.METER_OFFSETS:case Gh.LNGLAT_AUTO_OFFSET:case Gh.IDENTITY:var v=n.projectPosition(f,Math.pow(2,a));l=[l[0]-v[0],l[1]-v[1],l[2]-v[2]],v[3]=1,t=Ut.b([],v,u),s=o||s,u=Ht.g([],c,s),u=Ht.g([],u,Xh);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:s,viewProjectionMatrix:u,projectionCenter:t,cameraPosCommon:l,shaderCoordinateSystem:h,shaderCoordinateOrigin:f}}({coordinateSystem:r,coordinateOrigin:i,coordinateZoom:o,viewport:t}),c=s.projectionCenter,u=s.viewProjectionMatrix,l=s.cameraPosCommon,h=s.shaderCoordinateSystem,f=s.shaderCoordinateOrigin;Ya(u,"Viewport missing modelViewProjectionMatrix");var d=t.getDistanceScales(),p=[t.width*n,t.height*n],v={project_uCoordinateSystem:h,project_uCenter:c,project_uWrapLongitude:a,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:p,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:d.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:d.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:Yh,project_uScale:t.scale,project_uViewProjectionMatrix:u,project_uCameraPosition:l},g=t.getDistanceScales(f);switch(h){case Gh.METER_OFFSETS:v.project_uCommonUnitsPerWorldUnit=g.pixelsPerMeter,v.project_uCommonUnitsPerWorldUnit2=g.pixelsPerMeter2;break;case Gh.LNGLAT_AUTO_OFFSET:v.project_uCoordinateOrigin=f;case Gh.LNG_LAT:case Gh.LNGLAT_OFFSETS:v.project_uCommonUnitsPerWorldUnit=g.pixelsPerDegree,v.project_uCommonUnitsPerWorldUnit2=g.pixelsPerDegree2;break;case Gh.IDENTITY:v.project_uCoordinateOrigin=f}return v}));function $h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,r=void 0===n?1:n,i=e.modelMatrix,a=void 0===i?null:i,o=e.coordinateSystem,s=void 0===o?eo:o,c=e.coordinateOrigin,u=void 0===c?Zh:c,l=e.wrapLongitude,h=void 0!==l&&l;e.projectionMode,e.positionOrigin;return Ya(t),Object.assign({project_uModelMatrix:a||qh},Kh({viewport:t,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:u,wrapLongitude:h}))}function Qh(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(we.a)(e,3),i=r[0],a=r[1],o=r[2],s=void 0===o?0:o,c=t.projectFlat(e),u=Object(we.a)(c,2),l=u[0],h=u[1],f=n?rn({longitude:i,latitude:a,scale:t.scale}):t.getDistanceScales(),d=s*f.pixelsPerMeter[2];return[l,h,d]}function Jh(e,t){var n=t.viewport,r=t.modelMatrix,i=t.coordinateSystem,a=t.coordinateOrigin,o=t.offsetMode,s=Object(we.a)(e,3),c=s[0],u=s[1],l=s[2];if(r){var h=Ut.b([],[c,u,l,1],r),f=Object(we.a)(h,3);c=f[0],u=f[1],l=f[2]}switch(i){case eo:case to:return Qh([c,u,l],n,o);case io:return Qh([c+a[0],u+a[1],l+(a[2]||0)],n,o);case no:return Qh(an(a,[c,u,l]),n,o);case ao:default:return n.projectPosition([c,u,l])}}function ef(e,t){var n=function(e){var t=Object.assign({},e),n=e.viewport,r=e.coordinateSystem,i=e.coordinateOrigin,a=e.fromCoordinateSystem,o=e.fromCoordinateOrigin;return void 0===a&&(t.fromCoordinateSystem=r),void 0===o&&(t.fromCoordinateOrigin=i),r===eo&&n.zoom>=12&&(t.coordinateSystem=io,t.coordinateOrigin=[Math.fround(n.longitude),Math.fround(n.latitude)]),t}(t),r=n.viewport,i=n.coordinateSystem,a=n.coordinateOrigin,o=n.modelMatrix,s=n.fromCoordinateSystem,c=n.fromCoordinateOrigin;switch(i){case io:case no:var u=Jh(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:c,offsetMode:!0}),l=Qh(a,r,!0);return qt.h(u,u,l),u;case eo:case to:case ao:default:return Jh(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:c,offsetMode:!1})}}var tf="Awaiting state",nf="Matched. State transferred from previous layer",rf="Initialized",af="Discarded. Awaiting garbage collection",of="No longer matched. Awaiting garbage collection",sf="Finalized! Awaiting garbage collection",cf={boolean:{validate:function(e,t){return!0},equal:function(e,t,n){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return ff(e)&&(3===e.length||4===e.length)},equal:function(e,t,n){return uf(e,t)}},accessor:{validate:function(e,t){var n=df(e);return"function"===n||n===df(t.value)},equal:function(e,t,n){return"function"==typeof t||uf(e,t)}},array:{validate:function(e,t){return t.optional&&!e||ff(e)},equal:function(e,t,n){return n.compare?uf(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"==typeof e},equal:function(e,t,n){return!n.compare||e===t}}};function uf(e,t){if(e===t)return!0;if(!ff(e)||!ff(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function lf(e,t){switch(df(t)){case"object":return hf(e,t);case"array":return hf(e,{type:"array",value:t,compare:!1});case"boolean":return hf(e,{type:"boolean",value:t});case"number":return hf(e,{type:"number",value:t});case"function":return hf(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function hf(e,t){return"type"in t?Object.assign({name:e},cf[t.type],t):"value"in t?Object.assign({name:e,type:df(t.value)},t):{name:e,type:"object",value:t}}function ff(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function df(e){return ff(e)?"array":null===e?"null":Object(Xr.a)(e)}function pf(){for(var e=this,t=gf(e.constructor),n=t.defaultProps,r=Object.create(n,{_component:{enumerable:!1,value:e},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(r,arguments[i]);var a=e.constructor.layerName,o=t.deprecatedProps;return vf(a,r,o),vf(a,r.updateTriggers,o),vf(a,r.transitions,o),xh(r),Object.freeze(r),r}function vf(e,t,n){if(t)for(var r in n)if(bf(t,r)){var i="".concat(e||"Layer",": ").concat(r),a=!0,o=!1,s=void 0;try{for(var c,u=n[r][Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;bf(t,l)||(t[l]=t[r])}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}ws.deprecated(i,n[r].join("/"))()}}function gf(e){var t=yf(e,"_mergedDefaultProps");return t?{defaultProps:t,propTypes:yf(e,"_propTypes"),deprecatedProps:yf(e,"_deprecatedProps")}:function(e){var t=e.prototype;if(!t)return{defaultProps:{}};var n=Object.getPrototypeOf(e),r=t&&gf(n)||null,i=function(e){for(var t={},n={},r={},i=0,a=Object.entries(e);i<a.length;i++){var o=Object(we.a)(a[i],2),s=o[0],c=o[1];if(c&&c.deprecatedFor)r[s]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var u=lf(s,c);t[s]=u,n[s]=u.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(yf(e,"defaultProps")||{}),a=Object.assign({},r&&r.propTypes,i.propTypes),o=function(e,t,n,r){var i=Object.create(null);Object.assign(i,t,e);var a=function(e){var t=yf(e,"layerName")||yf(e,"componentName");t||ws.once(0,"".concat(e.name,".componentName not specified"))();return t||e.name}(r);return delete e.id,Object.defineProperties(i,{id:{configurable:!1,writable:!0,value:a}}),function(e,t){var n={},r={_asyncPropDefaultValues:{enumerable:!1,value:n},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var i in t){var a=t[i],o=a.name,s=a.value;a.async&&(n[o]=s,r[o]=mf(o))}Object.defineProperties(e,r)}(i,n),i}(i.defaultProps,r&&r.defaultProps,a,e),s=Object.assign({},r&&r.deprecatedProps,i.deprecatedProps);return e._mergedDefaultProps=o,e._propTypes=a,e._deprecatedProps=s,{propTypes:a,defaultProps:o,deprecatedProps:s}}(e)}function mf(e){return{configurable:!1,enumerable:!0,set:function(t){"string"==typeof t||t instanceof Promise||Ua(t)?this._asyncPropOriginalValues[e]=t:this._asyncPropResolvedValues[e]=t},get:function(){if(this._asyncPropResolvedValues){if(e in this._asyncPropResolvedValues){var t=this._asyncPropResolvedValues[e];return"data"===e?t||this._asyncPropDefaultValues[e]:t}if(e in this._asyncPropOriginalValues){var n=this._component&&this._component.internalState;if(n&&n.hasAsyncProp(e))return n.getAsyncProp(e)}}return this._asyncPropDefaultValues[e]}}}function bf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yf(e,t){return bf(e,t)&&e[t]}function wf(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Of(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Of(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(Of=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Of(e)}var _f=Object.freeze({}),jf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(ae.a)(this,e),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=_f,this.oldAsyncProps=null}var t;return Object(oe.a)(e,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}},{key:"setAsyncProps",value:function(e){var t=e._asyncPropResolvedValues||{},n=e._asyncPropOriginalValues||e,r=e._asyncPropDefaultValues||{};for(var i in t){var a=t[i];this._createAsyncPropData(i,a,r[i]),this._updateAsyncProp(i,a)}for(var o in n){var s=n[o];this._createAsyncPropData(o,s,r[o]),this._updateAsyncProp(o,s)}}},{key:"_updateAsyncProp",value:function(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var n=this.layer&&this.layer.props.fetch;n&&(t=n(t,{propName:e,layer:this.layer}))}t instanceof Promise?this._watchPromise(e,t):Ua(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function(e,t){var n=this.asyncProps[e];return t!==n.lastValue&&(n.lastValue=t,!0)}},{key:"_setPropValue",value:function(e,t){var n=this.asyncProps[e];n.value=t,n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,t,n){var r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&(Ya(void 0!==t),this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function(e,t){var n=this,r=this.asyncProps[e];r.pendingLoadCount++;var i=r.pendingLoadCount;t.then((function(t){t=n._postProcessValue(e,t),n._setAsyncPropValue(e,t,i);var r=n.layer&&n.layer.props.onDataLoad;"data"===e&&r&&r(t,{propName:e,layer:n.layer})})).catch((function(e){return ws.error(e)()}))}},{key:"_resolveAsyncIterable",value:(t=$s(Zs.a.mark((function e(t,n){var r,i,a,o,s,c,u,l,h,f,d,p;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,n),(r=this.asyncProps[t]).pendingLoadCount++,i=r.pendingLoadCount,a=[],o=0,s=!0,c=!1,e.prev=8,l=wf(n);case 10:return e.next=12,l.next();case 12:return h=e.sent,s=h.done,e.next=16,h.value;case 16:if(f=e.sent,s){e.next=26;break}d=f,a=this._postProcessValue(t,d,a),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:o,endRow:a.length}]}),o=a.length,this._setAsyncPropValue(t,a,i);case 23:s=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),c=!0,u=e.t0;case 32:if(e.prev=32,e.prev=33,s||null==l.return){e.next=37;break}return e.next=37,l.return();case 37:if(e.prev=37,!c){e.next=40;break}throw u;case 40:return e.finish(37);case 41:return e.finish(32);case 42:(p=this.layer&&this.layer.props.onDataLoad)&&p(a,{propName:t,layer:this.layer});case 44:case"end":return e.stop()}}),e,this,[[8,28,32,42],[33,,37,41]])}))),function(e,n){return t.apply(this,arguments)})},{key:"_postProcessValue",value:function(e,t,n){var r=(this.component?this.component.props:{}).dataTransform;return"data"!==e?t:r?r(t,n):n?n.concat(t):t}},{key:"_createAsyncPropData",value:function(e,t,n){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}]),e}(),kf=0,xf=function(){function e(){Object(ae.a)(this,e),this.props=pf.apply(this,arguments),this.id=this.props.id,this.count=kf++,this.lifecycle=tf,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(oe.a)(e,[{key:"clone",value:function(e){var t=this.props,n={};for(var r in t._asyncPropDefaultValues)r in t._asyncPropResolvedValues?n[r]=t._asyncPropResolvedValues[r]:r in t._asyncPropOriginalValues&&(n[r]=t._asyncPropOriginalValues[r]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function(){this.internalState=new jf({})}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();xf.componentName="Component",xf.defaultProps={};var Ef=function(e){function t(e){var n,r=e.attributeManager,i=e.layer;return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,i))).attributeManager=r,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),t}(jf),Pf=function(e){return"undefined"!=typeof Response&&e instanceof Response||e.arrayBuffer&&e.text&&e.json},Sf=function(e){return function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)},Tf="",Cf={};function Mf(e){for(var t in Cf)if(e.startsWith(t)){var n=Cf[t];return e.replace(t,n)}return e+=Tf}function Af(e,t){if(!e)throw new Error(t||"loader assertion failed.")}var Lf=function(){function e(t){Object(ae.a)(this,e),this._fileOrBlob=t,this.bodyUsed=!1}var t,n,r;return Object(oe.a)(e,[{key:"url",value:function(){return this._fileOrBlob.name||""}},{key:"arrayBuffer",value:(r=$s(Zs.a.mark((function e(){var t,n,r;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),n=t.reader,r=t.promise,n.readAsArrayBuffer(this._fileOrBlob),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"text",value:(n=$s(Zs.a.mark((function e(){var t,n,r;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),n=t.reader,r=t.promise,n.readAsText(this._fileOrBlob),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"json",value:(t=$s(Zs.a.mark((function e(){var t;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_getFileReader",value:function(){var e;Af(!this.bodyUsed),this.bodyUsed=!0;var t=new Promise((function(t,n){try{(e=new FileReader).onerror=function(e){return n(new Error(e))},e.onabort=function(){return n(new Error("Read aborted."))},e.onload=function(){return t(e.result)}}catch(r){n(r)}}));return{reader:e,promise:t}}},{key:"headers",get:function(){return new Headers({"Content-Length":this._fileOrBlob.size,"Content-Type":this._fileOrBlob.type})}},{key:"ok",get:function(){return!0}},{key:"status",get:function(){return 200}}]),e}();function Rf(e,t){return Promise.resolve(new Lf(e,t))}function If(e,t){return Df.apply(this,arguments)}function Df(){return(Df=$s(Zs.a.mark((function e(t,n){return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sf(t)){e.next=2;break}return e.abrupt("return",Rf(t,n));case 2:return t=Mf(t),e.abrupt("return",fetch(t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nf(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nf(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bf(e){return!!e&&(Array.isArray(e)&&(e=e[0]),e.parseTextSync||e.parseSync||e.parse||e.loadAndParse||e.parseStream||e.parseInBatches||e.worker)}function zf(e){var t;return Af(Bf(e)),Array.isArray(e)&&(t=e[1],e=Ff({},e=e[0],{options:Ff({},e.options,{},t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),Af(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}var Uf=function(){function e(){Object(ae.a)(this,e)}return Object(oe.a)(e,[{key:"log",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),e}();function Vf(e,t){return null===(e=Object.assign({},t&&t.DEFAULT_OPTIONS,t&&t.defaultOptions,t&&t.options,e,{dataType:"arraybuffer"})).log&&(e.log=new Uf),"log"in e||(e.log=console),e}var Wf=[];function Gf(){return Wf}var Hf=/\.([^.]+)$/,Xf=/^data:(.*?)(;|,)/;function qf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.nothrow,a=void 0!==i&&i;if(t=t||"",e&&!Array.isArray(e)){var o=e;return zf(o),o}Yf(e=e||Gf()),t=t.replace(/\?.*/,"");var s=null;if(!(s=(s=s||Zf(e,t))||Kf(e,n))){if(a)return null;throw new Error("No valid loader found for ".concat(t))}return s}function Yf(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){zf(i.value)}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}function Zf(e,t){var n=t.match(Xf),r=n&&n[1];if(r)return function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.mimeTypes&&s.mimeTypes.includes(t))return s}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}(e,r);var i=(n=t.match(Hf))&&n[1];return i&&function(e,t){t=t.toLowerCase();var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,c=!0,u=!1,l=void 0;try{for(var h,f=s.extensions[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){if(h.value.toLowerCase()===t)return s}}catch(d){u=!0,l=d}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}}}catch(d){r=!0,i=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}(e,i)}function Kf(e,t){if(!t)return null;var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("string"==typeof t){if($f(t,s))return s}else if(ArrayBuffer.isView(t)){if(Qf(t.buffer,t.byteOffset,s))return s}else if(t instanceof ArrayBuffer){if(Qf(t,0,s))return s}}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function $f(e,t){return t.testText&&t.testText(e)}function Qf(e,t,n){switch(Array.isArray(n.test)?"array":Object(Xr.a)(n.test)){case"function":return n.test(e,n);case"string":case"array":return(Array.isArray(n.test)?n.test:[n.test]).some((function(n){return n===function(e,t,n){if(e.byteLength<=t+n)return"";for(var r=new DataView(e),i="",a=0;a<n;a++)i+=String.fromCharCode(r.getUint8(t+a));return i}(e,t,n.length)}));default:return!1}}function Jf(e,t){this.v=e,this.k=t}function ed(e){var t,n;function r(t,n){try{var a=e[t](n),o=a.value,s=o instanceof Jf;Promise.resolve(s?o.v:o).then((function(n){if(s){var c="return"===t?"return":"next";if(!o.k||n.done)return r(c,n);n=e[c](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,o){var s={key:e,arg:i,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}ed.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ed.prototype.next=function(e){return this._invoke("next",e)},ed.prototype.throw=function(e){return this._invoke("throw",e)},ed.prototype.return=function(e){return this._invoke("return",e)};n("23rh");function td(e){return nd.apply(this,arguments)}function nd(){return(nd=$s(Zs.a.mark((function e(t){var n,r;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=12;break}return n="fetch failed ".concat(t.status," "),e.prev=2,e.next=5,t.text();case 5:r=e.sent,n+=r,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:throw new Error(n);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var rd="Cannot convert supplied data type";function id(e,t){return Pf(e)?t=t||e.url:Sf(t)&&(t=t.name),"string"==typeof t?t.replace(/\?.*/,""):t}function ad(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){var n=e.buffer||e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}throw new Error(rd)}function od(e,t){return sd.apply(this,arguments)}function sd(){return(sd=$s(Zs.a.mark((function e(t,n){var r;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,r=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!r){e.next=6;break}return e.abrupt("return",ad(t,n));case 6:if(!Sf(t)){e.next=10;break}return e.next=9,Rf(t);case 9:t=e.sent;case 10:if(!Pf(t)){e.next=23;break}return e.next=13,td(t);case 13:if(!n.binary){e.next=19;break}return e.next=16,t.arrayBuffer();case 16:e.t0=e.sent,e.next=22;break;case 19:return e.next=21,t.text();case 21:e.t0=e.sent;case 22:return e.abrupt("return",e.t0);case 23:throw new Error(rd);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ud(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cd(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fetch:"undefined"!=typeof window&&window.fetch},e)}var ld=n(3);function hd(e){if(ld.toArrayBuffer&&(e=Object(ld.toArrayBuffer)(e)),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return Af(!1)}function fd(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){if(e instanceof ArrayBuffer)n.push(e);else if(e.buffer&&e.buffer instanceof ArrayBuffer)n.push(e.buffer);else if(t&&"object"===Object(Xr.a)(e))for(var r in e)fd(e[r],t,n)}else;return n}var dd=new Map;var pd=0;function vd(e){var t=e.data;(0,e.resolve)(t)}var gd=function(){function e(t){var n=t.source,r=t.name,i=void 0===r?"web-worker-".concat(pd++):r,a=t.onMessage;Object(ae.a)(this,e);var o=function(e){if(Af("string"==typeof e,"worker source"),e.startsWith("url(")&&e.endsWith(")"))return e.match(/^url\((.*)\)$/)[1];var t=dd.get(e);if(!t){var n=new Blob([e],{type:"application/javascript"});t=URL.createObjectURL(n),dd.set(e,t)}return t}(n);this.worker=new Worker(o,{name:i}),this.name=i,this.onMessage=a||vd}var t;return Object(oe.a)(e,[{key:"process",value:(t=$s(Zs.a.mark((function e(t){var n=this;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.worker.onmessage=function(t){return n.onMessage({worker:n.worker,data:t.data,resolve:e,reject:r})},n.worker.onerror=function(e){return r(e)};var i=fd(t);n.worker.postMessage(t,i)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}(),md=function(){function e(t){var n=t.source,r=t.name,i=void 0===r?"unnamed":r,a=t.maxConcurrency,o=void 0===a?1:a,s=t.onMessage,c=t.onDebug,u=void 0===c?function(){}:c;Object(ae.a)(this,e),this.source=n,this.name=i,this.maxConcurrency=o,this.onMessage=s,this.onDebug=u,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1}var t;return Object(oe.a)(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"process",value:(t=$s(Zs.a.mark((function e(t,n){var r=this;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){r.jobQueue.push({data:t,jobName:n,resolve:e,reject:i}),r._startQueuedJob()})));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"_startQueuedJob",value:function(){var e=this;if(this.jobQueue.length){var t=this._getAvailableWorker();if(t){var n=this.jobQueue.shift();this.onDebug({message:"processing",worker:t.name,job:n.jobName,backlog:this.jobQueue.length}),t.process(n.data).then((function(e){return n.resolve(e)})).catch((function(e){return n.reject(e)})).then((function(){return e._onWorkerDone(t)}))}}}},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.idleQueue.push(e),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase(),"-worker-").concat(this.count,"-of-").concat(this.maxConcurrency);return new gd({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),e}(),bd=function(){function e(t){var n=t.maxConcurrency,r=void 0===n?5:n,i=t.onMessage,a=t.onDebug,o=void 0===a?function(){}:a;Object(ae.a)(this,e),this.maxConcurrency=r,this.onMessage=i,this.onDebug=o,this.workerPools=new Map}var t;return Object(oe.a)(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug)}},{key:"destroy",value:function(){this.workerPools.forEach((function(e){return e.destroy()}))}},{key:"process",value:(t=$s(Zs.a.mark((function e(t,n,r){var i;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._getWorkerPool(t,n),e.abrupt("return",i.process(r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_getWorkerPool",value:function(e,t){var n=this.workerPools.get(t);return n||(n=new md({source:e,name:t,onMessage:this.onMessage,maxConcurrency:this.maxConcurrency,onDebug:this.onDebug}),this.workerPools.set(t,n)),n}}]),e}(),yd=null;function wd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return e.maxConcurrency&&(t.maxConcurrency=e.maxConcurrency),e.onDebug&&(t.onDebug=e.onDebug),yd||(yd=new bd({onMessage:Od})),yd.setProps(t),yd}function Od(e){return _d.apply(this,arguments)}function _d(){return(_d=$s(Zs.a.mark((function e(t){var n,r,i,a,o;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.worker,r=t.data,i=t.resolve,a=t.reject,e.t0=r.type,e.next="done"===e.t0?4:"process"===e.t0?6:"error"===e.t0?17:19;break;case 4:return i(r.result),e.abrupt("break",19);case 6:return e.prev=6,e.next=9,kd(r.arraybuffer,r.options,r.url);case 9:o=e.sent,n.postMessage({type:"process-done",id:r.id,result:o},fd(o)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),n.postMessage({type:"process-error",id:r.id,message:e.t1.message});case 16:return e.abrupt("break",19);case 17:return a(r.message),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function jd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=wd(r);return r=JSON.parse(JSON.stringify(r)),i.process(e,"loaders.gl-".concat(t),{arraybuffer:hd(n),options:r,source:"loaders.gl",type:"process"})}function kd(e,t,n,r){return xd.apply(this,arguments)}function xd(){return(xd=$s(Zs.a.mark((function e(t,n,r,i){var a,o,s;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!n||Array.isArray(n)||Bf(n)||(i=r,r=n,n=null),r=r||{},a=id(t,i),o=qf(n,a,t),r=Vf(r,o),s=ud({url:a,parse:kd}),e.next=8,Ed(o,t,r,s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ed(e,t,n,r){return Pd.apply(this,arguments)}function Pd(){return(Pd=$s(Zs.a.mark((function e(t,n,r,i){return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,od(n,t);case 2:if(n=e.sent,!t.parseTextSync||"string"!=typeof n){e.next=6;break}return r.dataType="text",e.abrupt("return",t.parseTextSync(n,r,i,t));case 6:if(!t.parse){e.next=10;break}return e.next=9,t.parse(n,r,i,t);case 9:return e.abrupt("return",e.sent);case 10:if(!t.parseSync){e.next=12;break}return e.abrupt("return",t.parseSync(n,r,i,t));case 12:if(!t.worker){e.next=16;break}return e.next=15,jd(t.worker,t.name,n,r,i,t);case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",Af(!1));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sd(){return(Sd=$s(Zs.a.mark((function e(t,n,r){var i,a,o,s;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||Bf(n)||(r=n,n=null),i=Sf(t)?t.name:t,!(a=qf(n,i,null,{nothrow:!0}))){e.next=9;break}if(!a.loadAndParse){e.next=9;break}return o=Vf(r,a),e.next=8,a.loadAndParse(t,o);case 8:return e.abrupt("return",e.sent);case 9:if(!Sf(s=t)&&"string"!=typeof s){e.next=14;break}return e.next=13,If(t,r);case 13:s=e.sent;case 14:return e.abrupt("return",kd(s,n,r,t));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Td=Object.freeze([]),Cd=new Uint8ClampedArray(0),Md={data:{type:"data",value:Td,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(e){return e&&e.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(e,t){return function(e,t,n){return Sd.apply(this,arguments)}(e,t.layer.getLoadOptions())},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:eo,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Ad=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"toString",value:function(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"getFirstObject",value:function(){var e=this.props.data,t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){return i.value}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"project",value:function(e){var t=this.context.viewport,n=un(Jh(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),r=Object(we.a)(n,3),i=r[0],a=r[1],o=r[2];return 2===e.length?[i,a]:[i,a,o]}},{key:"unproject",value:function(e){var t=this.context.viewport;return Ya(Array.isArray(e)),t.unproject(e)}},{key:"projectPosition",value:function(e){return Ya(Array.isArray(e)),ef(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function(e){ws.deprecated("layer.projectFlat","layer.projectPosition")();var t=this.context.viewport;return Ya(Array.isArray(e)),t.projectFlat(e)}},{key:"unprojectFlat",value:function(e){ws.deprecated("layer.unprojectFlat")();var t=this.context.viewport;return Ya(Array.isArray(e)),t.unprojectFlat(e)}},{key:"use64bitPositions",value:function(){return this.props.coordinateSystem===eo||this.props.coordinateSystem===ao}},{key:"onHover",value:function(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}},{key:"onClick",value:function(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ya(e<16777215,"index out of picking color range"),t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function(e){Ya(e instanceof Uint8Array);var t=Object(we.a)(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.props.extensions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=Wh(e,o.getShaders.call(this,o))}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"shouldUpdateState",value:function(e){e.oldProps,e.props,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){e.oldProps,e.props,e.context;var t=e.changeFlags,n=this.getAttributeManager();if(t.dataChanged&&n){var r=t.dataChanged;if(Array.isArray(r)){var i=!0,a=!1,o=void 0;try{for(var s,c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;n.invalidateAll(u)}}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}else n.invalidateAll()}}},{key:"finalizeState",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var a=this.getAttributeManager();a&&a.finalize(),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.draw(e)}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getAttributeManager();n&&("all"===e?(ws.log(1,"updateTriggers invalidating all attributes: ".concat(t))(),n.invalidateAll()):(ws.log(1,"updateTriggers invalidating attribute ".concat(e,": ").concat(t))(),n.invalidate(e)))}},{key:"updateAttributes",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._setModelAttributes(o,e)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e),r=this.getBufferLayout(e);t.update({data:e.data,numInstances:n,bufferLayout:r,props:e,transitions:e.transitions,buffers:e,context:this,ignoreUnknownAttributes:!0});var i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"_updateUniformTransition",value:function(){var e=this.internalState.uniformTransitions;if(e.active){var t=e.update(),n=Object.create(this.props);for(var r in t)Object.defineProperty(n,r,{value:t[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(e,t){var n=t.numInstances,r=t.startRow,i=t.endRow,a=e.value,o=e.size,s=Cd.length/o;if(s<n){var c=new Uint8ClampedArray(n*o);c.set(Cd);for(var u=[],l=s;l<n;l++)this.encodePickingColor(l,u),c[l*o+0]=u[0],c[l*o+1]=u[1],c[l*o+2]=u[2];Cd=c}i=Math.min(i,n),a.set(Cd.subarray(r*o,i*o),r*o)}},{key:"_setModelAttributes",value:function(e,t){var n={},r=e.userData.excludeAttributes||{};for(var i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());e.setAttributes(n)}},{key:"clearPickingColor",value:function(e){var t=this.getAttributeManager().attributes,n=t.pickingColors,r=t.instancePickingColors,i=n||r,a=this.decodePickingColor(e),o=i.getVertexOffset(a),s=i.getVertexOffset(a+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}},{key:"restorePickingColors",value:function(){var e=this.getAttributeManager().attributes,t=e.pickingColors,n=e.instancePickingColors,r=t||n;r.update({value:r.value})}},{key:"getNumInstances",value:function(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Ga(this.props.data)}},{key:"getBufferLayout",value:function(e){return void 0!==(e=e||this.props).bufferLayout?e.bufferLayout:this.state&&void 0!==this.state.bufferLayout?this.state.bufferLayout:null}},{key:"_initialize",value:function(){this._initState(),this.initializeState(this.context);var e=!0,t=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.initializeState.call(this,this.context,a)}}catch(s){t=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState();var o=this.getSingleModel();o&&(o.id=this.props.id,o.program.id="".concat(this.props.id,"-program"))}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function(){var e=this.props,t=this._updateUniformTransition();this.internalState.propsInTransition=t,this.props=t;var n=this._getUpdateParams();if(this.context.gl)this.updateState(n);else try{this.updateState(n)}catch(u){}var r=!0,i=!1,a=void 0;try{for(var o,s=this.props.extensions[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.updateState.call(this,n,c)}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this.isComposite?this._renderLayers(n):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function(){Ya(this.internalState&&this.state),this.finalizeState(this.context);var e,t=!0,n=!1,r=void 0;try{for(var i,a=this.props.extensions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.finalizeState.call(this,o)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}e=this.id,Ja.a.isReady()&&e&&Ja.a.deleteItem("deck.gl",e)}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,a=void 0===i?{}:i,o=e.parameters,s=void 0===o?{}:o;this._updateAttributeTransition();var c=this.props;this.props=this.internalState.propsInTransition;var u=this.props.opacity;a.opacity=Math.pow(u,1/2.2),r&&this.setModuleParameters(r);var l=this.props.getPolygonOffset,h=l&&l(a)||[0,0];s.polygonOffset=h,Ls(this.context.gl,s,(function(){t.draw({moduleParameters:r,uniforms:a,parameters:s,context:t.context})})),this.props=c}},{key:"pickLayer",value:function(e){return this.getPickingInfo(e)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;e.dataChanged&&!n.dataChanged&&(n.dataChanged=e.dataChanged,ws.log(2,(function(){return"dataChanged: ".concat(e.dataChanged," in ").concat(t.id)}))()),e.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&e.updateTriggersChanged?Object.assign({},e.updateTriggersChanged,n.updateTriggersChanged):e.updateTriggersChanged||n.updateTriggersChanged,ws.log(2,(function(){return"updateTriggersChanged: "+"".concat(Object.keys(e.updateTriggersChanged).join(", ")," in ").concat(t.id)}))()),e.propsChanged&&!n.propsChanged&&(n.propsChanged=e.propsChanged,ws.log(2,(function(){return"propsChanged: ".concat(e.propsChanged," in ").concat(t.id)}))()),e.extensionsChanged&&!n.extensionsChanged&&(n.extensionsChanged=e.extensionsChanged,ws.log(2,(function(){return"extensionsChanged: ".concat(e.extensionsChanged," in ").concat(t.id)}))()),e.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=e.viewportChanged,ws.log(3,(function(){return"viewportChanged: ".concat(e.viewportChanged," in ").concat(t.id)}))()),e.stateChanged&&!n.stateChanged&&(n.stateChanged=e.stateChanged,ws.log(2,(function(){return"stateChanged: ".concat(e.stateChanged," in ").concat(t.id)}))());var r=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var e=this.internalState.changeFlags;return"".concat(e.dataChanged?"data ":"").concat(e.propsChanged?"props ":"").concat(e.updateTriggersChanged?"triggers ":"").concat(e.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(e,t){var n=Dh(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,t[i],e[i],e.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(e){var t=Vh(e);for(var n in t){var r=t[n],i=r.validate;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}},{key:"setModuleParameters",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(e);return t=t||r}},{key:"_getAttributeManager",value:function(){return new jh(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){Ya(!this.internalState&&!this.state);var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new Ef({attributeManager:e,layer:this}),this.state={},this.state.attributeManager=e,this.internalState.uniformTransitions=new Ih(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(e){var t=e.state,n=e.internalState;if(Ya(t&&n),this!==e){this.internalState=n,this.internalState.component=this,this.state=t,t.layer=this,this.internalState.setAsyncProps(this.props);var r=!0,i=!1,a=void 0;try{for(var o,s=this.getModels()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.userData.layer=this}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function(e){this.invalidateAttribute(e)}},{key:"setLayerNeedsUpdate",value:function(){ws.deprecated("layer.setLayerNeedsUpdate","layer.setNeedsUpdate")(),this.setNeedsUpdate()}},{key:"setUniforms",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.setUniforms(e)}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.setNeedsRedraw(),ws.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"use64bitProjection",value:function(){return ws.removed("use64bitProjection","Fp64Extension")(),!1}}]),t}(xf);Ad.layerName="Layer",Ad.defaultProps=Md;var Ld=Math.PI/180,Rd=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Id=[0,0,0],Dd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e);var n=t.id,r=void 0===n?null:n,i=t.x,a=void 0===i?0:i,o=t.y,s=void 0===o?0:o,c=t.width,u=void 0===c?1:c,l=t.height,h=void 0===l?1:l;this.id=r||this.constructor.displayName||"viewport",this.x=a,this.y=s,this.width=u||1,this.height=h||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return Object(oe.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Object(Ic.e)(t.projectionMatrix,this.projectionMatrix)&&Object(Ic.e)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),a=un(i,this.pixelProjectionMatrix),o=Object(we.a)(a,2),s=o[0],c=o[1],u=r?c:this.height-c;return 2===e.length?[s,u]:[s,u,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,a=Object(we.a)(e,3),o=a[0],s=a[1],c=a[2],u=r?s:this.height-s,l=i&&i*this.distanceScales.pixelsPerMeter[2],h=ln([o,u,c],this.pixelUnprojectionMatrix,l),f=this.unprojectPosition(h),d=Object(we.a)(f,3),p=d[0],v=d[1],g=d[2];return Number.isFinite(c)?[p,v,g]:Number.isFinite(i)?[p,v,i]:[p,v]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),n=Object(we.a)(t,2);return[n[0],n[1],(e[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),n=Object(we.a)(t,2);return[n[0],n[1],(e[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return tn(e,t);var n=this.distanceScales.pixelsPerMeter;return[e[0]*n[0],e[1]*n[1]]}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return nn(e,t);var n=this.distanceScales.metersPerPixel;return[e[0]*n[0],e[1]*n[1]]}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?rn({longitude:e[0],latitude:e[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.modelMatrix,n=void 0===t?null:t,r=this.viewProjectionMatrix,i=this.pixelProjectionMatrix,a=this.pixelUnprojectionMatrix;n&&(r=Ht.g([],this.viewProjectionMatrix,n),i=Ht.g([],this.pixelProjectionMatrix,n),a=Ht.e([],i));var o=Object.assign({modelViewProjectionMatrix:r,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:i,pixelUnprojectionMatrix:a,width:this.width,height:this.height,scale:this.scale});return o}},{key:"containsPixel",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,a=e.height,o=void 0===a?1:a;return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+o}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var e=this.projectionProps,t=e.near,n=e.far,r=e.fovyRadians,i=e.aspect;return Object.assign(this._frustumPlanes,function(e){var t=e.aspect,n=e.near,r=e.far,i=e.fovyRadians,a=e.position,o=e.direction,s=e.up,c=e.right;Fc.copy(o);var u=1/Fc.len();Fc.normalize(),Nc.copy(a),Bc.copy(s).normalize(),zc.copy(c).normalize();var l=2*Math.tan(i/2)*n,h=l*t;Uc.copy(Fc).scale(n*u).add(Nc),Vc.copy(Fc).scale(r*u).add(Nc);var f=Fc.clone().negate(),d=f.dot(Uc),p={near:{distance:d,normal:f},far:{distance:Fc.dot(Vc),normal:Fc.clone()}};return Wc.copy(zc).scale(.5*h).add(Uc).subtract(Nc).normalize(),f=new Ic.b(Bc).cross(Wc),d=Nc.dot(f),p.right={normal:f,distance:d},Wc.copy(zc).scale(.5*-h).add(Uc).subtract(Nc).normalize(),f=new Ic.b(Wc).cross(Bc),d=Nc.dot(f),p.left={normal:f,distance:d},Wc.copy(Bc).scale(.5*l).add(Uc).subtract(Nc).normalize(),f=new Ic.b(Wc).cross(zc),d=Nc.dot(f),p.top={normal:f,distance:d},Wc.copy(Bc).scale(.5*-l).add(Uc).subtract(Nc).normalize(),f=new Ic.b(zc).cross(Wc),d=Nc.dot(f),p.bottom={normal:f,distance:d},p}({aspect:i,near:t,far:n,fovyRadians:r,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(e){var t=e.orthographic,n=e.fovyRadians,r=e.aspect,i=e.focalDistance,a=e.near,o=e.far;return Ya(Number.isFinite(n)),t?(new Ic.a).orthographic({fovy:n,aspect:r,focalDistance:i,near:a,far:o}):(new Ic.a).perspective({fovy:n,aspect:r,near:a,far:o})}},{key:"_initViewMatrix",value:function(e){var t=e.viewMatrix,n=void 0===t?Rd:t,r=e.longitude,i=void 0===r?null:r,a=e.latitude,o=void 0===a?null:a,s=e.zoom,c=void 0===s?null:s,u=e.position,l=void 0===u?null:u,h=e.modelMatrix,f=void 0===h?null:h,d=e.focalDistance,p=void 0===d?1:d,v=e.distanceScales,g=void 0===v?null:v;this.isGeospatial=Number.isFinite(o)&&Number.isFinite(i),this.zoom=c,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function(e){var t=e.latitude;return Yt(Number.isFinite(t)),en(4003e4*Math.cos(t*$t))-9}({latitude:o})+Math.log2(p):0);var m=Math.pow(2,this.zoom);this.scale=m,this.distanceScales=this.isGeospatial?rn({latitude:o,longitude:i,scale:this.scale}):g||{pixelsPerMeter:[m,m,m],metersPerPixel:[1/m,1/m,1/m]},this.focalDistance=p,this.distanceScales.metersPerPixel=new Ic.b(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new Ic.b(this.distanceScales.pixelsPerMeter),this.position=Id,this.meterOffset=Id,l&&(this.position=l,this.modelMatrix=f,this.meterOffset=f?f.transformVector(l):l),this.isGeospatial?(this.longitude=i,this.latitude=o,this.center=this._getCenterInWorld({longitude:i,latitude:o}),this.viewMatrixUncentered=Ht.n([],n,[1,-1,1])):(this.center=l?this.projectPosition(l):[0,0,0],this.viewMatrixUncentered=n),this.viewMatrix=(new Ic.a).multiplyRight(this.viewMatrixUncentered).translate(new Ic.b(this.center||Id).negate())}},{key:"_getCenterInWorld",value:function(e){var t=e.longitude,n=e.latitude,r=this.meterOffset,i=this.scale,a=this.distanceScales,o=this.projectFlat([t,n],i),s=new Ic.b(o[0],o[1],0);if(r){var c=new Ic.b(r).scale(a.pixelsPerMeter);s.add(c)}return s}},{key:"_initProjectionMatrix",value:function(e){var t=e.projectionMatrix,n=void 0===t?null:t,r=e.orthographic,i=void 0!==r&&r,a=e.fovyRadians,o=e.fovyDegrees,s=e.fovy,c=e.near,u=void 0===c?.1:c,l=e.far,h=void 0===l?1e3:l,f=e.focalDistance,d=void 0===f?1:f,p=e.orthographicFocalDistance,v=a||(o||s||75)*Ld;this.projectionProps={orthographic:i,fovyRadians:v,aspect:this.width/this.height,focalDistance:p||d,near:u,far:h},this.projectionMatrix=n||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ht.g(e,e,this.projectionMatrix),Ht.g(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=Ht.e([],this.viewMatrix)||this.viewMatrix;var t,n,r,i=(t={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},n=t.viewMatrix,{eye:[(r=t.viewMatrixInverse)[12],r[13],r[14]],direction:[-n[2],-n[6],-n[10]],up:[n[1],n[5],n[9]],right:[n[0],n[4],n[8]]}),a=i.eye,o=i.direction,s=i.up,c=i.right;this.cameraPosition=a,this.cameraDirection=o,this.cameraUp=s,this.cameraRight=c;var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ht.n(u,u,[this.width/2,-this.height/2,1]),Ht.o(u,u,[1,-1,0]),Ht.g(l,u,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=u,this.pixelUnprojectionMatrix=Ht.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ws.warn("Pixel project matrix not invertible")()}}]),e}();Dd.displayName="Viewport";var Nd={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Fd="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Bd={name:"lights",vs:Fd,fs:Fd,getUniforms:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zd;if("lightSources"in t){var n=t.lightSources||{},r=n.ambientLight,i=n.pointLights,a=n.directionalLights,o=r||i&&i.length>0||a&&a.length>0;return o?Object.assign({},Vd({ambientLight:r,pointLights:i,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var s={pointLights:[],directionalLights:[]},c=!0,u=!1,l=void 0;try{for(var h,f=(t.lights||[])[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;switch(d.type){case"ambient":s.ambientLight=d;break;case"directional":s.directionalLights.push(d);break;case"point":s.pointLights.push(d)}}}catch(p){u=!0,l=p}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}return e({lightSources:s})}return{}},defines:{MAX_LIGHTS:3}},zd={};function Ud(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?[0,0,0]:t,r=e.intensity,i=void 0===r?1:r;return n.map((function(e){return e*i/255}))}function Vd(e){var t=e.ambientLight,n=e.pointLights,r=void 0===n?[]:n,i=e.directionalLights,a=void 0===i?[]:i,o={};return o["lighting_uAmbientLight.color"]=t?Ud(t):[0,0,0],r.forEach((function(e,t){o["lighting_uPointLight[".concat(t,"].color")]=Ud(e),o["lighting_uPointLight[".concat(t,"].position")]=e.position,o["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation})),o.lighting_uPointLightCount=r.length,a.forEach((function(e,t){o["lighting_uDirectionalLight[".concat(t,"].color")]=Ud(e),o["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),o.lighting_uDirectionalLightCount=a.length,o}var Wd="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",Gd={name:"gouraud-lighting",dependencies:[Bd],vs:Wd,defines:{LIGHTING_VERTEX:1},getUniforms:Yd},Hd={name:"phong-lighting",dependencies:[Bd],fs:Wd,defines:{LIGHTING_FRAGMENT:1},getUniforms:Yd},Xd={};function qd(e){var t={};return t.lighting_uAmbient=e.ambient,t.lighting_uDiffuse=e.diffuse,t.lighting_uShininess=e.shininess,t.lighting_uSpecularColor=e.specularColor.map((function(e){return e/255})),t}function Yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xd;if(!("material"in e))return{};var t=e.material;return t?qd(t):{lighting_uEnabled:!1}}var Zd={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var Kd={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zd,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var n=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}},$d={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n} geometry;\n",fs:"\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n"},Qd=Object.keys(Gh).map((function(e){return"const float COORDINATE_SYSTEM_".concat(e," = ").concat(Gh[e],".;")})).join(""),Jd="".concat(Qd,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return vec4(\n      project_mercator_(position_world.xy) * WORLD_SCALE * project_uScale,\n      project_size(position_world.z),\n      position_world.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    float X = position_world.x - project_uCoordinateOrigin.x;\n    float Y = position_world.y - project_uCoordinateOrigin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position_world.z, position_world.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position_world);\n  }\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_IDENTITY) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64xyLow, 0.0, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters);\n}\nfloat project_pixel_size(float pixels) {\n  return pixels;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels;\n}\nfloat project_scale(float meters) {\n  return project_size(meters);\n}\nvec2 project_scale(vec2 meters) {\n  return project_size(meters);\n}\nvec3 project_scale(vec3 meters) {\n  return project_size(meters);\n}\nvec4 project_scale(vec4 meters) {\n  return project_size(meters);\n}\nvec4 project_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position);\n}\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\n}\n"),ep={};var tp={name:"project",dependencies:[Nd],vs:Jd,getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ep;return e.viewport?$h(e):{}},deprecations:[{type:"function",old:"project_scale",new:"project_size"},{type:"function",old:"project_to_clipspace",new:"project_common_position_to_clipspace"},{type:"function",old:"project_pixel_to_clipspace",new:"project_pixel_size_to_clipspace"}]},np={name:"project32",dependencies:[tp],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\n}\n"},rp=[$d,tp],ip=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],ap={picking:[{hook:"fs:DECKGL_FILTER_COLOR",order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n  "}]};function op(e){var t=Nl.getDefaultProgramManager(e),n=!0,r=!1,i=void 0;try{for(var a,o=rp[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.addDefaultModule(s)}}catch(O){r=!0,i=O}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var c=!0,u=!1,l=void 0;try{for(var h,f=ip[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;t.addShaderHook(d)}}catch(O){u=!0,l=O}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}for(var p in ap){var v=!0,g=!1,m=void 0;try{for(var b,y=ap[p][Symbol.iterator]();!(v=(b=y.next()).done);v=!0){var w=b.value;t.addModuleInjection(p,w)}}catch(O){g=!0,m=O}finally{try{v||null==y.return||y.return()}finally{if(g)throw m}}}return t}var sp=Object.seal({layerManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),cp=function(e){return e instanceof Ad?"".concat(e):e?"invalid":"null"},up=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,i=n.stats,a=n.viewport,o=void 0===a?null:a,s=n.timeline,c=void 0===s?null:s;Object(ae.a)(this,e),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},sp,{layerManager:this,deck:r,gl:t,programManager:t&&op(t),stats:i||new Bo({id:"deck.gl"}),viewport:o||new Dd({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:c||new $a}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),Ph(this._initSeer),Eh(this._editSeer)}return Object(oe.a)(e,[{key:"finalize",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this._finalizeLayer(a)}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}Ja.a.removeListener(this._initSeer),Ja.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter((function(e){return n.find((function(t){return 0===e.id.indexOf(t)}))})):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers)}},{key:"setLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&e===this.lastRenderedLayers)return ws.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=e,e=Ia(e,{filter:Boolean});var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.context=this.context}}catch(h){r=!0,i=h}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var c=this._updateLayers({oldLayers:this.layers,newLayers:e}),u=c.error,l=c.generatedLayers;if(this.layers=l,u)throw u;return this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();if(e){this.setNeedsRedraw("updating layers: ".concat(e));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"_checkIfNeedsRedraw",value:function(e){var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value.getNeedsRedraw(e);t=t||s}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"activateViewport",value:function(e){var t=this.context.viewport;if(!t||!e.equals(t)){ws.log(4,"Viewport changed",e)(),this.context.viewport=e;var n=!0,r=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(s)}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return Ya(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,n=e.newLayers,r={},i=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;r[u.id]?ws.warn("Multiple old layers with same id ".concat(cp(u)))():r[u.id]=u}}catch(d){a=!0,o=d}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}var l=[],h=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:l}),f=this._finalizeOldLayers(r);return this._needsUpdate=l.some((function(e){return e.hasUniformTransition()})),{error:h||f,generatedLayers:l}}},{key:"_updateSublayersRecursively",value:function(e){var t=e.newLayers,n=e.oldLayerMap,r=e.generatedLayers,i=null,a=!0,o=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;l.context=this.context;var h=n[l.id];null===h&&ws.warn("Multiple new layers with same id ".concat(cp(l)))(),n[l.id]=null;var f=null;try{if(this._debug&&h!==l&&l.validateProps(),h){this._transferLayerState(h,l);var d=this._updateLayer(l);i=i||d,Th(l)}else{var p=this._initializeLayer(l);i=i||p,Sh(l)}r.push(l),f=l.isComposite&&l.getSubLayers()}catch(p){ws.warn("error during matching of ".concat(cp(l)),p)(),i=i||p}if(f){var v=this._updateSublayersRecursively({newLayers:f,oldLayerMap:n,generatedLayers:r});i=i||v}}}catch(p){o=!0,s=p}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var n in e){var r=e[n];r&&(t=t||this._finalizeLayer(r))}return t}},{key:"_initializeLayer",value:function(e){ws.log(2,"initializing ".concat(cp(e)))();var t=null;try{e._initialize(),e.lifecycle=rf}catch(s){ws.warn("error while initializing ".concat(cp(e),"\n"),s)(),t=t||s}e.internalState.layer=e;var n=!0,r=!1,i=void 0;try{for(var a,o=e.getModels()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.userData.layer=e}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=nf,t!==e?(ws.log(4,"matched ".concat(cp(t)),e,"->",t)(),e.lifecycle=af):ws.log(4,"Matching layer is unchanged ".concat(t.id))()}},{key:"_updateLayer",value:function(e){ws.log(4,"updating ".concat(e," because: ").concat(e.printChangeFlags()))();var t=null;try{e._update()}catch(n){ws.warn("error during update of ".concat(cp(e)),n)(),t=n}return t}},{key:"_finalizeLayer",value:function(e){Ya(e.lifecycle!==of),e.lifecycle=of;var t=null;this.setNeedsRedraw("finalized ".concat(cp(e)));try{e._finalize()}catch(n){ws.warn("error during finalization of ".concat(cp(e)),n)(),t=n}return e.lifecycle=sf,ws.log(2,"finalizing ".concat(cp(e)))(),t}},{key:"_initSeer",value:function(){this.layers.forEach((function(e){Sh(e),Th(e)}))}},{key:"_editSeer",value:function(e){var t,n,r;"edit"===e.type&&"props"===e.valuePath[0]&&(t=e.itemKey,n=e.valuePath.slice(1),r=e.value,Ja.a.isReady()&&(kh.has(t)||kh.set(t,new Map),kh.get(t).set(n,r)),this.updateLayers())}}]),e}();function lp(e,t){return e===t||Object.keys(e).every((function(n){return Array.isArray(e[n])&&Array.isArray(t[n])?lp(e[n],t[n]):e[n]===t[n]}))}var hp=/([0-9]+\.?[0-9]*)(%|px)/;function fp(e){switch(Object(Xr.a)(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(hp);if(t&&t.length>=3){var n="%"===t[2],r=parseFloat(t[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function dp(e,t){return e.relative?Math.round(e.position*t):e.position}var pp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e);var n=t.id,r=void 0===n?null:n,i=t.x,a=void 0===i?0:i,o=t.y,s=void 0===o?0:o,c=t.width,u=void 0===c?"100%":c,l=t.height,h=void 0===l?"100%":l,f=t.projectionMatrix,d=void 0===f?null:f,p=t.fovy,v=void 0===p?50:p,g=t.near,m=void 0===g?.1:g,b=t.far,y=void 0===b?1e3:b,w=t.modelMatrix,O=void 0===w?null:w,_=t.viewportInstance,j=void 0===_?null:_,k=t.type,x=void 0===k?Dd:k;Ya(!j||j instanceof Dd),this.viewportInstance=j,this.id=r||this.constructor.displayName||"view",this.type=x,this.props=Object.assign({},t,{id:this.id,projectionMatrix:d,fovy:v,near:m,far:y,modelMatrix:O}),this._parseDimensions({x:a,y:s,width:u,height:h}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(oe.a)(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):lp(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,n=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:t,height:n}),a=Object.assign({viewState:r},r,this.props,i);return this._getViewport(a)}},{key:"getViewStateId",value:function(){switch(Object(Xr.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===Object(Xr.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var n in this.props.viewState)"id"!==n&&(t[n]=this.props.viewState[n]);return t}return e}},{key:"getDimensions",value:function(e){var t=e.width,n=e.height;return{x:dp(this._x,t),y:dp(this._y,n),width:dp(this._width,t),height:dp(this._height,n)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._x=fp(t),this._y=fp(n),this._width=fp(r),this._height=fp(i)}}]),e}(),vp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractiveStateChange:t.onInteractiveStateChange},Object.seal(this),this.setProps(t)}return Object(oe.a)(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var t=this.controllers[e];t&&t.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter((function(t){return t.containsPixel(e)})):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach((function(t){e[t.id]=t})),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find((function(t){return t.id===e})):e}},{key:"getViewState",value:function(e){var t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var n=this.getViewports(),r={x:e[0],y:e[1]},i=n.length-1;i>=0;--i){var a=n[i];if(a.containsPixel(r)){var o=e.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){Ya(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=Ia(e,{filter:Boolean}).map((function(e){return e instanceof Dd?new pp({viewportInstance:e}):e})),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!lp(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ws.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e){return new(0,e.type)(Object.assign({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function(e,t,n,r){if(e.controller){var i=Object.assign({},e.controller,t,{id:e.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var a=n[i],o=this.getViewState(a),s=a.makeViewport({width:e,height:t,viewState:o});this.controllers[a.id]=this._updateController(a,o,s,r[a.id]),this._viewports.unshift(s)}for(var c in r)r[c]&&!this.controllers[c]&&r[c].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach((function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)}))}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some((function(n,r){return!e[r].equals(t[r])}))}}]),e}(),gp="Illegal argument to WebMercatorViewport",mp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,t);var r=n.latitude,i=void 0===r?0:r,a=n.longitude,o=void 0===a?0:a,s=n.zoom,c=void 0===s?11:s,u=n.pitch,l=void 0===u?0:u,h=n.bearing,f=void 0===h?0:h,d=n.nearZMultiplier,p=void 0===d?.1:d,v=n.farZMultiplier,g=void 0===v?10:v,m=n.orthographic,b=void 0!==m&&m,y=n.width,w=n.height,O=n.altitude,_=void 0===O?1.5:O,j=sn({width:y=y||1,height:w=w||1,pitch:l,altitude:_=Math.max(.75,_),nearZMultiplier:p,farZMultiplier:g}),k=j.fov,x=j.aspect,E=j.focalDistance,P=j.near,S=j.far,T=on({height:w,pitch:l,bearing:f,altitude:_}),C=Object.assign({},n,{width:y,height:w,viewMatrix:T,longitude:o,latitude:i,zoom:c,orthographic:b,fovyRadians:k,aspect:x,orthographicFocalDistance:E,near:P,far:S});return(e=Object(Ft.a)(this,Object(Bt.a)(t).call(this,C))).latitude=i,e.longitude=o,e.zoom=c,e.pitch=l,e.bearing=f,e.altitude=_,e.orthographic=b,e.metersToLngLatDelta=e.metersToLngLatDelta.bind(Object(et.a)(e)),e.lngLatDeltaToMeters=e.lngLatDeltaToMeters.bind(Object(et.a)(e)),Object.freeze(Object(et.a)(e)),e}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"metersToLngLatDelta",value:function(e){var t=Object(we.a)(e,3),n=t[0],r=t[1],i=t[2],a=void 0===i?0:i;Ya(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(a),gp);var o=this.distanceScales,s=o.pixelsPerMeter,c=o.degreesPerPixel,u=n*s[0]*c[0],l=r*s[1]*c[1];return 2===e.length?[u,l]:[u,l,a]}},{key:"lngLatDeltaToMeters",value:function(e){var t=Object(we.a)(e,3),n=t[0],r=t[1],i=t[2],a=void 0===i?0:i;Ya(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(a),gp);var o=this.distanceScales,s=o.pixelsPerDegree,c=o.metersPerPixel,u=n*s[0]*c[0],l=r*s[1]*c[1];return 2===e.length?[u,l]:[u,l,a]}},{key:"addMetersToLngLat",value:function(e,t){return an(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=ln(e.pos,this.pixelUnprojectionMatrix),r=this.projectFlat(t),i=Xt.a([],r,Xt.d([],n)),a=Xt.a([],this.center,i);return this.unprojectFlat(a)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=fn(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,s=a.latitude,c=a.zoom;return new t({width:r,height:i,longitude:o,latitude:s,zoom:c})}}]),t}(Dd);mp.displayName="WebMercatorViewport";var bp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var n=t,r=n.compare,i=n.extract,a=n.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=a}return Object(oe.a)(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=(this._propsToCompare||Object.keys(t))[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!(s in e)||!(s in t)||!Object(Ic.e)(e[s],t[s]))return!1}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(e,t){var n;if(this._propsToExtract){var r={},i={},a=!0,o=!1,s=void 0;try{for(var c,u=this._propsToExtract[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;r[l]=e[l],i[l]=t[l]}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}n={start:r,end:i}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(e,t,n){Ya(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach((function(t){var n=e[t];Ya(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}]),e}(),yp=["longitude","latitude","zoom","bearing","pitch"],wp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yp;return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).call(this,e))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"interpolateProps",value:function(e,t,n){var r={};for(var i in t)r[i]=Object(Ic.f)(e[i],t[i],n);return r}}]),t}(bp),Op=function(){},_p=1,jp=2,kp=3,xp={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new wp,transitionInterruption:_p,onTransitionStart:Op,onTransitionInterrupt:Op,onTransitionEnd:Op},Ep=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),Ya(t),this.ControllerState=t,this.props=Object.assign({},xp,n),this.propsInTransition=null,this.transition=new dh(n.timeline),this.onViewStateChange=n.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(oe.a)(e,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var t=!1,n=this.props;if(e=Object.assign({},xp,e),this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){var r=this.transition.settings,i=r.interruption,a=r.endProps,o=Object.assign({},n,i===jp?a:this.propsInTransition||n);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){return e.transitionDuration>0&&e.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this.transition.inProgress?this.transition.settings.interruption===kp||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){Ya(this._isTransitionEnabled(t),"Transition is not enabled");var n=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.transition.start({duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:i.start,endProps:i.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.updateTransition()}},{key:"_onTransitionEnd",value:function(e){var t=this;return function(n){t.propsInTransition=null,e(n)}}},{key:"_onTransitionUpdate",value:function(e){var t=e.time,n=e.settings,r=n.interpolator,i=n.startProps,a=n.endProps,o=n.duration,s=(0,n.easing)(t/o),c=r.interpolateProps(i,a,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,c)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),e}();Ep.defaultProps=xp;var Pp={transitionDuration:0},Sp=["wheel"],Tp=["panstart","panmove","panend"],Cp=["pinchstart","pinchmove","pinchend"],Mp=["doubletap"],Ap=["keydown"],Lp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),Ya(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new Ep(t,n),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Object(oe.a)(e,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){var t=this.ControllerState;switch(this.controllerState=new t(Object.assign({},this.controllerStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=this.controllerStateProps,n=t.x,r=t.y,i=e.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(e,t){var n=this.controllerStateProps,r=n.width,i=n.height;if(t&&t.handled)return!1;var a=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return a&&t&&t.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(e){"onViewportChange"in e&&ws.removed("onViewportChange")(),"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var t=e.scrollZoom,n=void 0===t||t,r=e.dragPan,i=void 0===r||r,a=e.dragRotate,o=void 0===a||a,s=e.doubleClickZoom,c=void 0===s||s,u=e.touchZoom,l=void 0===u||u,h=e.touchRotate,f=void 0!==h&&h,d=e.keyboard,p=void 0===d||d,v=Boolean(this.onViewStateChange);this.toggleEvents(Sp,v&&n),this.toggleEvents(Tp,v&&(i||o)),this.toggleEvents(Cp,v&&(l||f)),this.toggleEvents(Mp,v&&c),this.toggleEvents(Ap,v&&p),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=c,this.touchZoom=l,this.touchRotate=f,this.keyboard=p}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"setOptions",value:function(e){return this.setProps(e)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},e.getViewportProps(),t),i=this.controllerState!==e;if(i){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:a})}Object.assign(this._state,e.getInteractiveState(),n),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,Pp,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){if(!this.isDragging())return!1;var t=this.isFunctionKeyPressed(e)||e.rightButton;return(t=this.invertPan?!t:t)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function(e){var t=this.controllerState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,Pp,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.controllerState.getViewportProps(),i=t/r.width,a=n/r.height,o=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:a});return this.updateViewport(o,Pp,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:t,scale:r});return this.updateViewport(i,Pp,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,Pp,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.controllerState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,a=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-a)/180})}return this.updateViewport(t,Pp,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(e){var t=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.controllerState,i={};switch(e.srcEvent.keyCode){case 189:t=n?r.zoomOut().zoomOut():r.zoomOut(),i.isZooming=!0;break;case 187:t=n?r.zoomIn().zoomIn():r.zoomIn(),i.isZooming=!0;break;case 37:n?(t=r.rotateLeft(),i.isRotating=!0):(t=r.moveLeft(),i.isPanning=!0);break;case 39:n?(t=r.rotateRight(),i.isRotating=!0):(t=r.moveRight(),i.isPanning=!0);break;case 38:n?(t=r.rotateUp(),i.isRotating=!0):(t=r.moveUp(),i.isPanning=!0);break;case 40:n?(t=r.rotateDown(),i.isRotating=!0):(t=r.moveDown(),i.isPanning=!0);break;default:return!1}return this.updateViewport(t,this._getTransitionProps(),i),!0}},{key:"_getTransitionProps",value:function(){return Pp}},{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}}]),e}(),Rp={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},Ip=function(){function e(t){Object(ae.a)(this,e);var n=t.width,r=t.height,i=t.position,a=void 0===i?Rp.position:i;Ya(Number.isFinite(n),"`width` must be supplied"),Ya(Number.isFinite(r),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},t,{position:new Ic.b(a)}))}return Object(oe.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new Ic.c({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(e){return new Ic.c({bearing:e,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),e}(),Dp={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new wp,transitionInterruption:_p},Np={transitionDuration:0},Fp=0,Bp=20,zp=0,Up=60,Vp=0,Wp=0,Gp=1.5,Hp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,o=n.longitude,s=n.zoom,c=n.bearing,u=void 0===c?Wp:c,l=n.pitch,h=void 0===l?Vp:l,f=n.altitude,d=void 0===f?Gp:f,p=n.maxZoom,v=void 0===p?Bp:p,g=n.minZoom,m=void 0===g?Fp:g,b=n.maxPitch,y=void 0===b?Up:b,w=n.minPitch,O=void 0===w?zp:w,_=n.startPanLngLat,j=n.startZoomLngLat,k=n.startBearing,x=n.startPitch,E=n.startZoom;return Object(ae.a)(this,t),Ya(Number.isFinite(o),"`longitude` must be supplied"),Ya(Number.isFinite(a),"`latitude` must be supplied"),Ya(Number.isFinite(s),"`zoom` must be supplied"),(e=Object(Ft.a)(this,Object(Bt.a)(t).call(this,{width:r,height:i,latitude:a,longitude:o,zoom:s,bearing:u,pitch:h,altitude:d,maxZoom:v,minZoom:m,maxPitch:y,minPitch:O})))._interactiveState={startPanLngLat:_,startZoomLngLat:j,startBearing:k,startPitch:x,startZoom:E},e}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),a=Object(we.a)(i,2),o=a[0],s=a[1];return this._getUpdatedState({longitude:o,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var c=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:o,startPitch:s}),u=c.pitch,l=c.bearing;return this._getUpdatedState({bearing:l,pitch:u})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;Ya(r>0,"`scale` must be a positive number");var i=this._interactiveState,a=i.startZoom,o=i.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,o=this._unproject(n)||this._unproject(t)),Ya(o,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:a}),c=new dn(Object.assign({},this._viewportProps,{zoom:s})).getLocationAtPoint({lngLat:o,pos:t}),u=Object(we.a)(c,2),l=u[0],h=u[1];return this._getUpdatedState({zoom:s,longitude:l,latitude:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.zoom({pos:[n/2,r/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=Object(Ic.d)(r,n,t);var i=e.maxPitch,a=e.minPitch,o=e.pitch;return e.pitch=Object(Ic.d)(o,a,i),Object.assign(e,bn(e)),e}},{key:"_unproject",value:function(e){var t=new dn(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new dn(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom,o=n+Math.log2(t);return Object(Ic.d)(o,a,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=Object(Ic.d)(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,c=i;return n>0?c=i+n*(s-i):n<0&&(c=i-n*(o-i)),{pitch:c,bearing:r+180*t}}}]),t}(Ip),Xp=function(e){function t(e){var n;return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,Hp,e))).invertPan=!0,n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"_getTransitionProps",value:function(){return Dp}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=Object(we.a)(r,2)[1],a=i-n,o=this.controllerState.getViewportProps(),s=o.width,c=o.height,u=t/s,l=0;n>0?Math.abs(c-a)>5&&(l=n/(a-c)*1.2):n<0&&a>5&&(l=1-i/a),l=Math.min(1,Math.max(-1,l));var h=this.controllerState.rotate({deltaScaleX:u,deltaScaleY:l});return this.updateViewport(h,Np,{isDragging:!0,isRotating:!0})}}]),t}(Lp),qp=function(e){function t(e){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).call(this,Object.assign({},e,{type:mp})))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:Xp})}}]),t}(pp);qp.displayName="MapView";var Yp=[255,255,255],Zp=[0,0,1],Kp=[0,0,-1],$p=[0,0,1],Qp=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e),this.id=t.id||Zo("light");var n=t.color,r=void 0===n?Yp:n;this.color=r;var i=t.intensity,a=void 0===i?1:i;this.intensity=a},Jp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ae.a)(this,t),(e=Object(Ft.a)(this,Object(Bt.a)(t).call(this,n))).type="ambient",e}return Object(zt.a)(t,e),t}(Qp),ev=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,t),(e=Object(Ft.a)(this,Object(Bt.a)(t).call(this,n))).type="directional";var r=n.direction,i=void 0===r?Kp:r;return e.direction=new Ic.b(i).normalize().toArray(),e}return Object(zt.a)(t,e),t}(Qp),tv=(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,t),(e=Object(Ft.a)(this,Object(Bt.a)(t).call(this,n))).type="point";var r=n.position,i=void 0===r?$p:r;return e.position=i,e.attenuation=e._getAttenuation(n),e}Object(zt.a)(t,e),Object(oe.a)(t,[{key:"_getAttenuation",value:function(e){return"attenuation"in e?e.attenuation:"intensity"in e?[0,0,e.intensity]:Zp}}])}(Qp),function(e){function t(e){var n;Object(ae.a)(this,t),n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e));var r=e._shadow,i=void 0!==r&&r;return n.shadow=i,n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"getProjectedLight",value:function(){return this}}]),t}(ev)),nv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e);var n=t.id,r=void 0===n?"effect":n;this.id=r,this.props={},Object.assign(this.props,t)}return Object(oe.a)(e,[{key:"prepare",value:function(){}},{key:"getParameters",value:function(){}},{key:"cleanup",value:function(){}}]),e}(),rv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e);var r=n.id,i=void 0===r?"pass":r;this.id=i,this.gl=t,this.props={},Object.assign(this.props,n)}return Object(oe.a)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),e}();function iv(e){return e.canvas?e.drawingBufferWidth/(e.canvas.clientWidth||e.canvas.width||1):1}function av(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=iv(e),i=e.drawingBufferWidth,a=e.drawingBufferHeight;return sv(t,r,i,a,n)}function ov(e){var t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function sv(e,t,n,r,i){var a,o=cv(e[0],t,n),s=uv(e[1],t,r,i),c=cv(e[0]+1,t,n),u=c===n-1?c:c-1;return c=uv(e[1]+1,t,r,i),i?(a=s,s=c=0===c?c:c+1):a=c===r-1?c:c-1,{x:o,y:s,width:Math.max(u-o+1,1),height:Math.max(a-s+1,1)}}function cv(e,t,n){return Math.min(Math.round(e*t),n-1)}function uv(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}var lv=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(e){var t=this;return Ls(this.gl,{framebuffer:e.outputBuffer},(function(){return t.drawLayers(e)}))}},{key:"drawLayers",value:function(e){var t=this,n=e.layers,r=e.viewports,i=e.views,a=e.onViewportActive,o=e.deviceRect,s=void 0===o?null:o,c=e.parameters,u=void 0===c?{}:c,l=e.pass,h=void 0===l?"draw":l,f=e.redrawReason,d=void 0===f?"":f,p=e.clearCanvas,v=void 0===p||p,g=e.effects,m=e.effectProps,b=this.gl;v&&this.clearCanvas(b);var y=[];return r.forEach((function(e,r){var o=t.getViewportFromDescriptor(e),c=i&&i[o.id];a(o);var l=t.drawLayersInViewport(b,{layers:n,viewport:o,view:c,deviceRect:s,parameters:u,pass:h,redrawReason:d,effects:g,effectProps:m});y.push(l)})),y}},{key:"drawLayersInViewport",value:function(e,t){var n=this,r=t.layers,i=t.viewport,a=t.view,o=(t.deviceRect,t.parameters),s=void 0===o?{}:o,c=(t.pass,t.redrawReason,t.effects),u=t.effectProps,l=this.getGLViewport(e,{viewport:i});if(a&&a.props.clear){var h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Ls(e,{scissorTest:!0,scissor:l},(function(){return Hs(e,h)}))}var f={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};return Cs(e,s||{}),r.forEach((function(t,r){var a=n.shouldDrawLayer(t,i);a&&t.props.pickable&&f.pickableCount++,t.isComposite&&f.compositeCount++,a&&(f.visibleCount++,n.drawLayerInViewport({gl:e,layer:t,layerIndex:r,glViewport:l,parameters:s,effects:c,effectProps:u}))})),f}},{key:"drawLayerInViewport",value:function(e){e.gl;var t=e.layer,n=e.layerIndex,r=e.glViewport,i=e.parameters,a=e.effects,o=e.effectProps,s=this.getModuleParameters(t,a,o),c=Object.assign({},t.context.uniforms,{layerIndex:n}),u=this.getLayerParameters(t,n,r,i);t.drawLayer({moduleParameters:s,uniforms:c,parameters:u})}},{key:"getViewportFromDescriptor",value:function(e){return e.viewport?e.viewport:e}},{key:"shouldDrawLayer",value:function(e,t){var n=this.props.layerFilter,r=!e.isComposite&&e.props.visible;return r&&n&&(r=n({layer:e,viewport:t,isPicking:!1})),r}},{key:"getModuleParameters",value:function(e){return Object.assign(Object.create(e.props),{viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:iv(this.gl)})}},{key:"getLayerParameters",value:function(e,t,n,r){var i=Object.assign({},e.props.parameters||{},r);return Object.assign(i,{viewport:n}),i}},{key:"getGLViewport",value:function(e,t){var n=t.viewport,r=e.canvas?e.canvas.clientHeight||e.canvas.height:100,i=n,a=iv(this.gl);return[i.x*a,(r-i.y-i.height)*a,i.width*a,i.height*a]}},{key:"clearCanvas",value:function(e){var t=e.drawingBufferWidth,n=e.drawingBufferHeight;Ls(e,{viewport:[0,0,t,n]},(function(){e.clear(16640)}))}}]),t}(rv),hv=function(e){function t(e,n){var r,i,a;return Object(ae.a)(this,t),(a=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,n))).shadowMap=new zs(e,{width:1,height:1,parameters:(r={},Object(W.a)(r,10241,9729),Object(W.a)(r,10240,9729),Object(W.a)(r,10242,33071),Object(W.a)(r,10243,33071),r)}),a.depthBuffer=new Gs(e,{format:33189,width:1,height:1}),a.fbo=new ac(e,{id:"shadowmap",width:1,height:1,attachments:(i={},Object(W.a)(i,36064,a.shadowMap),Object(W.a)(i,36096,a.depthBuffer),i)}),a}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(e){var n=this,r=this.fbo;Ls(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=e.viewports[0],a=iv(n.gl),o=i.width*a,s=i.height*a;o===r.width&&s===r.height||r.resize({width:o,height:s}),co(Object(Bt.a)(t.prototype),"render",n).call(n,Object.assign(e,{outputBuffer:r}))}))}},{key:"getModuleParameters",value:function(e,t,n){var r=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:0,drawToShadowMap:!0,devicePixelRatio:iv(this.gl)});return Object.assign(r,n),r}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),t}(lv),fv=Xa((function(e){var t=e.viewport,n=e.center;return new Ic.a(t.viewProjectionMatrix).invert().transform(n)})),dv=Xa((function(e){var t=e.viewport,n=e.shadowMatrices,r=[],i=t.pixelUnprojectionMatrix,a=t.isGeospatial?void 0:1,o=[[0,0,a],[t.width,0,a],[0,t.height,a],[t.width,t.height,a],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((function(e){return function(e,t){var n=Object(we.a)(e,3),r=n[0],i=n[1],a=n[2],o=ln([r,i,a],t);if(Number.isFinite(a))return o;return[o[0],o[1],0]}(e,i)})),c=!0,u=!1,l=void 0;try{for(var h,f=function(){var e=h.value,n=e.clone().translate(new Ic.b(t.center).negate()),i=o.map((function(e){return n.transform(e)})),a=(new Ic.a).ortho({left:Math.min.apply(Math,Object(s.a)(i.map((function(e){return e[0]})))),right:Math.max.apply(Math,Object(s.a)(i.map((function(e){return e[0]})))),bottom:Math.min.apply(Math,Object(s.a)(i.map((function(e){return e[1]})))),top:Math.max.apply(Math,Object(s.a)(i.map((function(e){return e[1]})))),near:Math.min.apply(Math,Object(s.a)(i.map((function(e){return-e[2]})))),far:Math.max.apply(Math,Object(s.a)(i.map((function(e){return-e[2]}))))});r.push(a.multiplyRight(e))},d=n[Symbol.iterator]();!(c=(h=d.next()).done);c=!0)f()}catch(p){u=!0,l=p}finally{try{c||null==d.return||d.return()}finally{if(u)throw l}}return r}));nl("shadow",{hook:"vs:DECKGL_FILTER_GL_POSITION",injection:"\nposition = shadow_setVertexPosition(geometry.position);\n  "}),nl("shadow",{hook:"fs:DECKGL_FILTER_COLOR",injection:"\ncolor = shadow_filterShadowColor(color);\n  "});var pv=[0,0,0,1],vv=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function gv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||pv,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=fv({viewport:e.viewport,center:t.project_uCenter}),i=[],a=dv({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice(),o=0;o<e.shadowMatrices.length;o++){var s=a[o],c=s.clone().translate(new Ic.b(e.viewport.center).negate());t.project_uCoordinateSystem===Gh.LNG_LAT?(a[o]=c,i[o]=[0,0,0,0]):(a[o]=s.clone().multiplyRight(vv),i[o]=c.transform(r))}for(var u=0;u<a.length;u++)n["shadow_uViewProjectionMatrices[".concat(u,"]")]=a[u],n["shadow_uProjectCenters[".concat(u,"]")]=i[u],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(u)]=e.shadowMaps[u]:n["shadow_uShadowMap".concat(u)]=e.dummyShadowMap;return n}var mv={name:"shadow",dependencies:["project"],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){var n={},r=e.shadowEnabled,i=void 0===r||r;return i&&e.shadowMatrices&&e.shadowMatrices.length>0?Object.assign(n,gv(e,t)):Object.assign(n,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),n}return{}}},bv={color:[255,255,255],intensity:1},yv=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],wv=[0,0,0,200/255],Ov=function(e){function t(e){var n;for(var r in Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e))).ambientLight=null,n.directionalLights=[],n.pointLights=[],n.shadowColor=wv,n.shadowPasses=[],n.dummyShadowMap=null,n.shadow=!1,n.programManager=null,e){var i=e[r];switch(i.type){case"ambient":n.ambientLight=i;break;case"directional":n.directionalLights.push(i);break;case"point":n.pointLights.push(i)}}return n._applyDefaultLights(),n.shadow=n.directionalLights.some((function(e){return e.shadow})),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"prepare",value:function(e,t){var n=t.layers,r=t.viewports,i=t.onViewportActive,a=t.views;if(!this.shadow)return{};var o=this._createLightMatrix();0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=Nl.getDefaultProgramManager(e),mv&&this.programManager.addDefaultModule(mv)),this.dummyShadowMap||(this.dummyShadowMap=new zs(e,{width:1,height:1}));for(var s=[],c=0;c<this.shadowPasses.length;c++){var u=this.shadowPasses[c];u.render({layers:n.filter((function(e){return!1!==e.props.shadowEnabled})),viewports:r,onViewportActive:i,views:a,effectProps:{shadowLightId:c,dummyShadowMap:this.dummyShadowMap,shadowMatrices:o}}),s.push(u.shadowMap)}return{shadowMaps:s,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:o}}},{key:"getParameters",value:function(e){var t=this.ambientLight,n=this._getProjectedPointLights(e);return{lightSources:{ambientLight:t,directionalLights:this._getProjectedDirectionalLights(e),pointLights:n}}}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.shadowPasses[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(mv),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.directionalLights[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=(new Ic.a).lookAt({eye:new Ic.b(o.direction).negate()});e.push(s)}}catch(c){n=!0,r=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"_createShadowPasses",value:function(e){for(var t=0;t<this.directionalLights.length;t++)this.shadowPasses.push(new hv(e))}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,n=this.directionalLights;e||0!==t.length||0!==n.length||(this.ambientLight=new Jp(bv),this.directionalLights.push(new tv(yv[0])),this.directionalLights.push(new tv(yv[1])))}},{key:"_getProjectedPointLights",value:function(e){for(var t=[],n=0;n<this.pointLights.length;n++){var r=this.pointLights[n];t.push(r.getProjectedLight({layer:e}))}return t}},{key:"_getProjectedDirectionalLights",value:function(e){for(var t=[],n=0;n<this.directionalLights.length;n++){var r=this.directionalLights[n];t.push(r.getProjectedLight({layer:e}))}return t}}]),t}(nv),_v=new Ov,jv=function(){function e(){Object(ae.a)(this,e),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(oe.a)(e,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&lp(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cleanup()}}catch(l){t=!0,n=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var a=!0,o=!1,s=void 0;try{for(var c,u=this._internalEffects[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){c.value.cleanup()}}catch(l){o=!0,s=l}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(e){return e instanceof Ov}))||this._internalEffects.push(_v)}}]),e}(),kv=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"getModuleParameters",value:function(e,n,r){var i=co(Object(Bt.a)(t.prototype),"getModuleParameters",this).call(this,e);Object.assign(i,this.getObjectHighlightParameters(e),r);var a=!0,o=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;Object.assign(i,l.getParameters(e))}}catch(h){o=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}},{key:"getObjectHighlightParameters",value:function(e){var t=e.props,n=t.highlightedObjectIndex,r=t.highlightColor,i={pickingHighlightColor:[r[0],r[1],r[2],r[3]||255]};return Number.isInteger(n)&&(i.pickingSelectedColor=n>=0?e.encodePickingColor(n):null),i}}]),t}(lv),xv=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(e){e.pickingFBO?this.drawPickingBuffer(e):co(Object(Bt.a)(t.prototype),"render",this).call(this,e)}},{key:"drawPickingBuffer",value:function(e){var t=this,n=e.layers,r=e.viewports,i=e.onViewportActive,a=e.pickingFBO,o=e.effectProps,s=e.deviceRect,c=s.x,u=s.y,l=s.width,h=s.height,f=e.redrawReason,d=void 0===f?"":f;return Ls(this.gl,{framebuffer:a,scissorTest:!0,scissor:[c,u,l,h],clearColor:[0,0,0,0]},(function(){t.drawLayers({layers:n,viewports:r,onViewportActive:i,pass:"picking",redrawReason:d,effectProps:o,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})}))}},{key:"shouldDrawLayer",value:function(e,t){var n=this.props.layerFilter,r=!e.isComposite&&e.props.visible&&e.props.pickable;return r&&n&&(r=n({layer:e,viewport:t,isPicking:!0})),r}},{key:"getModuleParameters",value:function(e,t,n){var r=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:1,devicePixelRatio:iv(this.gl)});return Object.assign(r,n),r}},{key:"getLayerParameters",value:function(e,t,n,r){var i=Object.assign({},e.props.parameters||{},r);return Object.assign(i,{viewport:n,blendColor:[0,0,0,(t+1)/255]}),i}}]),t}(lv),Ev={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Pv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e);var n=t.id,r=void 0===n?Zo("geometry"):n,i=t.drawMode,a=void 0===i?Ev.TRIANGLES:i,o=t.attributes,s=void 0===o?{}:o,c=t.indices,u=void 0===c?null:c,l=t.vertexCount,h=void 0===l?null:l;this.id=r,this.drawMode=0|a,this.attributes={},this.userData={},this._setAttributes(s,u),this.vertexCount=h||this._calculateVertexCount(this.attributes,this.indices)}return Object(oe.a)(e,null,[{key:"DRAW_MODE",get:function(){return Ev}}]),Object(oe.a)(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Su({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var r=e[n];r=ArrayBuffer.isView(r)?{value:r}:r,Uo(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(Uo(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var n=1/0;for(var r in e){var i=e[r],a=i.value,o=i.size;!i.constant&&a&&o>=1&&(n=Math.min(n,a.length/o))}return Uo(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),e}(),Sv=[-1,-1,1,-1,-1,1,1,1],Tv=function(e){function t(e,n){var r;Object(ae.a)(this,t);var i=Sv.map((function(e){return-1===e?0:e}));return(r=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,Object.assign({},n,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new Pv({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(Sv)},aTexCoord:{size:2,value:new Float32Array(i)},aCoordinate:{size:2,value:new Float32Array(i)}}})})))).setVertexCount(4),r}return Object(zt.a)(t,e),t}(uh),Cv=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,t),n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e,r));var i=r.module,a=r.fs,o=r.id,s=r.moduleProps;return n.model=n._getModel(e,i,a,o,s),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(e){var t=this,n=this.gl;Ls(n,{framebuffer:e.outputBuffer,clearColor:[0,0,0,0]},(function(){return t._renderPass(n,e)}))}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_getModel",value:function(e,t,n,r,i){var a=new Tv(e,{id:r,fs:n,modules:[t]}),o=Object.assign(t.getUniforms(),t.getUniforms(i));return a.setUniforms(o),a}},{key:"_renderPass",value:function(e,t){var n=t.inputBuffer;t.outputBuffer;Hs(e,{color:!0}),this.model.draw({uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}(rv),Mv=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,r))).id="".concat(e.name,"-pass"),Nu(e),n.module=e,n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"prepare",value:function(e){this.passes||(this.passes=function(e,t,n,r){if(t.filter||t.sampler){var i=Rv(t);return[new Cv(e,{id:n,module:t,fs:i,moduleProps:r})]}return(t.passes||[]).map((function(i,a){var o=Rv(t,i),s="".concat(n,"-").concat(a);return new Cv(e,{id:s,module:t,fs:o,moduleProps:r})}))}(e,this.module,this.id,this.props))}},{key:"render",value:function(e){for(var t=e.target,n=void 0===t?null:t,r=!1,i=0;i<this.passes.length;i++){var a=r?e.outputBuffer:e.inputBuffer,o=r?e.inputBuffer:e.outputBuffer;n&&i===this.passes.length-1&&(o=n),this.passes[i].render({inputBuffer:a,outputBuffer:o}),r=!r}return{inputBuffer:r?e.outputBuffer:e.inputBuffer,outputBuffer:r?e.inputBuffer:e.outputBuffer}}},{key:"cleanup",value:function(){if(this.passes){var e=!0,t=!1,n=void 0;try{for(var r,i=this.passes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.passes=null}}}]),t}(nv);var Av=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},Lv=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function Rv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.filter){var n="string"==typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return Av(n)}if(t.sampler){var r="string"==typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return Lv(r)}return null}var Iv=function(){function e(t){Object(ae.a)(this,e),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new kv(t),this.pickLayersPass=new xv(t),this.renderCount=0,this._needsRedraw="Initial render",this.screenBuffer=null,this.offscreenBuffer=null,this.lastPostProcessEffect=null}return Object(oe.a)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed");var t=this.layerFilter;this.drawLayersPass.setProps({layerFilter:t}),this.pickLayersPass.setProps({layerFilter:t})}},{key:"renderLayers",value:function(e){var t=this,n=e.layers,r=e.viewports,i=e.activateViewport,a=e.views,o=e.redrawReason,s=void 0===o?"unknown reason":o,c=e.clearCanvas,u=void 0===c||c,l=e.effects,h=void 0===l?[]:l,f=e.pass,d=e.stats,p=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,v=this.prepareEffects({layers:n,viewports:r,onViewportActive:i,views:a,effects:h}),g=this.lastPostProcessEffect?this.screenBuffer:ac.getDefaultFramebuffer(this.gl),m=p.render({layers:n,viewports:r,views:a,onViewportActive:i,redrawReason:s,clearCanvas:u,effects:h,effectProps:v,outputBuffer:g});this.postRender(h),this.renderCount++,ws.priority>=2&&m.forEach((function(e){t.logRenderStats({status:e,pass:f,redrawReason:s,stats:d,renderStats:m})}))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"finalize",value:function(){this.screenBuffer&&(this.screenBuffer.delete(),this.screenBuffer=null),this.offscreenBuffer&&(this.offscreenBuffer.delete(),this.offscreenBuffer=null)}},{key:"prepareEffects",value:function(e){var t=e.effects,n={};this.lastPostProcessEffect=null;var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;Object.assign(n,c.prepare(this.gl,e)),c instanceof Mv&&(this.lastPostProcessEffect=c)}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this.lastPostProcessEffect&&this.prepareRenderBuffers(),n}},{key:"prepareRenderBuffers",value:function(){this.screenBuffer||(this.screenBuffer=new ac(this.gl)),this.screenBuffer.resize(),this.offscreenBuffer||(this.offscreenBuffer=new ac(this.gl)),this.offscreenBuffer.resize()}},{key:"postRender",value:function(e){var t={inputBuffer:this.screenBuffer,outputBuffer:this.offscreenBuffer,target:null},n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof Mv){if(s===this.lastPostProcessEffect){Object.assign(t,{target:ac.getDefaultFramebuffer(this.gl)}),t=s.render(t);break}t=s.render(t)}}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"logRenderStats",value:function(e){var t=e.renderStats,n=e.pass,r=e.redrawReason,i=e.stats,a=t.totalCount,o=t.visibleCount,s=t.compositeCount,c=t.pickableCount,u=a-s-o,l="";l+="RENDER #".concat(this.renderCount," ").concat(o," (of ").concat(a," layers) to ").concat(n," because ").concat(r," "),ws.priority>2&&(l+="(".concat(u," hidden, ").concat(s," composite ").concat(c," pickable)")),ws.log(2,l)(),i&&i.get("Redraw Layers").add(o)}}]),e}(),Dv={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Nv(e){var t=e.pickedColors,n=e.layers,r=e.deviceX,i=e.deviceY,a=e.deviceRadius,o=e.deviceRect;if(t){for(var s=o.x,c=o.y,u=o.width,l=o.height,h=a*a,f=-1,d=0,p=0;p<l;p++){var v=p+c-i,g=v*v;if(g>h)d+=4*u;else for(var m=0;m<u;m++){if(t[d+3]-1>=0){var b=m+s-r,y=b*b+g;y<=h&&(h=y,f=d)}d+=4}}if(f>=0){var w=t[f+3]-1,O=t.slice(f,f+4),_=n[w];if(_){var j=_.decodePickingColor(O);return{pickedColor:O,pickedLayer:_,pickedObjectIndex:j}}ws.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Dv}function Fv(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,a=e.viewports,o=e.x,s=e.y,c=e.deviceX,u=e.deviceY,l=e.pixelRatio,h=t.pickedColor,f=t.pickedLayer,d=t.pickedObjectIndex,p=f?[f]:[];if("hover"===r){var v=n.index,g=n.layerId,m=f&&f.props.id;if(m!==g||d!==v){if(m!==g){var b=i.find((function(e){return e.props.id===g}));b&&p.unshift(b)}n.layerId=m,n.index=d,n.info=null}}var y={viewports:a}.viewports[0],w=y&&y.unproject([o,s]),O={color:null,layer:null,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:w,lngLat:w,devicePixel:[c,u],pixelRatio:l},_=new Map;return _.set(null,O),p.forEach((function(e){var t=Object.assign({},O);if(e===f&&(t.color=h,t.index=d,t.picked=!0),t=Bv({layer:e,info:t,mode:r}),e===f&&"hover"===r&&(n.info=t),t&&_.set(t.layer.id,t),"hover"===r){var i=e.props.autoHighlight&&f===e?h:null;e.setModuleParameters({pickingSelectedColor:i}),e.setNeedsRedraw()}})),_}function Bv(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.pickLayer({info:n,mode:r,sourceLayer:i}),t=t.parent}return n}var zv=function(){function e(t){Object(ae.a)(this,e),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new xv(t),this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return Object(oe.a)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),this.pickLayersPass.setProps({layerFilter:this.layerFilter})}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.mode,i=e.radius,a=void 0===i?0:i,o=e.layers,s=e.viewports,c=e.activateViewport,u=e.depth,l=void 0===u?1:u,h=e.event,f=void 0===h?null:h;this.pickingEvent=f;var d=this.pickClosestObject({x:t,y:n,radius:a,layers:o,mode:r,depth:l,viewports:s,onViewportActive:c});return this.pickingEvent=null,d}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.layers,o=e.viewports,s=e.activateViewport;return this.pickVisibleObjects({x:t,y:n,width:r,height:i,layers:a,mode:"pickObjects",viewports:o,onViewportActive:s})}},{key:"getLastPickedObject",value:function(e){var t=e.x,n=e.y,r=e.layers,i=e.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,o=a&&a.layer&&a.layer.id,s=o?r.find((function(e){return e.id===o})):null,c=i[0]&&i[0].unproject([t,n]),u={x:t,y:n,coordinate:c,lngLat:c,layer:s};return s?Object.assign({},a,u):Object.assign(u,{color:null,object:null,index:-1})}},{key:"updatePickingBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new ac(e)),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"pickClosestObject",value:function(e){var t=e.layers,n=e.viewports,r=e.x,i=e.y,a=e.radius,o=e.depth,s=void 0===o?1:o,c=e.mode,u=e.onViewportActive;this.updatePickingBuffer();for(var l,h=iv(this.gl),f=av(this.gl,[r,i],!0),d=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],p=Math.round(a*h),v=this.pickingFBO,g=v.width,m=v.height,b=this.getPickingRect({deviceX:d[0],deviceY:d[1],deviceRadius:p,deviceWidth:g,deviceHeight:m}),y=[],w={},O=0;O<s;O++){var _=Nv({pickedColors:b&&this.drawAndSamplePickingBuffer({layers:t,viewports:n,onViewportActive:u,deviceRect:b,redrawReason:c}),layers:t,deviceX:d[0],deviceY:d[1],deviceRadius:p,deviceRect:b});if(_.pickedColor&&O+1<s){var j=_.pickedColor[3]-1;w[j]=!0,t[j].clearPickingColor(_.pickedColor)}l=Fv({pickInfo:_,lastPickedInfo:this.lastPickedInfo,mode:c,layers:t,viewports:n,x:r,y:i,deviceX:d[0],deviceY:d[1],pixelRatio:h});var k=this.callLayerPickingCallbacks(l,c);if(k&&k.forEach((function(e){return y.push(e)})),!_.pickedColor)break}for(var x in w)t[x].restorePickingColors();return{result:y,emptyInfo:l&&l.get(null)}}},{key:"pickVisibleObjects",value:function(e){var t=e.layers,n=e.viewports,r=e.x,i=e.y,a=e.width,o=e.height,s=e.mode,c=e.onViewportActive;this.updatePickingBuffer();var u=iv(this.gl),l=av(this.gl,[r,i],!0),h=l.x,f=l.y+l.height,d=av(this.gl,[r+a,i+o],!0),p=d.x+d.width,v=d.y,g={x:h,y:v,width:p-h,height:f-v},m=function(e){var t=e.pickedColors,n=e.layers,r=new Map;if(t)for(var i=0;i<t.length;i+=4){var a=t[i+3]-1;if(a>=0){var o=t.slice(i,i+4),s=o.join(",");if(!r.has(s)){var c=n[a];c?r.set(s,{pickedColor:o,pickedLayer:c,pickedObjectIndex:c.decodePickingColor(o)}):ws.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this.drawAndSamplePickingBuffer({layers:t,viewports:n,onViewportActive:c,deviceRect:g,redrawReason:s}),layers:t}),b=new Map;return m.forEach((function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:i,width:a,height:o,pixelRatio:u};t=Bv({layer:e.pickedLayer,info:t,mode:s}),b.has(t.object)||b.set(t.object,t)})),Array.from(b.values())}},{key:"drawAndSamplePickingBuffer",value:function(e){var t=e.layers,n=e.viewports,r=e.onViewportActive,i=e.deviceRect,a=e.redrawReason;if(Ya(i),Ya(Number.isFinite(i.width)&&i.width>0,"`width` must be > 0"),Ya(Number.isFinite(i.height)&&i.height>0,"`height` must be > 0"),t.filter((function(e){return e.isPickable()})).length<1)return null;var o=this.pickingFBO;this.pickLayersPass.render({layers:t,viewports:n,onViewportActive:r,pickingFBO:o,deviceRect:i,redrawReason:a,effectProps:{lightSources:{}}});var s=i.x,c=i.y,u=i.width,l=i.height,h=new Uint8Array(u*l*4);return tc(o,{sourceX:s,sourceY:c,sourceWidth:u,sourceHeight:l,target:h}),h}},{key:"getPickingRect",value:function(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,a=e.deviceHeight,o=Math.max(0,t-r),s=Math.max(0,n-r),c=Math.min(i,t+r+1)-o,u=Math.min(a,n+r+1)-s;return c<=0||u<=0?null:{x:o,y:s,width:c,height:u}}},{key:"callLayerPickingCallbacks",value:function(e,t){var n=[],r=this.pickingEvent;return e.forEach((function(e){if(e.layer){switch(t){case"hover":e.handled=e.layer.onHover(e,r);break;case"query":break;default:throw new Error("unknown pick type")}n.push(e)}})),n}}]),e}(),Uv={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},Vv=function(){function e(t){Object(ae.a)(this,e);var n=t.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Uv),n.appendChild(this.el))}return Object(oe.a)(e,[{key:"setTooltip",value:function(e,t,n){var r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),e}(),Wv=n("eqkD"),Gv=new Map([["image/png",{test:function(e){return e.byteLength>=24&&2303741511===e.getUint32(0,!1)},getSize:function(e){return{width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}}],["image/jpeg",{test:function(e){return e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2,!1)&&65497===e.getUint16(e.byteLength-2,!1)},getSize:function(e){if(e.byteLength<2||65496!==e.getUint16(0,!1))return null;var t=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:n}}(),n=t.tableMarkers,r=t.sofMarkers,i=2;for(;i<e.byteLength;){var a=e.getUint16(i,!1);if(r.has(a))return{height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!n.has(a))return null;i+=2,i+=e.getUint16(i,!1)}return null}}],["image/gif",{test:function(e){return e.byteLength>=10&&1195984440===e.getUint32(0,!1)},getSize:function(e){return{width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}}],["image/bmp",{test:function(e){return e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength},getSize:function(e){return{width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}}]]);var Hv="Invalid MIME type. Supported MIME types are: ".concat(Array.from(Gv.keys()).join(", "));function Xv(e){var t=Zv(e),n=!0,r=!1,i=void 0;try{for(var a,o=Gv.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=Object(we.a)(a.value,2),c=s[0];if((0,s[1].test)(t))return c}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function qv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Yv(t=t||Xv(e)),r=n.getSize,i=Zv(e),a=r(i);if(!a)throw new Error("invalid image data for type: ".concat(t));return a}function Yv(e){var t=Gv.get(e);if(!t)throw new Error(Hv);return t}function Zv(e){if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return new DataView(e.buffer||e);throw new Error("toDataView")}function Kv(e,t){if(Wv.a._parseImageNode){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=qv(e,t=t||Xv(e));return n.mimeType=t,n}(e).mimeType;return Wv.a._parseImageNode(e,n,t)}return $v(e,t)}function $v(e,t){if("undefined"==typeof createImageBitmap)throw new Error("parseImage");var n=new Blob([new Uint8Array(e)]);return createImageBitmap(n)}function Qv(e,t){return Jv.apply(this,arguments)}function Jv(){return(Jv=$s(Zs.a.mark((function e(t,n){var r,i,a;return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\.svg((\?|#).*)?$/.test(t)){e.next=10;break}return e.next=3,fetch(t,n);case 3:return i=e.sent,e.next=6,i.text();case 6:a=e.sent,r="data:image/svg+xml;base64,".concat(btoa(a)),e.next=13;break;case 10:return e.next=12,t;case 12:r=e.sent;case 13:return e.next=15,new Promise((function(e,i){try{var a=new Image;a.onload=function(){return e(a)},a.onerror=function(e){return i(new Error("Could not load image ".concat(t,": ").concat(e)))},a.crossOrigin=n&&n.crossOrigin||"anonymous",a.src=r}catch(o){i(o)}}));case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eg=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],tg=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vndmicrosofticon","image/svg+xml"],ng=(Wv.a._parseImageNode,{mimeTypes:tg,extensions:eg,loadAndParse:Qv}),rg=n("TZTB");var ig={name:"JSON",extensions:["json","geojson"],testText:function(e){var t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse},ag=rg.a.deck&&rg.a.deck.VERSION;if(ag&&"7.3.15"!==ag)throw new Error("deck.gl - multiple versions detected: ".concat(rg.a.deck.VERSION," vs ").concat("7.3.15"));ag||(ws.log(0,"deck.gl ".concat("7.3.15"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),rg.a.deck=Object.assign(rg.a.deck||{},{VERSION:"7.3.15",version:"7.3.15",log:ws}),function(e){e=Array.isArray(e)?e:[e];var t=!0,n=!1,r=void 0;try{for(var i,a=function(){var e=zf(i.value);Wf.find((function(t){return e===t}))||Wf.unshift(e)},o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a()}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}([ig,ng]),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,r=void 0!==n&&n;Fu.registerShaderModules(e,{ignoreMultipleRegistrations:r})}([Nd,tp,np,Gd,Hd,Kd]));var og=rg.a.deck;function sg(e){var t=e.width,n=e.height,r=e.webgl1,i=e.webgl2,a=e.onError;if(i&&!r)return a("headless-gl does not support WebGL2");if(!Rs.c)return a("Failed to create WebGL context in Node.js, headless gl not available");var o=Object(Rs.c)(t,n,e);return o||a("Failed to create WebGL context in Node.js, headless gl returned null")}var cg,ug=uo.a&&"undefined"!=typeof document,lg=ug&&"complete"===document.readyState;function hg(){return cg||(cg=ug?new Promise((function(e,t){if(ug&&"complete"===document.readyState)return lg=!0,void e(document);window.onload=function(){lg=!0,e(document)}})):Promise.resolve({})),cg}function fg(e){var t,n=e.canvas,r=e.width,i=e.height,a=e.onError,o=void 0===a?function(){}:a;return"string"==typeof n?(lg||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||function(e){var t=e.width,n=void 0===t?800:t,r=e.height,i=void 0===r?600:r,a=e.id,o=void 0===a?"gl-canvas":a,s=e.insert,c=void 0===s||s,u=document.createElement("canvas");if(u.id=o,u.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",u.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",c){var l=document.body;l.insertBefore(u,l.firstChild)}return u}({id:"lumagl-canvas",width:r,height:i,onError:o}),t}function dg(e,t){var n=t.onError,r=void 0===n?function(e){return null}:n,i=function(e){return r("WebGL context: ".concat(e.statusMessage||"error"))};e.addEventListener("webglcontextcreationerror",i,!1);var a=t.webgl1,o=void 0===a||a,s=t.webgl2,c=void 0===s||s,u=null;return c&&(u=(u=u||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),o&&(u=(u=u||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),u||r("Failed to create ".concat(c&&!o?"WebGL2":"WebGL"," context"))}function pg(e){return Boolean(e&&2===e._version)}var vg={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function gg(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t=Object.assign({},vg,t),r=n.width,i=n.height;function a(e){if(t.throwOnError)throw new Error(e);return null}if(uo.a){var o=t,s=o.canvas,c=fg({canvas:s,width:r,height:i,onError:a});e=dg(c,t)}else e=sg(Su({},t,{width:r,height:i,onError:a}));return e?(bg(e=mg(e,t)),e):null}function mg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e._instrumented)return e;e._version=e._version||yg(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var n=t=Object.assign({},vg,t),r=n.manageState,i=n.debug;return r&&Object(Es.a)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Do.log.apply(Do,[1].concat(t))()}}),uo.a&&i&&(lo.a.makeDebugContext?(e=lo.a.makeDebugContext(e,t),Do.priority=Math.max(Do.priority,1)):Do.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function bg(e){var t=pg(e)?"WebGL2":"WebGL1",n=function(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";Do.info(1,"".concat(t).concat(i," context ").concat(r))()}function yg(e){return void 0!==Rs.a&&e instanceof Rs.a?2:1}function wg(e,t,n){var r="width"in n?n.width:e.canvas.clientWidth||e.canvas.width||1,i="height"in n?n.height:e.canvas.clientHeight||e.canvas.height||1;e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var a=e.luma.canvasSizeInfo;if(a.clientWidth!==r||a.clientHeight!==i||a.devicePixelRatio!==t){var o=t,s=Math.floor(r*o),c=Math.floor(i*o);e.canvas.width=s,e.canvas.height=c,e.drawingBufferWidth===s&&e.drawingBufferHeight===c||(Do.warn("Device pixel ratio clamped")(),o=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/i),e.canvas.width=Math.floor(r*o),e.canvas.height=Math.floor(i*o)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:t})}}function Og(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var _g=0,jg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ae.a)(this,e);var n=t.onCreateContext,r=void 0===n?function(e){return gg(e)}:n,i=t.onAddHTML,a=void 0===i?null:i,o=t.onInitialize,s=void 0===o?function(){}:o,c=t.onRender,u=void 0===c?function(){}:c,l=t.onFinalize,h=void 0===l?function(){}:l,f=t.gl,d=void 0===f?null:f,p=t.glOptions,v=void 0===p?{}:p,g=t.debug,m=void 0!==g&&g,b=t.createFramebuffer,y=void 0!==b&&b,w=t.autoResizeViewport,O=void 0===w||w,_=t.autoResizeDrawingBuffer,j=void 0===_||_,k=t.stats,x=void 0===k?zo.get("animation-loop-".concat(_g++)):k,E=t.useDevicePixels,P=void 0===E||E;"useDevicePixelRatio"in t&&(Do.deprecated("useDevicePixelRatio","useDevicePixels")(),P=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:a,onInitialize:s,onRender:u,onFinalize:h,gl:d,glOptions:v,debug:m,createFramebuffer:y},this.gl=d,this.needsRedraw=null,this.timeline=null,this.stats=x,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:O,autoResizeDrawingBuffer:j,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var t;return Object(oe.a)(e,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return Uo("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running||(this._running=!0,hg().then((function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=Fl.isSupported(e.gl,["timers"])?new Fl(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}))),this}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),Og(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(t){e._resolveNextFrame=t}))),this._nextFramePromise}},{key:"toDataURL",value:(t=$s(Zs.a.mark((function e(){return Zs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return Do.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;Og(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))}))}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){var t;this.display&&this.display.requestAnimationFrame(e)||(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60))}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Object(Xr.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?mg(this.props.gl,e):this.onCreateContext(e),!Vo(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(Ps.b)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=ov(t.useDevicePixels);wg(e,n,t)}else{var r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new ac(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}(),kg={mousedown:1,mousemove:2,mouseup:4};!function(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(n,(function(t){return t.pointerId===e.pointerId}))||n.push(e)),t.call(this,e)}}(kr.a.PointerEventInput),function(e){e.prototype.handler=function(e){var t=kg[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}(kr.a.MouseInput);var xg=kr.a.Manager,Eg=kr.a,Pg=Eg?[[Eg.Rotate,{enable:!1}],[Eg.Pinch,{enable:!1}],[Eg.Swipe,{enable:!1}],[Eg.Pan,{threshold:0,enable:!1}],[Eg.Press,{enable:!1}],[Eg.Tap,{event:"doubletap",taps:2,enable:!1}],[Eg.Tap,{event:"anytap",enable:!1}],[Eg.Tap,{enable:!1}]]:null,Sg={rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Tg={doubletap:["tap"]},Cg={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Mg=["keydown","keyup"],Ag=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Lg=["wheel","mousewheel","DOMMouseScroll"],Rg={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Ig={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Dg=n("Vame"),Ng=-1!==Dg.b.indexOf("firefox"),Fg=Lg,Bg=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=Fg.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent,!!Dg.a&&{passive:!1})}))}return Object(oe.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;Dg.c.WheelEvent&&(Ng&&e.deltaMode===Dg.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=Dg.c.devicePixelRatio),e.deltaMode===Dg.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),zg=Ag,Ug=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=zg.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Object(oe.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),Vg=Mg,Wg=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=Vg.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=i.tabIndex||0,t.style.outline="none",this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Object(oe.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}(),Gg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ae.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return Object(oe.a)(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),Hg={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var Xg={srcElement:"root",priority:0},qg=function(){function e(t){Object(ae.a)(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(oe.a)(e,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.handlers,o=this.handlersByElement;n&&("object"!==Object(Xr.a)(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},Xg,n):Xg;var s=o.get(n.srcElement);s||(s=[],o.set(n.srcElement,s));var c={type:e,handler:t,srcElement:n.srcElement,priority:n.priority};r&&(c.once=!0),i&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;for(var u=s.length-1;u>=0&&!(s[u].priority>=c.priority);)u--;s.splice(u+1,0,c)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var a=n[i];if(a.type===e&&a.handler===t){n.splice(i,1);var o=r.get(a.srcElement);o.splice(o.indexOf(a),1),0===o.length&&r.delete(a.srcElement)}}this._active=n.some((function(e){return!e.passive}))}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},a=function(){e.handled=!0,r=!0},o=[],s=0;s<n.length;s++){var c=n[s],u=c.type,l=c.handler,h=c.once;if(l(Object.assign({},e,{type:u,stopPropagation:i,stopImmediatePropagation:a})),h&&o.push(n[s]),r)break}for(var f=0;f<o.length;f++){var d=o[f];u=d.type,l=d.handler;this.remove(u,l)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=Hg[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,a=n.which,o=!1,s=!1,c=!1;return 4===t||2===t&&!Number.isFinite(r)?(o=1===a,s=2===a,c=3===a):2===t?(o=Boolean(1&r),s=Boolean(4&r),c=Boolean(2&r)):1===t&&(o=0===i,s=1===i,c=2===i),{leftButton:o,middleButton:s,rightButton:c}}(e),function(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),a=i.width/t.offsetWidth,o=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/a,y:(r.y-i.top-t.clientTop)/o}}}(e,t),{handled:!1,rootElement:t})}}]),e}(),Yg={events:null,recognizers:null,recognizerOptions:{},Manager:xg,touchAction:"none",tabIndex:0},Zg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(ae.a)(this,e),this.options=Object.assign({},Yg,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var r=n.events;r&&this.on(r)}return Object(oe.a)(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager;for(var i in this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Pg}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Sg).forEach((function(e){var n=t.manager.get(e);n&&Sg[e].forEach((function(e){n.recognizeWith(e)}))})),n.recognizerOptions){var a=this.manager.get(i);if(a){var o=n.recognizerOptions[i];delete o.enable,a.set(o)}}this.wheelInput=new Bg(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Ug(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Wg(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Gg(e,this._onOtherEvent,{enable:!1});var s=!0,c=!1,u=void 0;try{for(var l,h=this.events[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=Object(we.a)(l.value,2),d=f[0],p=f[1];p.isEmpty()||(this._toggleRecognizer(p.recognizerName,!0),this.manager.on(d,p.handleEvent))}}catch(v){c=!0,u=v}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=Tg[e];i&&!this.options.recognizers&&i.forEach((function(i){var a=n.get(i);t?(a.requireFailure(e),r.dropRequireFailure(i)):a.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var a=this.manager,o=this.events,s=Ig[e]||e,c=o.get(s);c||(c=new qg(this),o.set(s,c),c.recognizerName=Rg[s]||s,a&&a.on(s,c.handleEvent)),c.add(e,t,n,r,i),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}else for(var u in n=t,e)this._addEventHandler(u,e[u],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=Ig[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var a=i.recognizerName,o=!1,s=!0,c=!1,u=void 0;try{for(var l,h=n.values()[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;if(f.recognizerName===a&&!f.isEmpty()){o=!0;break}}}catch(p){c=!0,u=p}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}o||this._toggleRecognizer(a,!1)}}else for(var d in e)this._removeEventHandler(d,e[d])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=Cg[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();function Kg(){}var $g={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_animate:!1,onWebGLInitialized:Kg,onResize:Kg,onViewStateChange:Kg,onBeforeRender:Kg,onAfterRender:Kg,onLoad:Kg,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Qg=function(){function e(t){Object(ae.a)(this,e),t=Object.assign({},$g,t),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=t.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),function(){if(void 0===("undefined"==typeof window?"undefined":Object(Xr.a)(window)))return!1;return-1!==((window.navigator||{}).userAgent||"").indexOf("Trident/")}()&&ws.warn("IE 11 support will be deprecated in v8.0")(),t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new Bo({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),this.animationLoop.start()}return Object(oe.a)(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.effectManager&&(this.effectManager.finalize(),this.effectManager=null),this.deckRenderer&&(this.deckRenderer.finalize(),this.deckRenderer=null),this.eventManager&&this.eventManager.destroy(),this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ws.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ws.removed("onLayerClick","onClick")(),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{views:this._getViews(this.props),width:this.width,height:this.height}),n=this._getViewState(e);n&&(t.viewState=n),this.viewManager&&this.viewManager.setProps(t),this.layerManager&&this.layerManager.setProps(t),this.effectManager&&this.effectManager.setProps(t),this.animationLoop&&this.animationLoop.setProps(t),this.deckRenderer&&this.deckRenderer.setProps(t),this.deckPicker&&this.deckPicker.setProps(t),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||a}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,a=e.layerIds,o=void 0===a?null:a;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObject Time").timeStart();var s=this.layerManager.getLayers({layerIds:o}),c=this.layerManager.activateViewport,u=this.deckPicker.pickObject({x:t,y:n,radius:i,layers:s,viewports:this.getViewports({x:t,y:n}),activateViewport:c,mode:"query",depth:1}).result;return this.stats.get("pickObject Time").timeEnd(),u.length?u[0]:null}},{key:"pickMultipleObjects",value:function(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,a=e.layerIds,o=void 0===a?null:a,s=e.depth,c=void 0===s?10:s;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickMultipleObjects Time").timeStart();var u=this.layerManager.getLayers({layerIds:o}),l=this.layerManager.activateViewport,h=this.deckPicker.pickObject({x:t,y:n,radius:i,layers:u,viewports:this.getViewports({x:t,y:n}),activateViewport:l,mode:"query",depth:c}).result;return this.stats.get("pickMultipleObjects Time").timeEnd(),h}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,a=e.height,o=void 0===a?1:a,s=e.layerIds,c=void 0===s?null:s;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObjects Time").timeStart();var u=this.layerManager.getLayers({layerIds:c}),l=this.layerManager.activateViewport,h=this.deckPicker.pickObjects({x:t,y:n,width:i,height:o,layers:u,viewports:this.getViewports({x:t,y:n,width:i,height:o}),activateViewport:l});return this.stats.get("pickObjects Time").timeEnd(),h}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&Ya(t=document.getElementById(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var n=e.id,r=e.style;return t.id=n,Object.assign(t.style,r),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,n=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,n=e.width,r=e.height,i=e.gl,a=e.glOptions,o=e.debug,s=e.useDevicePixels,c=e.autoResizeDrawingBuffer;return new jg({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:c,gl:i,onCreateContext:function(e){return gg(Object.assign({},a,e,{canvas:t.canvas,debug:o}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function(e){return e.viewState||this.viewState}},{key:"_getViews",value:function(e){var t=e.views||[new qp({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&e.controller&&(t[0].props.controller=e.controller),t}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.callback=this.props.onHover,t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.mode){var t=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(e),activateViewport:this.layerManager.activateViewport,depth:1},e)),n=t.result,r=t.emptyInfo,i=(e.callback||this.props.getTooltip)&&(n.find((function(e){return e.index>=0}))||r);if(this.props.getTooltip){var a=this.props.getTooltip(i);this.tooltip.setTooltip(a,i.x,i.y)}e.callback&&!i.handled&&e.callback(i,e.event),e.mode=null}}},{key:"_updateCursor",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,Object(Es.a)(e,{enable:!0,copyState:!0})),this.tooltip=new Vv(this.canvas),Cs(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var t=new $a;for(var n in t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Zg(e.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),oo)this.eventManager.on(n,this._onEvent);this.viewManager=new vp({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),Ya(this.viewManager);var r=this.viewManager.getViewports()[0];this.layerManager=new up(e,{deck:this,stats:this.stats,viewport:r,timeline:t}),this.effectManager=new jv,this.deckRenderer=new Iv(e),this.deckPicker=new zv(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var n=this.layerManager.context.gl;Cs(n,this.props.parameters),this.props.onBeforeRender({gl:n});var r=this.layerManager.getLayers(),i=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:r,viewports:this.viewManager.getViewports(),activateViewport:i,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ws.table(3,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState[e.viewId]=t,this.viewManager.setProps({viewState:t}))}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onEvent",value:function(e){var t=oo[e.type],n=e.offsetCenter;if(t&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),a=i.layer,o=a&&(a[t.handler]||a.props[t.handler]),s=this.props[t.handler],c=!1;o&&(c=o.call(a,i,e)),!c&&s&&s(i,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var n=zo.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}]),e}();function Jg(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function em(e){return e?"function"==typeof e?Object(r.createElement)(pp,{},e):Array.isArray(e)?e.map(em):(Jg(e.type,pp),e):e}function tm(e){var t=e.children,n=e.layers,r=e.views,a=[],o=[],c={};return i.a.Children.forEach(em(t),(function(e){if(e){var t=e.type;if(Jg(t,Ad)){var n=function(e,t){var n={},r=e.defaultProps||{};for(var i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);o.push(n)}else a.push(e);if(t!==pp&&Jg(t,pp)&&e.props.id){var r=new t(e.props);c[r.id]=r}}})),Object.keys(c).length>0&&(Array.isArray(r)?r.forEach((function(e){c[e.id]=e})):r&&(c[r.id]=r),r=Object.values(c)),{layers:n=o.length>0?[].concat(o,Object(s.a)(n)):n,children:a,views:r}}function nm(e){var t=e.children,n=(e.viewports,e.deck),i=e.ContextProvider,a=(n||{}).viewManager;if(!a||!a.views.length)return[];var o=a.views[0].id;return t.map((function(e,t){e.props.viewportId&&ws.removed("viewportId","<View>")(),e.props.viewId&&ws.removed("viewId","<View>")();var s=o,c=e;Jg(e.type,pp)&&(s=e.props.id||o,c=e.props.children);var u=c&&c.props&&c.props.style,l=a.getViewport(s),h=a.getViewState(s);if(!l)return null;var f=l.x,d=l.y,p=l.width,v=l.height;c=function e(t,n){return t?"function"==typeof t?t(n):Array.isArray(t)?t.map((function(t){return e(t,n)})):Object(r.cloneElement)(t,n):t}(c,{x:f,y:d,width:p,height:v,viewport:l,viewState:h});var g={position:"absolute",zIndex:u&&u.zIndex,pointerEvents:"none",left:f,top:d,width:p,height:v},m="view-child-".concat(s,"-").concat(t);if(i){var b={viewport:l,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:n._onViewStateChange};c=Object(r.createElement)(i,{value:b},c)}return Object(r.createElement)("div",{key:m,id:m,style:g},c)}))}Qg.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(nv)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,debug:e.bool,drawPickingColors:e.bool,_animate:e.bool}},Qg.defaultProps=$g,Qg.VERSION=og.VERSION;var rm=qa.memoize,im=Qg.getPropTypes(mt.a),am=Qg.defaultProps,om=function(e){function t(e){var n;return Object(ae.a)(this,t),(n=Object(Ft.a)(this,Object(Bt.a)(t).call(this,e))).viewports=null,n.children=null,n._needsRedraw=null,n.pickObject=n.pickObject.bind(Object(et.a)(n)),n.pickMultipleObjects=n.pickMultipleObjects.bind(Object(et.a)(n)),n.pickObjects=n.pickObjects.bind(Object(et.a)(n)),n._extractJSXLayers=rm(tm),n._positionChildrenUnderViews=rm(nm),n}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.Deck||Qg;this.deck=this.deck||new e(Object.assign({},this.props,{canvas:this.deckCanvas,_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){return this.deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this.deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this.deck.pickObjects(e)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),n=t.layers,r=t.views,i=Object.assign({},e,{layers:n,views:r});this.deck.setProps(i)}},{key:"render",value:function(){var e=this,t=(this.deck||{}).viewManager;this.viewports=t&&t.getViewports(),this.children=this._parseJSX(this.props).children;var n=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:this.props.ContextProvider}),i=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),a=Object(r.createElement)("canvas",{ref:function(t){return e.deckCanvas=t},key:"deck-canvas",id:this.props.id,style:i});return Object(r.createElement)("div",{id:"deckgl-wrapper"},[n,a])}}]),t}(i.a.Component);om.propTypes=im,om.defaultProps=am;var sm=function(e){function t(e){var n=e.data,r=e.getGeometry,i=e.positionFormat,a=e.fp64;return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).call(this,{data:n,getGeometry:r,positionFormat:i,attributes:{startPositions:{size:3,padding:3,type:a?Float64Array:Float32Array},endPositions:{size:3,padding:3,type:a?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray},startPositions64XyLow:{size:2,padding:2,fp64Only:!0},endPositions64XyLow:{size:2,padding:2,fp64Only:!0}}}))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){var t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+1:t-1}},{key:"updateGeometryAttributes",value:function(e,t){var n=this.attributes,r=n.startPositions,i=n.endPositions,a=n.segmentTypes,o=t.geometrySize;if(0!==o)for(var s,c,u=this.isClosed(e),l=t.vertexStart,h=0;h<o;l++,h++)s=c||this.getPointOnPath(e,0),c=this.getPointOnPath(e,h+1),a[l]=0,0===h&&(a[l]+=u?4:1),h===o-1&&(a[l]+=u?4:2),r[3*l+3]=s[0],r[3*l+4]=s[1],r[3*l+5]=s[2]||0,i[3*l]=c[0],i[3*l+1]=c[1],i[3*l+2]=c[2]||0}},{key:"getPathLength",value:function(e){return Number.isFinite(e[0])?e.length/this.positionSize:e.length}},{key:"getPointOnPath",value:function(e,t){if(Number.isFinite(e[0])){var n=this.positionSize;return t*n>=e.length&&(t+=1-e.length/n),[e[t*n],e[t*n+1],3===n?e[t*n+2]:0]}return t>=e.length&&(t+=1-e.length),e[t]}},{key:"isClosed",value:function(e){var t=this.getPathLength(e),n=this.getPointOnPath(e,0),r=this.getPointOnPath(e,t-1);return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]}}]),t}(qa.Tesselator),cm=[0,0,0,255],um={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},dashJustified:!1,billboard:!1,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:cm},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},lm={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},hm=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"getShaders",value:function(){return co(Object(Bt.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec2 instanceLeftPositions64xyLow;\nattribute vec2 instanceStartPositions64xyLow;\nattribute vec2 instanceEndPositions64xyLow;\nattribute vec2 instanceRightPositions64xyLow;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  vec2 width, vec2 widthPixels\n) {\n  vec2 deltaA = (currPoint.xy - prevPoint.xy) / width;\n  vec2 deltaB = (nextPoint.xy - currPoint.xy) / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n  lenA = lenA > EPSILON ? lenA : 0.0;\n  lenB = lenB > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) * cosHalfA);\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(vCornerOffset * widthPixels * isValid, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  return currPoint + vec3(offset.xy / widthPixels * width, 0.0);\n}\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  vec2 width = billboard ? project_pixel_size_to_clipspace(widthPixels) : project_pixel_size(widthPixels);\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width, widthPixels\n  );\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec2 prevPosition64xyLow = mix(instanceLeftPositions64xyLow, instanceStartPositions64xyLow, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartPositions64xyLow, instanceEndPositions64xyLow, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec2 nextPosition64xyLow = mix(instanceEndPositions64xyLow, instanceRightPositions64xyLow, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64xyLow, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64xyLow, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64xyLow, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64xyLow);\n    currPosition = project_position(currPosition, currPosition64xyLow);\n    nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:["project32","picking"]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({startPositions:{size:3,offset:12,type:5130,fp64:this.use64bitPositions(),transition:lm,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{offset:0},instanceStartPositions:{offset:12}}},endPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:lm,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0,shaderAttributes:{instanceEndPositions:{offset:0},instanceRightPositions:{offset:12}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:lm,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:lm,defaultValue:cm},instancePickingColors:{size:3,type:5121,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(r,i)}}}),this.setState({pathTesselator:new sm({fp64:this.use64bitPositions()})})}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;co(Object(Bt.a)(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var a=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var o=this.state.pathTesselator;o.updateGeometry({data:r.data,getGeometry:r.getPath,positionFormat:r.positionFormat,dataChanged:i.dataChanged}),this.setState({numInstances:o.instanceCount,bufferLayout:o.bufferLayout}),i.dataChanged||a.invalidateAll()}if(i.extensionsChanged){var s=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)}),a.invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.rounded,a=r.billboard,o=r.miterLimit,s=r.widthUnits,c=r.widthScale,u=r.widthMinPixels,l=r.widthMaxPixels,h=r.dashJustified,f="pixels"===s?n.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(i),billboard:a,alignMode:Number(h),widthScale:c*f,miterLimit:o,widthMinPixels:u,widthMaxPixels:l})).draw()}},{key:"_getModel",value:function(e){return new uh(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Pv({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0}))}},{key:"calculateStartPositions",value:function(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("startPositions")}},{key:"calculateEndPositions",value:function(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("endPositions")}},{key:"calculateSegmentTypes",value:function(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("segmentTypes")}}]),t}(Ad);hm.layerName="PathLayer",hm.defaultProps=um;var fm=[0,0,0,255],dm={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:fm},getLineColor:{type:"accessor",value:fm},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},pm=function(e){function t(){return Object(ae.a)(this,t),Object(Ft.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(zt.a)(t,e),Object(oe.a)(t,[{key:"getShaders",value:function(e){return co(Object(Bt.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:["project32","picking"]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var n=e.props,r=e.oldProps,i=e.changeFlags;if(co(Object(Bt.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),i.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.radiusScale,a=r.radiusMinPixels,o=r.radiusMaxPixels,s=r.stroked,c=r.filled,u=r.lineWidthUnits,l=r.lineWidthScale,h=r.lineWidthMinPixels,f=r.lineWidthMaxPixels,d="pixels"===u?n.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{stroked:s?1:0,filled:c,radiusScale:i,radiusMinPixels:a,radiusMaxPixels:o,lineWidthScale:l*d,lineWidthMinPixels:h,lineWidthMaxPixels:f})).draw()}},{key:"_getModel",value:function(e){return new uh(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new Pv({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0}))}}]),t}(Ad);pm.layerName="ScatterplotLayer",pm.defaultProps=dm;var vm=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.color,o=void 0===a?"primary":a,s=e.value,c=e.valueBuffer,u=e.variant,l=void 0===u?"indeterminate":u,h=Object(V.a)(e,["classes","className","color","value","valueBuffer","variant"]),f=F(),d={},p={bar1:{},bar2:{}};if("determinate"===l||"buffer"===l)if(void 0!==s){d["aria-valuenow"]=Math.round(s),d["aria-valuemin"]=0,d["aria-valuemax"]=100;var v=s-100;"rtl"===f.direction&&(v=-v),p.bar1.transform="translateX(".concat(v,"%)")}else 0;if("buffer"===l)if(void 0!==c){var g=(c||0)-100;"rtl"===f.direction&&(g=-g),p.bar2.transform="translateX(".concat(g,"%)")}else 0;return r.createElement("div",Object(B.a)({className:Object(G.a)(n.root,n["color".concat(q(o))],i,{determinate:n.determinate,indeterminate:n.indeterminate,buffer:n.buffer,query:n.query}[l]),role:"progressbar"},d,{ref:t},h),"buffer"===l?r.createElement("div",{className:Object(G.a)(n.dashed,n["dashedColor".concat(q(o))])}):null,r.createElement("div",{className:Object(G.a)(n.bar,n["barColor".concat(q(o))],("indeterminate"===l||"query"===l)&&n.bar1Indeterminate,{determinate:n.bar1Determinate,buffer:n.bar1Buffer}[l]),style:p.bar1}),"determinate"===l?null:r.createElement("div",{className:Object(G.a)(n.bar,("indeterminate"===l||"query"===l)&&n.bar2Indeterminate,"buffer"===l?[n["color".concat(q(o))],n.bar2Buffer]:n["barColor".concat(q(o))]),style:p.bar2}))})),gm=Object(H.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(We.d)(t,.62):Object(We.a)(t,.5)},n=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:n},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(vm),mm=n("0bdg");const bm=i.a.forwardRef((e,t)=>{const{children:n}=e,{muiTheme:o,colorMode:s}=Object(mm.b)(),c=U(o.breakpoints.down("sm")),u=Object(r.useRef)(),l=Object(a.c)(P),h=Object(a.c)(L),f=Object(a.c)(x),d=Object(a.c)(y),p=Object(a.c)(j),v=Object(r.useMemo)(()=>"dark"===s?"mapbox://styles/mapbox/dark-v8":"mapbox://styles/mapbox/light-v8"),g=Object(a.b)();Object(r.useImperativeHandle)(t,()=>({getBounds:()=>{const e=u.current.getMap(),{_ne:t,_sw:n}=e.getBounds();return{top:t.lat,bottom:n.lat,left:t.lng,right:n.lng}}})),Object(r.useEffect)(()=>{c&&g(R.H({...f,zoom:2}))},[c,g]);return i.a.createElement(ki,Object.assign({},f,{ref:u,width:"100%",height:c?"50%":"100%",maxPitch:0,onViewportChange:e=>{g(R.H(e))},mapboxApiAccessToken:"pk.eyJ1IjoiaW50cmVwaWRldiIsImEiOiJjazBpa2M5YnowMHcyM21ubzgycW8zZHJmIn0.DCO2aRA6MJweC8HN-d_cgQ",disableTokenWarning:!0,onNativeClick:p&&(e=>{let{lngLat:t}=e;g(R.w(t))}),doubleClickZoom:!1,mapStyle:v}),d&&i.a.createElement(gm,{color:"secondary"}),i.a.createElement(om,{viewState:f},i.a.createElement(hm,{id:"path-layer",data:h,getPath:e=>e.path,getColor:e=>e.color,pickable:!0,widthMinPixels:4,widthMaxPixels:8}),i.a.createElement(pm,{id:"scatter-layer",data:l,pickable:!0,opacity:.8,getFillColor:e=>e.color,radiusMinPixels:6,raduisMaxPixels:8})),n)});var ym=r.forwardRef((function(e,t){var n=e.absolute,i=void 0!==n&&n,a=e.classes,o=e.className,s=e.component,c=void 0===s?"hr":s,u=e.flexItem,l=void 0!==u&&u,h=e.light,f=void 0!==h&&h,d=e.orientation,p=void 0===d?"horizontal":d,v=e.role,g=void 0===v?"hr"!==c?"separator":void 0:v,m=e.variant,b=void 0===m?"fullWidth":m,y=Object(V.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return r.createElement(c,Object(B.a)({className:Object(G.a)(a.root,o,"fullWidth"!==b&&a[b],i&&a.absolute,l&&a.flexItem,f&&a.light,"vertical"===p&&a.vertical),role:g,ref:t},y))})),wm=Object(H.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(We.b)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(ym),Om=[0,1,2,3,4,5,6,7,8,9,10],_m=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function jm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var km=r.forwardRef((function(e,t){var n=e.alignContent,i=void 0===n?"stretch":n,a=e.alignItems,o=void 0===a?"stretch":a,s=e.classes,c=e.className,u=e.component,l=void 0===u?"div":u,h=e.container,f=void 0!==h&&h,d=e.direction,p=void 0===d?"row":d,v=e.item,g=void 0!==v&&v,m=e.justify,b=void 0===m?"flex-start":m,y=e.lg,w=void 0!==y&&y,O=e.md,_=void 0!==O&&O,j=e.sm,k=void 0!==j&&j,x=e.spacing,E=void 0===x?0:x,P=e.wrap,S=void 0===P?"wrap":P,T=e.xl,C=void 0!==T&&T,M=e.xs,A=void 0!==M&&M,L=e.zeroMinWidth,R=void 0!==L&&L,I=Object(V.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),D=Object(G.a)(s.root,c,f&&[s.container,0!==E&&s["spacing-xs-".concat(String(E))]],g&&s.item,R&&s.zeroMinWidth,"row"!==p&&s["direction-xs-".concat(String(p))],"wrap"!==S&&s["wrap-xs-".concat(String(S))],"stretch"!==o&&s["align-items-xs-".concat(String(o))],"stretch"!==i&&s["align-content-xs-".concat(String(i))],"flex-start"!==b&&s["justify-xs-".concat(String(b))],!1!==A&&s["grid-xs-".concat(String(A))],!1!==k&&s["grid-sm-".concat(String(k))],!1!==_&&s["grid-md-".concat(String(_))],!1!==w&&s["grid-lg-".concat(String(w))],!1!==C&&s["grid-xl-".concat(String(C))]);return r.createElement(l,Object(B.a)({className:D,ref:t},I))})),xm=Object(H.a)((function(e){return Object(B.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return Om.forEach((function(r){var i=e.spacing(r);0!==i&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(jm(i,2)),width:"calc(100% + ".concat(jm(i),")"),"& > $item":{padding:jm(i,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};_m.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:i,flexGrow:0,maxWidth:i}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Object(B.a)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(km),Em={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},Pm=r.forwardRef((function(e,t){var n=e.align,i=void 0===n?"inherit":n,a=e.classes,o=e.className,s=e.color,c=void 0===s?"initial":s,u=e.component,l=e.display,h=void 0===l?"initial":l,f=e.gutterBottom,d=void 0!==f&&f,p=e.noWrap,v=void 0!==p&&p,g=e.paragraph,m=void 0!==g&&g,b=e.variant,y=void 0===b?"body1":b,w=e.variantMapping,O=void 0===w?Em:w,_=Object(V.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),j=u||(m?"p":O[y]||Em[y])||"span";return r.createElement(j,Object(B.a)({className:Object(G.a)(a.root,o,"inherit"!==y&&a[y],"initial"!==c&&a["color".concat(q(c))],v&&a.noWrap,d&&a.gutterBottom,m&&a.paragraph,"inherit"!==i&&a["align".concat(q(i))],"initial"!==h&&a["display".concat(q(h))]),ref:t},_))})),Sm=Object(H.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(Pm),Tm=n("2+6g");function Cm(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var Mm={entering:{opacity:1,transform:Cm(1)},entered:{opacity:1,transform:"none"}},Am=r.forwardRef((function(e,t){var n=e.children,i=e.disableStrictModeCompat,a=void 0!==i&&i,o=e.in,s=e.onEnter,c=e.onEntered,u=e.onEntering,l=e.onExit,h=e.onExited,f=e.onExiting,d=e.style,p=e.timeout,v=void 0===p?"auto":p,g=e.TransitionComponent,m=void 0===g?Pe:g,b=Object(V.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=r.useRef(),w=r.useRef(),O=F(),_=O.unstable_strictMode&&!a,j=r.useRef(null),k=Q(n.ref,t),x=Q(_?j:void 0,k),E=function(e){return function(t,n){if(e){var r=_?[j.current,t]:[t,n],i=Object(we.a)(r,2),a=i[0],o=i[1];void 0===o?e(a):e(a,o)}}},P=E(u),S=E((function(e,t){Te(e);var n,r=Ce({style:d,timeout:v},{mode:"enter"}),i=r.duration,a=r.delay;"auto"===v?(n=O.transitions.getAutoHeightDuration(e.clientHeight),w.current=n):n=i,e.style.transition=[O.transitions.create("opacity",{duration:n,delay:a}),O.transitions.create("transform",{duration:.666*n,delay:a})].join(","),s&&s(e,t)})),T=E(c),C=E(f),M=E((function(e){var t,n=Ce({style:d,timeout:v},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===v?(t=O.transitions.getAutoHeightDuration(e.clientHeight),w.current=t):t=r,e.style.transition=[O.transitions.create("opacity",{duration:t,delay:i}),O.transitions.create("transform",{duration:.666*t,delay:i||.333*t})].join(","),e.style.opacity="0",e.style.transform=Cm(.75),l&&l(e)})),A=E(h);return r.useEffect((function(){return function(){clearTimeout(y.current)}}),[]),r.createElement(m,Object(B.a)({appear:!0,in:o,nodeRef:_?j:void 0,onEnter:S,onEntered:T,onEntering:P,onExit:M,onExited:A,onExiting:C,addEndListener:function(e,t){var n=_?e:t;"auto"===v&&(y.current=setTimeout(n,w.current||0))},timeout:"auto"===v?null:v},b),(function(e,t){return r.cloneElement(n,Object(B.a)({style:Object(B.a)({opacity:0,transform:Cm(.75),visibility:"exited"!==e||o?void 0:"hidden"},Mm[e],d,n.props.style),ref:x},t))}))}));Am.muiSupportAuto=!0;var Lm=Am,Rm=n("8L3F");function Im(e){return"function"==typeof e?e():e}var Dm="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,Nm={},Fm=r.forwardRef((function(e,t){var n=e.anchorEl,i=e.children,a=e.container,o=e.disablePortal,s=void 0!==o&&o,c=e.keepMounted,u=void 0!==c&&c,l=e.modifiers,h=e.open,f=e.placement,d=void 0===f?"bottom":f,p=e.popperOptions,v=void 0===p?Nm:p,g=e.popperRef,m=e.style,b=e.transition,y=void 0!==b&&b,w=Object(V.a)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),O=r.useRef(null),_=Q(O,t),j=r.useRef(null),k=Q(j,g),x=r.useRef(k);Dm((function(){x.current=k}),[k]),r.useImperativeHandle(g,(function(){return j.current}),[]);var E=r.useState(!0),P=E[0],S=E[1],T=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(d,Object(D.a)()),C=r.useState(T),M=C[0],A=C[1];r.useEffect((function(){j.current&&j.current.update()}));var L=r.useCallback((function(){if(O.current&&n&&h){j.current&&(j.current.destroy(),x.current(null));var e=function(e){A(e.placement)},t=(Im(n),new Rm.a(Im(n),O.current,Object(B.a)({placement:T},v,{modifiers:Object(B.a)({},s?{}:{preventOverflow:{boundariesElement:"window"}},l,v.modifiers),onCreate:te(e,v.onCreate),onUpdate:te(e,v.onUpdate)})));x.current(t)}}),[n,s,l,h,T,v]),R=r.useCallback((function(e){$(_,e),L()}),[_,L]),I=function(){j.current&&(j.current.destroy(),x.current(null))};if(r.useEffect((function(){return function(){I()}}),[]),r.useEffect((function(){h||y||I()}),[h,y]),!u&&!h&&(!y||P))return null;var N={placement:M};return y&&(N.TransitionProps={in:h,onEnter:function(){S(!1)},onExited:function(){S(!0),I()}}),r.createElement(ee,{disablePortal:s,container:a},r.createElement("div",Object(B.a)({ref:R,role:"tooltip"},w,{style:Object(B.a)({position:"fixed",top:0,left:0,display:h||!u||y?null:"none"},m)}),"function"==typeof i?i(N):i))}));function Bm(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),a=r.useState(n),o=a[0],s=a[1];return[i?t:o,r.useCallback((function(e){i||s(e)}),[])]}function zm(e){return Math.round(1e5*e)/1e5}var Um=!1,Vm=null;var Wm=r.forwardRef((function(e,t){var n=e.arrow,i=void 0!==n&&n,a=e.children,o=e.classes,s=e.disableFocusListener,c=void 0!==s&&s,u=e.disableHoverListener,l=void 0!==u&&u,h=e.disableTouchListener,f=void 0!==h&&h,d=e.enterDelay,p=void 0===d?100:d,v=e.enterNextDelay,g=void 0===v?0:v,m=e.enterTouchDelay,b=void 0===m?700:m,y=e.id,w=e.interactive,O=void 0!==w&&w,_=e.leaveDelay,j=void 0===_?0:_,k=e.leaveTouchDelay,x=void 0===k?1500:k,E=e.onClose,P=e.onOpen,S=e.open,T=e.placement,C=void 0===T?"bottom":T,M=e.PopperComponent,A=void 0===M?Fm:M,L=e.PopperProps,R=e.title,I=e.TransitionComponent,D=void 0===I?Lm:I,N=e.TransitionProps,z=Object(V.a)(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),U=F(),W=r.useState(),H=W[0],X=W[1],Z=r.useState(null),K=Z[0],J=Z[1],ee=r.useRef(!1),te=r.useRef(),ne=r.useRef(),re=r.useRef(),ie=r.useRef(),ae=Bm({controlled:S,default:!1,name:"Tooltip",state:"open"}),oe=Object(we.a)(ae,2),se=oe[0],ce=oe[1],ue=se,le=function(e){var t=r.useState(e),n=t[0],i=t[1],a=e||n;return r.useEffect((function(){null==n&&i("mui-".concat(Math.round(1e5*Math.random())))}),[n]),a}(y);r.useEffect((function(){return function(){clearTimeout(te.current),clearTimeout(ne.current),clearTimeout(re.current),clearTimeout(ie.current)}}),[]);var he=function(e){clearTimeout(Vm),Um=!0,ce(!0),P&&P(e)},fe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=a.props;"mouseover"===t.type&&n.onMouseOver&&e&&n.onMouseOver(t),ee.current&&"touchstart"!==t.type||(H&&H.removeAttribute("title"),clearTimeout(ne.current),clearTimeout(re.current),p||Um&&g?(t.persist(),ne.current=setTimeout((function(){he(t)}),Um?g:p)):he(t))}},de=Je(),pe=de.isFocusVisible,ve=de.onBlurVisible,ge=de.ref,me=r.useState(!1),be=me[0],ye=me[1],Oe=function(){be&&(ye(!1),ve())},_e=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){H||X(t.currentTarget),pe(t)&&(ye(!0),fe()(t));var n=a.props;n.onFocus&&e&&n.onFocus(t)}},je=function(e){clearTimeout(Vm),Vm=setTimeout((function(){Um=!1}),800+j),ce(!1),E&&E(e),clearTimeout(te.current),te.current=setTimeout((function(){ee.current=!1}),U.transitions.duration.shortest)},ke=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=a.props;"blur"===t.type&&(n.onBlur&&e&&n.onBlur(t),Oe()),"mouseleave"===t.type&&n.onMouseLeave&&t.currentTarget===H&&n.onMouseLeave(t),clearTimeout(ne.current),clearTimeout(re.current),t.persist(),re.current=setTimeout((function(){je(t)}),j)}},xe=function(e){ee.current=!0;var t=a.props;t.onTouchStart&&t.onTouchStart(e)},Ee=Q(X,t),Pe=Q(ge,Ee),Se=r.useCallback((function(e){$(Pe,Y.findDOMNode(e))}),[Pe]),Te=Q(a.ref,Se);""===R&&(ue=!1);var Ce=!ue&&!l,Me=Object(B.a)({"aria-describedby":ue?le:null,title:Ce&&"string"==typeof R?R:null},z,a.props,{className:Object(G.a)(z.className,a.props.className),onTouchStart:xe,ref:Te}),Ae={};f||(Me.onTouchStart=function(e){xe(e),clearTimeout(re.current),clearTimeout(te.current),clearTimeout(ie.current),e.persist(),ie.current=setTimeout((function(){fe()(e)}),b)},Me.onTouchEnd=function(e){a.props.onTouchEnd&&a.props.onTouchEnd(e),clearTimeout(ie.current),clearTimeout(re.current),e.persist(),re.current=setTimeout((function(){je(e)}),x)}),l||(Me.onMouseOver=fe(),Me.onMouseLeave=ke(),O&&(Ae.onMouseOver=fe(!1),Ae.onMouseLeave=ke(!1))),c||(Me.onFocus=_e(),Me.onBlur=ke(),O&&(Ae.onFocus=_e(!1),Ae.onBlur=ke(!1)));var Le=r.useMemo((function(){return Object(Tm.a)({popperOptions:{modifiers:{arrow:{enabled:Boolean(K),element:K}}}},L)}),[K,L]);return r.createElement(r.Fragment,null,r.cloneElement(a,Me),r.createElement(A,Object(B.a)({className:Object(G.a)(o.popper,O&&o.popperInteractive,i&&o.popperArrow),placement:C,anchorEl:H,open:!!H&&ue,id:Me["aria-describedby"],transition:!0},Ae,Le),(function(e){var t=e.placement,n=e.TransitionProps;return r.createElement(D,Object(B.a)({timeout:U.transitions.duration.shorter},n,N),r.createElement("div",{className:Object(G.a)(o.tooltip,o["tooltipPlacement".concat(q(t.split("-")[0]))],ee.current&&o.touch,i&&o.tooltipArrow)},R,i?r.createElement("span",{className:o.arrow,ref:J}):null))})))})),Gm=Object(H.a)((function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},tooltip:{backgroundColor:Object(We.b)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(zm(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:Object(We.b)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(zm(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:Object(W.a)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:Object(W.a)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:Object(W.a)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:Object(W.a)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}}),{name:"MuiTooltip",flip:!1})(Wm),Hm=n("8tEE");const Xm=Object(I.a)(e=>({section:{padding:e.spacing(2),border:t=>{let{highlight:n=!1}=t;return n?"2px solid "+e.palette.secondary.main:"none"},borderRadius:"10px"}})),qm=e=>{let{children:t,...n}=e;const r=Xm(n);return i.a.createElement("div",{className:r.section},i.a.createElement(xm,{container:!0,direction:"column",wrap:"nowrap"},t))},Ym=Object(I.a)(e=>({root:{paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},title:{fontSize:"1.2rem"}})),Zm=e=>{const t=Ym(),n=Object(a.b)();return i.a.createElement(qm,null,i.a.createElement(xm,{container:!0,justify:"space-between",alignItems:"center"},i.a.createElement(Sm,{gutterBottom:!0,display:"inline",variant:"button",component:"h1",classes:{root:t.title}},i.a.createElement(Tt,{icon:Mt.a,width:"0"})," TSPVIS"),i.a.createElement(Sm,{gutterBottom:!0,display:"inline",color:"textSecondary"},i.a.createElement(Gm,{title:"Source code"},i.a.createElement(pt,{target:"_blank",href:"https://github.com/jhackshaw/tspvis"},i.a.createElement(Tt,{icon:Hm.a,size:"xs",width:"0"}))),i.a.createElement(Gm,{title:"General site information"},i.a.createElement(pt,{onClick:()=>{n(R.O())},edge:"end"},i.a.createElement(Tt,{icon:Mt.c,size:"xs",width:"0"}))))),i.a.createElement(Sm,{variant:"subtitle2",color:"textSecondary"},"Visualize algorithms for the traveling salesman problem. Use the controls below to plot points, choose an algorithm, and control execution.",i.a.createElement("br",null),"(Hint: try a construction alogorithm followed by an improvement algorithm)"))};var Km=n("XNZ3");n("TOwV");function $m(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=this,s=function(){e.apply(o,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}function Qm(e,t){var n=0;return"number"==typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Jm(e,t){var n=0;return"number"==typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function eb(e){return[e.horizontal,e.vertical].map((function(e){return"number"==typeof e?"".concat(e,"px"):e})).join(" ")}function tb(e){return"function"==typeof e?e():e}var nb=r.forwardRef((function(e,t){var n=e.action,i=e.anchorEl,a=e.anchorOrigin,o=void 0===a?{vertical:"top",horizontal:"left"}:a,s=e.anchorPosition,c=e.anchorReference,u=void 0===c?"anchorEl":c,l=e.children,h=e.classes,f=e.className,d=e.container,p=e.elevation,v=void 0===p?8:p,g=e.getContentAnchorEl,m=e.marginThreshold,b=void 0===m?16:m,y=e.onEnter,w=e.onEntered,O=e.onEntering,_=e.onExit,j=e.onExited,k=e.onExiting,x=e.open,E=e.PaperProps,P=void 0===E?{}:E,S=e.transformOrigin,T=void 0===S?{vertical:"top",horizontal:"left"}:S,C=e.TransitionComponent,M=void 0===C?Lm:C,A=e.transitionDuration,L=void 0===A?"auto":A,R=e.TransitionProps,I=void 0===R?{}:R,D=Object(V.a)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),N=r.useRef(),F=r.useCallback((function(e){if("anchorPosition"===u)return s;var t=tb(i),n=(t&&1===t.nodeType?t:K(N.current).body).getBoundingClientRect(),r=0===e?o.vertical:"center";return{top:n.top+Qm(n,r),left:n.left+Jm(n,o.horizontal)}}),[i,o.horizontal,o.vertical,s,u]),z=r.useCallback((function(e){var t=0;if(g&&"anchorEl"===u){var n=g(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[o.vertical,u,g]),U=r.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:Qm(e,T.vertical)+t,horizontal:Jm(e,T.horizontal)}}),[T.horizontal,T.vertical]),W=r.useCallback((function(e){var t=z(e),n={width:e.offsetWidth,height:e.offsetHeight},r=U(n,t);if("none"===u)return{top:null,left:null,transformOrigin:eb(r)};var a=F(t),o=a.top-r.vertical,s=a.left-r.horizontal,c=o+n.height,l=s+n.width,h=ce(tb(i)),f=h.innerHeight-b,d=h.innerWidth-b;if(o<b){var p=o-b;o-=p,r.vertical+=p}else if(c>f){var v=c-f;o-=v,r.vertical+=v}if(s<b){var g=s-b;s-=g,r.horizontal+=g}else if(l>d){var m=l-d;s-=m,r.horizontal+=m}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:eb(r)}}),[i,u,F,z,U,b]),H=r.useCallback((function(){var e=N.current;if(e){var t=W(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[W]),X=r.useCallback((function(e){N.current=Y.findDOMNode(e)}),[]);r.useEffect((function(){x&&H()})),r.useImperativeHandle(n,(function(){return x?{updatePosition:function(){H()}}:null}),[x,H]),r.useEffect((function(){if(x){var e=$m((function(){H()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[x,H]);var q=L;"auto"!==L||M.muiSupportAuto||(q=void 0);var Z=d||(i?K(tb(i)).body:void 0);return r.createElement(ye,Object(B.a)({container:Z,open:x,ref:t,BackdropProps:{invisible:!0},className:Object(G.a)(h.root,f)},D),r.createElement(M,Object(B.a)({appear:!0,in:x,onEnter:y,onEntered:w,onExit:_,onExited:j,onExiting:k,timeout:q},I,{onEntering:te((function(e,t){O&&O(e,t),H()}),I.onEntering)}),r.createElement(Ne,Object(B.a)({elevation:v,ref:X},P,{className:Object(G.a)(h.paper,P.className)}),l)))})),rb=Object(H.a)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(nb);var ib=r.createContext({}),ab=r.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.className,o=e.component,s=void 0===o?"ul":o,c=e.dense,u=void 0!==c&&c,l=e.disablePadding,h=void 0!==l&&l,f=e.subheader,d=Object(V.a)(e,["children","classes","className","component","dense","disablePadding","subheader"]),p=r.useMemo((function(){return{dense:u}}),[u]);return r.createElement(ib.Provider,{value:p},r.createElement(s,Object(B.a)({className:Object(G.a)(i.root,a,u&&i.dense,!h&&i.padding,f&&i.subheader),ref:t},d),f,n))})),ob=Object(H.a)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(ab);function sb(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function cb(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function ub(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function lb(e,t,n,r,i,a){for(var o=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return;o=!0}var c=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&ub(s,a)&&!c)return void s.focus();s=i(e,s,n)}}var hb="undefined"==typeof window?r.useEffect:r.useLayoutEffect,fb=r.forwardRef((function(e,t){var n=e.actions,i=e.autoFocus,a=void 0!==i&&i,o=e.autoFocusItem,s=void 0!==o&&o,c=e.children,u=e.className,l=e.disabledItemsFocusable,h=void 0!==l&&l,f=e.disableListWrap,d=void 0!==f&&f,p=e.onKeyDown,v=e.variant,g=void 0===v?"selectedMenu":v,m=Object(V.a)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),b=r.useRef(null),y=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});hb((function(){a&&b.current.focus()}),[a]),r.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!b.current.style.width;if(e.clientHeight<b.current.clientHeight&&n){var r="".concat(se(),"px");b.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,b.current.style.width="calc(100% + ".concat(r,")")}return b.current}}}),[]);var w=Q(r.useCallback((function(e){b.current=Y.findDOMNode(e)}),[]),t),O=-1;r.Children.forEach(c,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===g&&e.props.selected||-1===O)&&(O=t))}));var _=r.Children.map(c,(function(e,t){if(t===O){var n={};return s&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===g&&(n.tabIndex=0),r.cloneElement(e,n)}return e}));return r.createElement(ob,Object(B.a)({role:"menu",ref:w,className:u,onKeyDown:function(e){var t=b.current,n=e.key,r=K(t).activeElement;if("ArrowDown"===n)e.preventDefault(),lb(t,r,d,h,sb);else if("ArrowUp"===n)e.preventDefault(),lb(t,r,d,h,cb);else if("Home"===n)e.preventDefault(),lb(t,null,d,h,sb);else if("End"===n)e.preventDefault(),lb(t,null,d,h,cb);else if(1===n.length){var i=y.current,a=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);var s=r&&!i.repeating&&ub(r,i);i.previousKeyMatched&&(s||lb(t,r,!1,h,sb,i))?e.preventDefault():i.previousKeyMatched=!1}p&&p(e)},tabIndex:a?0:-1},m),_)})),db={vertical:"top",horizontal:"right"},pb={vertical:"top",horizontal:"left"},vb=r.forwardRef((function(e,t){var n=e.autoFocus,i=void 0===n||n,a=e.children,o=e.classes,s=e.disableAutoFocusItem,c=void 0!==s&&s,u=e.MenuListProps,l=void 0===u?{}:u,h=e.onClose,f=e.onEntering,d=e.open,p=e.PaperProps,v=void 0===p?{}:p,g=e.PopoverClasses,m=e.transitionDuration,b=void 0===m?"auto":m,y=e.variant,w=void 0===y?"selectedMenu":y,O=Object(V.a)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","variant"]),_=F(),j=i&&!c&&d,k=r.useRef(null),x=r.useRef(null),E=-1;r.Children.map(a,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("menu"!==w&&e.props.selected||-1===E)&&(E=t))}));var P=r.Children.map(a,(function(e,t){return t===E?r.cloneElement(e,{ref:function(t){x.current=Y.findDOMNode(t),$(e.ref,t)}}):e}));return r.createElement(rb,Object(B.a)({getContentAnchorEl:function(){return x.current},classes:g,onClose:h,onEntering:function(e,t){k.current&&k.current.adjustStyleForScrollbar(e,_),f&&f(e,t)},anchorOrigin:"rtl"===_.direction?db:pb,transformOrigin:"rtl"===_.direction?db:pb,PaperProps:Object(B.a)({},v,{classes:Object(B.a)({},v.classes,{root:o.paper})}),open:d,ref:t,transitionDuration:b},O),r.createElement(fb,Object(B.a)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:k,autoFocus:i&&(-1===E||c),autoFocusItem:j,variant:w},l,{className:Object(G.a)(o.list,l.className)}),P))})),gb=Object(H.a)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(vb);function mb(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function bb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(mb(e.value)&&""!==e.value||t&&mb(e.defaultValue)&&""!==e.defaultValue)}function yb(e,t){return"object"===Object(Xr.a)(t)&&null!==t?e===t:String(e)===String(t)}var wb=r.forwardRef((function(e,t){var n=e["aria-label"],i=e.autoFocus,a=e.autoWidth,o=e.children,s=e.classes,c=e.className,u=e.defaultValue,l=e.disabled,h=e.displayEmpty,f=e.IconComponent,d=e.inputRef,p=e.labelId,v=e.MenuProps,g=void 0===v?{}:v,m=e.multiple,b=e.name,y=e.onBlur,w=e.onChange,O=e.onClose,_=e.onFocus,j=e.onOpen,k=e.open,x=e.readOnly,E=e.renderValue,P=e.SelectDisplayProps,S=void 0===P?{}:P,T=e.tabIndex,C=(e.type,e.value),M=e.variant,A=void 0===M?"standard":M,L=Object(V.a)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),R=Bm({controlled:C,default:u,name:"Select"}),I=Object(we.a)(R,2),D=I[0],N=I[1],F=r.useRef(null),z=r.useState(null),U=z[0],W=z[1],H=r.useRef(null!=k).current,Y=r.useState(),Z=Y[0],$=Y[1],J=r.useState(!1),ee=J[0],te=J[1],ne=Q(t,d);r.useImperativeHandle(ne,(function(){return{focus:function(){U.focus()},node:F.current,value:D}}),[U,D]),r.useEffect((function(){i&&U&&U.focus()}),[i,U]),r.useEffect((function(){if(U){var e=K(U).getElementById(p);if(e){var t=function(){getSelection().isCollapsed&&U.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[p,U]);var re,ie,ae=function(e,t){e?j&&j(t):O&&O(t),H||($(a?null:U.clientWidth),te(e))},oe=r.Children.toArray(o),se=function(e){return function(t){var n;if(m||ae(!1,t),m){n=Array.isArray(D)?D.slice():[];var r=D.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),D!==n&&(N(n),w&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:b}}),w(t,e)))}},ce=null!==U&&(H?k:ee);delete L["aria-invalid"];var ue=[],le=!1;(bb({value:D})||h)&&(E?re=E(D):le=!0);var he=oe.map((function(e){if(!r.isValidElement(e))return null;var t;if(m){if(!Array.isArray(D))throw new Error(Object(X.a)(2));(t=D.some((function(t){return yb(t,e.props.value)})))&&le&&ue.push(e.props.children)}else(t=yb(D,e.props.value))&&le&&(ie=e.props.children);return t&&!0,r.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:se(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));le&&(re=m?ue.join(", "):ie);var fe,de=Z;!a&&H&&U&&(de=U.clientWidth),fe=void 0!==T?T:l?null:0;var pe=S.id||(b?"mui-component-select-".concat(b):void 0);return r.createElement(r.Fragment,null,r.createElement("div",Object(B.a)({className:Object(G.a)(s.root,s.select,s.selectMenu,s[A],c,l&&s.disabled),ref:W,tabIndex:fe,role:"button","aria-disabled":l?"true":void 0,"aria-expanded":ce?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[p,pe].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!x){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ae(!0,e))}},onMouseDown:l||x?null:function(e){0===e.button&&(e.preventDefault(),U.focus(),ae(!0,e))},onBlur:function(e){!ce&&y&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:D,name:b}}),y(e))},onFocus:_},S,{id:pe}),function(e){return null==e||"string"==typeof e&&!e.trim()}(re)?r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):re),r.createElement("input",Object(B.a)({value:Array.isArray(D)?D.join(","):D,name:b,ref:F,"aria-hidden":!0,onChange:function(e){var t=oe.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=oe[t];N(n.props.value),w&&w(e,n)}},tabIndex:-1,className:s.nativeInput,autoFocus:i},L)),r.createElement(f,{className:Object(G.a)(s.icon,s["icon".concat(q(A))],ce&&s.iconOpen,l&&s.disabled)}),r.createElement(gb,Object(B.a)({id:"menu-".concat(b||""),anchorEl:U,open:ce,onClose:function(e){ae(!1,e)}},g,{MenuListProps:Object(B.a)({"aria-labelledby":p,role:"listbox",disableListWrap:!0},g.MenuListProps),PaperProps:Object(B.a)({},g.PaperProps,{style:Object(B.a)({minWidth:de},null!=g.PaperProps?g.PaperProps.style:null)})}),he))}));function Ob(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&void 0===t[n]&&(e[n]=r[n]),e}),{})}var _b=r.createContext();var jb=_b;function kb(){return r.useContext(jb)}var xb=r.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.className,o=e.color,s=void 0===o?"inherit":o,c=e.component,u=void 0===c?"svg":c,l=e.fontSize,h=void 0===l?"default":l,f=e.htmlColor,d=e.titleAccess,p=e.viewBox,v=void 0===p?"0 0 24 24":p,g=Object(V.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return r.createElement(u,Object(B.a)({className:Object(G.a)(i.root,a,"inherit"!==s&&i["color".concat(q(s))],"default"!==h&&i["fontSize".concat(q(h))]),focusable:"false",viewBox:v,color:f,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:t},g),n,d?r.createElement("title",null,d):null)}));xb.muiName="SvgIcon";var Eb=Object(H.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(xb);var Pb,Sb,Tb=(Pb=r.createElement("path",{d:"M7 10l5 5 5-5z"}),(Sb=function(e,t){return i.a.createElement(Eb,Object(B.a)({ref:t},e),Pb)}).muiName=Eb.muiName,i.a.memo(i.a.forwardRef(Sb)));function Cb(e,t){return parseInt(e[t],10)||0}var Mb="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,Ab={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Lb=r.forwardRef((function(e,t){var n=e.onChange,i=e.rows,a=e.rowsMax,o=e.rowsMin,s=void 0===o?1:o,c=e.style,u=e.value,l=Object(V.a)(e,["onChange","rows","rowsMax","rowsMin","style","value"]),h=i||s,f=r.useRef(null!=u).current,d=r.useRef(null),p=Q(t,d),v=r.useRef(null),g=r.useRef(0),m=r.useState({}),b=m[0],y=m[1],w=r.useCallback((function(){var t=d.current,n=window.getComputedStyle(t),r=v.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=Cb(n,"padding-bottom")+Cb(n,"padding-top"),s=Cb(n,"border-bottom-width")+Cb(n,"border-top-width"),c=r.scrollHeight-o;r.value="x";var u=r.scrollHeight-o,l=c;h&&(l=Math.max(Number(h)*u,l)),a&&(l=Math.min(Number(a)*u,l));var f=(l=Math.max(l,u))+("border-box"===i?o+s:0),p=Math.abs(l-c)<=1;y((function(e){return g.current<20&&(f>0&&Math.abs((e.outerHeightStyle||0)-f)>1||e.overflow!==p)?(g.current+=1,{overflow:p,outerHeightStyle:f}):e}))}),[a,h,e.placeholder]);r.useEffect((function(){var e=$m((function(){g.current=0,w()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[w]),Mb((function(){w()})),r.useEffect((function(){g.current=0}),[u]);return r.createElement(r.Fragment,null,r.createElement("textarea",Object(B.a)({value:u,onChange:function(e){g.current=0,f||w(),n&&n(e)},ref:p,rows:h,style:Object(B.a)({height:b.outerHeightStyle,overflow:b.overflow?"hidden":null},c)},l)),r.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:Object(B.a)({},Ab,c)}))})),Rb="undefined"==typeof window?r.useEffect:r.useLayoutEffect,Ib=r.forwardRef((function(e,t){var n=e["aria-describedby"],i=e.autoComplete,a=e.autoFocus,o=e.classes,s=e.className,c=(e.color,e.defaultValue),u=e.disabled,l=e.endAdornment,h=(e.error,e.fullWidth),f=void 0!==h&&h,d=e.id,p=e.inputComponent,v=void 0===p?"input":p,g=e.inputProps,m=void 0===g?{}:g,b=e.inputRef,y=(e.margin,e.multiline),w=void 0!==y&&y,O=e.name,_=e.onBlur,j=e.onChange,k=e.onClick,x=e.onFocus,E=e.onKeyDown,P=e.onKeyUp,S=e.placeholder,T=e.readOnly,C=e.renderSuffix,M=e.rows,A=e.rowsMax,L=e.rowsMin,R=e.startAdornment,I=e.type,D=void 0===I?"text":I,N=e.value,F=Object(V.a)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","startAdornment","type","value"]),z=null!=m.value?m.value:N,U=r.useRef(null!=z).current,W=r.useRef(),H=r.useCallback((function(e){0}),[]),Y=Q(m.ref,H),Z=Q(b,Y),K=Q(W,Z),$=r.useState(!1),J=$[0],ee=$[1],te=r.useContext(_b);var ne=Ob({props:e,muiFormControl:te,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ne.focused=te?te.focused:J,r.useEffect((function(){!te&&u&&J&&(ee(!1),_&&_())}),[te,u,J,_]);var re=te&&te.onFilled,ie=te&&te.onEmpty,ae=r.useCallback((function(e){bb(e)?re&&re():ie&&ie()}),[re,ie]);Rb((function(){U&&ae({value:z})}),[z,ae,U]);r.useEffect((function(){ae(W.current)}),[]);var oe=v,se=Object(B.a)({},m,{ref:K});"string"!=typeof oe?se=Object(B.a)({inputRef:K,type:D},se,{ref:null}):w?!M||A||L?(se=Object(B.a)({rows:M,rowsMax:A},se),oe=Lb):oe="textarea":se=Object(B.a)({type:D},se);return r.useEffect((function(){te&&te.setAdornedStart(Boolean(R))}),[te,R]),r.createElement("div",Object(B.a)({className:Object(G.a)(o.root,o["color".concat(q(ne.color||"primary"))],s,ne.disabled&&o.disabled,ne.error&&o.error,f&&o.fullWidth,ne.focused&&o.focused,te&&o.formControl,w&&o.multiline,R&&o.adornedStart,l&&o.adornedEnd,"dense"===ne.margin&&o.marginDense),onClick:function(e){W.current&&e.currentTarget===e.target&&W.current.focus(),k&&k(e)},ref:t},F),R,r.createElement(jb.Provider,{value:null},r.createElement(oe,Object(B.a)({"aria-invalid":ne.error,"aria-describedby":n,autoComplete:i,autoFocus:a,defaultValue:c,disabled:ne.disabled,id:d,onAnimationStart:function(e){ae("mui-auto-fill-cancel"===e.animationName?W.current:{value:"x"})},name:O,placeholder:S,readOnly:T,required:ne.required,rows:M,value:z,onKeyDown:E,onKeyUp:P},se,{className:Object(G.a)(o.input,m.className,ne.disabled&&o.disabled,w&&o.inputMultiline,ne.hiddenLabel&&o.inputHiddenLabel,R&&o.inputAdornedStart,l&&o.inputAdornedEnd,"search"===D&&o.inputTypeSearch,"dense"===ne.margin&&o.inputMarginDense),onBlur:function(e){_&&_(e),m.onBlur&&m.onBlur(e),te&&te.onBlur?te.onBlur(e):ee(!1)},onChange:function(e){if(!U){var t=e.target||W.current;if(null==t)throw new Error(Object(X.a)(1));ae({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];m.onChange&&m.onChange.apply(m,[e].concat(r)),j&&j.apply(void 0,[e].concat(r))},onFocus:function(e){ne.disabled?e.stopPropagation():(x&&x(e),m.onFocus&&m.onFocus(e),te&&te.onFocus?te.onFocus(e):ee(!0))}}))),l,C?C(Object(B.a)({},ne,{startAdornment:R})):null)})),Db=Object(H.a)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},i={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:Object(B.a)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(Ib),Nb=r.forwardRef((function(e,t){var n=e.disableUnderline,i=e.classes,a=e.fullWidth,o=void 0!==a&&a,s=e.inputComponent,c=void 0===s?"input":s,u=e.multiline,l=void 0!==u&&u,h=e.type,f=void 0===h?"text":h,d=Object(V.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return r.createElement(Db,Object(B.a)({classes:Object(B.a)({},i,{root:Object(G.a)(i.root,!n&&i.underline),underline:null}),fullWidth:o,inputComponent:c,multiline:l,ref:t,type:f},d))}));Nb.muiName="Input";var Fb=Object(H.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(Nb),Bb=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.disabled,o=e.IconComponent,s=e.inputRef,c=e.variant,u=void 0===c?"standard":c,l=Object(V.a)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return r.createElement(r.Fragment,null,r.createElement("select",Object(B.a)({className:Object(G.a)(n.root,n.select,n[u],i,a&&n.disabled),disabled:a,ref:s||t},l)),e.multiple?null:r.createElement(o,{className:Object(G.a)(n.icon,n["icon".concat(q(u))],a&&n.disabled)}))})),zb=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},Ub=r.createElement(Fb,null),Vb=r.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.IconComponent,o=void 0===a?Tb:a,s=e.input,c=void 0===s?Ub:s,u=e.inputProps,l=(e.variant,Object(V.a)(e,["children","classes","IconComponent","input","inputProps","variant"])),h=Ob({props:e,muiFormControl:kb(),states:["variant"]});return r.cloneElement(c,Object(B.a)({inputComponent:Bb,inputProps:Object(B.a)({children:n,classes:i,IconComponent:o,variant:h.variant,type:void 0},u,c?c.props.inputProps:{}),ref:t},l))}));Vb.muiName="Select";Object(H.a)(zb,{name:"MuiNativeSelect"})(Vb);var Wb=r.forwardRef((function(e,t){var n=e.disableUnderline,i=e.classes,a=e.fullWidth,o=void 0!==a&&a,s=e.inputComponent,c=void 0===s?"input":s,u=e.multiline,l=void 0!==u&&u,h=e.type,f=void 0===h?"text":h,d=Object(V.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return r.createElement(Db,Object(B.a)({classes:Object(B.a)({},i,{root:Object(G.a)(i.root,!n&&i.underline),underline:null}),fullWidth:o,inputComponent:c,multiline:l,ref:t,type:f},d))}));Wb.muiName="Input";var Gb=Object(H.a)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(Wb),Hb=r.forwardRef((function(e,t){e.children;var n=e.classes,i=e.className,a=e.label,o=e.labelWidth,s=e.notched,c=e.style,u=Object(V.a)(e,["children","classes","className","label","labelWidth","notched","style"]),l="rtl"===F().direction?"right":"left";if(void 0!==a)return r.createElement("fieldset",Object(B.a)({"aria-hidden":!0,className:Object(G.a)(n.root,i),ref:t,style:c},u),r.createElement("legend",{className:Object(G.a)(n.legendLabelled,s&&n.legendNotched)},a?r.createElement("span",null,a):r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var h=o>0?.75*o+8:.01;return r.createElement("fieldset",Object(B.a)({"aria-hidden":!0,style:Object(B.a)(Object(W.a)({},"padding".concat(q(l)),8),c),className:Object(G.a)(n.root,i),ref:t},u),r.createElement("legend",{className:n.legend,style:{width:s?h:.01}},r.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),Xb=Object(H.a)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(Hb),qb=r.forwardRef((function(e,t){var n=e.classes,i=e.fullWidth,a=void 0!==i&&i,o=e.inputComponent,s=void 0===o?"input":o,c=e.label,u=e.labelWidth,l=void 0===u?0:u,h=e.multiline,f=void 0!==h&&h,d=e.notched,p=e.type,v=void 0===p?"text":p,g=Object(V.a)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return r.createElement(Db,Object(B.a)({renderSuffix:function(e){return r.createElement(Xb,{className:n.notchedOutline,label:c,labelWidth:l,notched:void 0!==d?d:Boolean(e.startAdornment||e.filled||e.focused)})},classes:Object(B.a)({},n,{root:Object(G.a)(n.root,n.underline),notchedOutline:null}),fullWidth:a,inputComponent:s,multiline:f,ref:t,type:v},g))}));qb.muiName="Input";var Yb=Object(H.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(qb),Zb=zb,Kb=r.createElement(Fb,null),$b=r.createElement(Gb,null),Qb=r.forwardRef((function e(t,n){var i=t.autoWidth,a=void 0!==i&&i,o=t.children,s=t.classes,c=t.displayEmpty,u=void 0!==c&&c,l=t.IconComponent,h=void 0===l?Tb:l,f=t.id,d=t.input,p=t.inputProps,v=t.label,g=t.labelId,m=t.labelWidth,b=void 0===m?0:m,y=t.MenuProps,w=t.multiple,O=void 0!==w&&w,_=t.native,j=void 0!==_&&_,k=t.onClose,x=t.onOpen,E=t.open,P=t.renderValue,S=t.SelectDisplayProps,T=t.variant,C=void 0===T?"standard":T,M=Object(V.a)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),A=j?Bb:wb,L=Ob({props:t,muiFormControl:kb(),states:["variant"]}).variant||C,R=d||{standard:Kb,outlined:r.createElement(Yb,{label:v,labelWidth:b}),filled:$b}[L];return r.cloneElement(R,Object(B.a)({inputComponent:A,inputProps:Object(B.a)({children:o,IconComponent:h,variant:L,type:void 0,multiple:O},j?{id:f}:{autoWidth:a,displayEmpty:u,labelId:g,MenuProps:y,onClose:k,onOpen:x,open:E,renderValue:P,SelectDisplayProps:Object(B.a)({id:f},S)},p,{classes:p?Object(Km.a)({baseClasses:s,newClasses:p.classes,Component:e}):s},d?d.props.inputProps:{}),ref:n},M))}));Qb.muiName="Select";var Jb=Object(H.a)(Zb,{name:"MuiSelect"})(Qb),ey=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.color,o=void 0===a?"default":a,s=e.component,c=void 0===s?"li":s,u=e.disableGutters,l=void 0!==u&&u,h=e.disableSticky,f=void 0!==h&&h,d=e.inset,p=void 0!==d&&d,v=Object(V.a)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return r.createElement(c,Object(B.a)({className:Object(G.a)(n.root,i,"default"!==o&&n["color".concat(q(o))],p&&n.inset,!f&&n.sticky,!l&&n.gutters),ref:t},v))})),ty=Object(H.a)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(ey);var ny="undefined"==typeof window?r.useEffect:r.useLayoutEffect,ry=r.forwardRef((function(e,t){var n=e.alignItems,i=void 0===n?"center":n,a=e.autoFocus,o=void 0!==a&&a,s=e.button,c=void 0!==s&&s,u=e.children,l=e.classes,h=e.className,f=e.component,d=e.ContainerComponent,p=void 0===d?"li":d,v=e.ContainerProps,g=(v=void 0===v?{}:v).className,m=Object(V.a)(v,["className"]),b=e.dense,y=void 0!==b&&b,w=e.disabled,O=void 0!==w&&w,_=e.disableGutters,j=void 0!==_&&_,k=e.divider,x=void 0!==k&&k,E=e.focusVisibleClassName,P=e.selected,S=void 0!==P&&P,T=Object(V.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),C=r.useContext(ib),M={dense:y||C.dense||!1,alignItems:i},A=r.useRef(null);ny((function(){o&&A.current&&A.current.focus()}),[o]);var L,R,I=r.Children.toArray(u),D=I.length&&(L=I[I.length-1],R=["ListItemSecondaryAction"],r.isValidElement(L)&&-1!==R.indexOf(L.type.muiName)),N=Q(r.useCallback((function(e){A.current=Y.findDOMNode(e)}),[]),t),F=Object(B.a)({className:Object(G.a)(l.root,h,M.dense&&l.dense,!j&&l.gutters,x&&l.divider,O&&l.disabled,c&&l.button,"center"!==i&&l.alignItemsFlexStart,D&&l.secondaryAction,S&&l.selected),disabled:O},T),z=f||"li";return c&&(F.component=f||"div",F.focusVisibleClassName=Object(G.a)(l.focusVisible,E),z=ft),D?(z=F.component||f?z:"div","li"===p&&("li"===z?z="div":"li"===F.component&&(F.component="div")),r.createElement(ib.Provider,{value:M},r.createElement(p,Object(B.a)({className:Object(G.a)(l.container,g),ref:N},m),r.createElement(z,F,I),I.pop()))):r.createElement(ib.Provider,{value:M},r.createElement(z,Object(B.a)({ref:N},F),I))})),iy=Object(H.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(ry),ay=r.forwardRef((function(e,t){var n,i=e.classes,a=e.className,o=e.component,s=void 0===o?"li":o,c=e.disableGutters,u=void 0!==c&&c,l=e.ListItemClasses,h=e.role,f=void 0===h?"menuitem":h,d=e.selected,p=e.tabIndex,v=Object(V.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==p?p:-1),r.createElement(iy,Object(B.a)({button:!0,role:f,tabIndex:n,component:s,selected:d,disableGutters:u,classes:Object(B.a)({dense:i.dense},l),className:Object(G.a)(i.root,a,d&&i.selected,!u&&i.gutters),ref:t},v))})),oy=Object(H.a)((function(e){return{root:Object(B.a)({},e.typography.body1,Object(W.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(B.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(ay),sy=r.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.className,o=e.color,s=void 0===o?"default":o,c=e.component,u=void 0===c?"button":c,l=e.disabled,h=void 0!==l&&l,f=e.disableElevation,d=void 0!==f&&f,p=e.disableFocusRipple,v=void 0!==p&&p,g=e.endIcon,m=e.focusVisibleClassName,b=e.fullWidth,y=void 0!==b&&b,w=e.size,O=void 0===w?"medium":w,_=e.startIcon,j=e.type,k=void 0===j?"button":j,x=e.variant,E=void 0===x?"text":x,P=Object(V.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),S=_&&r.createElement("span",{className:Object(G.a)(i.startIcon,i["iconSize".concat(q(O))])},_),T=g&&r.createElement("span",{className:Object(G.a)(i.endIcon,i["iconSize".concat(q(O))])},g);return r.createElement(ft,Object(B.a)({className:Object(G.a)(i.root,i[E],a,"inherit"===s?i.colorInherit:"default"!==s&&i["".concat(E).concat(q(s))],"medium"!==O&&[i["".concat(E,"Size").concat(q(O))],i["size".concat(q(O))]],d&&i.disableElevation,h&&i.disabled,y&&i.fullWidth),component:u,disabled:h,focusRipple:!v,focusVisibleClassName:Object(G.a)(i.focusVisible,m),ref:t,type:k},P),r.createElement("span",{className:i.label},S,n,T))})),cy=Object(H.a)((function(e){return{root:Object(B.a)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(We.b)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(We.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(We.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Object(We.b)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Object(We.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Object(We.b)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Object(We.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(sy);cy.styles;var uy=r.forwardRef((function(e,t){var n=e.children,i=e.classes,a=e.className,o=e.color,s=void 0===o?"default":o,c=e.component,u=void 0===c?"div":c,l=e.disabled,h=void 0!==l&&l,f=e.disableElevation,d=void 0!==f&&f,p=e.disableFocusRipple,v=void 0!==p&&p,g=e.disableRipple,m=void 0!==g&&g,b=e.fullWidth,y=void 0!==b&&b,w=e.orientation,O=void 0===w?"horizontal":w,_=e.size,j=void 0===_?"medium":_,k=e.variant,x=void 0===k?"outlined":k,E=Object(V.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"]),P=Object(G.a)(i.grouped,i["grouped".concat(q(O))],i["grouped".concat(q(x))],i["grouped".concat(q(x)).concat(q(O))],i["grouped".concat(q(x)).concat("default"!==s?q(s):"")],h&&i.disabled);return r.createElement(u,Object(B.a)({role:"group",className:Object(G.a)(i.root,a,y&&i.fullWidth,d&&i.disableElevation,"contained"===x&&i.contained,"vertical"===O&&i.vertical),ref:t},E),r.Children.map(n,(function(e){return r.isValidElement(e)?r.cloneElement(e,{className:Object(G.a)(P,e.props.className),color:e.props.color||s,disabled:e.props.disabled||h,disableElevation:e.props.disableElevation||d,disableFocusRipple:v,disableRipple:m,fullWidth:y,size:e.props.size||j,variant:e.props.variant||x}):null})))})),ly=Object(H.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},contained:{boxShadow:e.shadows[2]},disableElevation:{boxShadow:"none"},disabled:{},fullWidth:{width:"100%"},vertical:{flexDirection:"column"},grouped:{minWidth:40},groupedHorizontal:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}},groupedText:{},groupedTextHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextPrimary:{"&:not(:last-child)":{borderColor:Object(We.b)(e.palette.primary.main,.5)}},groupedTextSecondary:{"&:not(:last-child)":{borderColor:Object(We.b)(e.palette.secondary.main,.5)}},groupedOutlined:{},groupedOutlinedHorizontal:{"&:not(:first-child)":{marginLeft:-1},"&:not(:last-child)":{borderRightColor:"transparent"}},groupedOutlinedVertical:{"&:not(:first-child)":{marginTop:-1},"&:not(:last-child)":{borderBottomColor:"transparent"}},groupedOutlinedPrimary:{"&:hover":{borderColor:e.palette.primary.main}},groupedOutlinedSecondary:{"&:hover":{borderColor:e.palette.secondary.main}},groupedContained:{boxShadow:"none"},groupedContainedHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderRight:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderBottom:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedPrimary:{"&:not(:last-child)":{borderColor:e.palette.primary.dark}},groupedContainedSecondary:{"&:not(:last-child)":{borderColor:e.palette.secondary.dark}}}}),{name:"MuiButtonGroup"})(uy);var hy=Object(H.a)((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:Object(B.a)({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,n=e.classes,i=e.className,a=e.open,o=e.value,s=e.valueLabelDisplay;return"off"===s?t:r.cloneElement(t,{className:Object(G.a)(t.props.className,(a||"on"===s)&&n.open,n.thumb)},r.createElement("span",{className:Object(G.a)(n.offset,i)},r.createElement("span",{className:n.circle},r.createElement("span",{className:n.label},o))))}));function fy(e,t){return e-t}function dy(e,t,n){return Math.min(Math.max(t,e),n)}function py(e,t){return e.reduce((function(e,n,r){var i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null).index}function vy(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function gy(e,t,n){return 100*(e-t)/(n-t)}function my(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function by(e){var t=e.values,n=e.source,r=e.newValue,i=e.index;if(t[i]===r)return n;var a=t.slice();return a[i]=r,a}function yy(e){var t=e.sliderRef,n=e.activeIndex,r=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===n||t.current.querySelector('[role="slider"][data-index="'.concat(n,'"]')).focus(),r&&r(n)}var wy={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},Oy=function(e){return e},_y=r.forwardRef((function(e,t){var n=e["aria-label"],i=e["aria-labelledby"],a=e["aria-valuetext"],o=e.classes,c=e.className,u=e.color,l=void 0===u?"primary":u,h=e.component,f=void 0===h?"span":h,d=e.defaultValue,p=e.disabled,v=void 0!==p&&p,g=e.getAriaLabel,m=e.getAriaValueText,b=e.marks,y=void 0!==b&&b,w=e.max,O=void 0===w?100:w,_=e.min,j=void 0===_?0:_,k=e.name,x=e.onChange,E=e.onChangeCommitted,P=e.onMouseDown,S=e.orientation,T=void 0===S?"horizontal":S,C=e.scale,M=void 0===C?Oy:C,A=e.step,L=void 0===A?1:A,R=e.ThumbComponent,I=void 0===R?"span":R,D=e.track,N=void 0===D?"normal":D,z=e.value,U=e.ValueLabelComponent,W=void 0===U?hy:U,H=e.valueLabelDisplay,X=void 0===H?"off":H,Y=e.valueLabelFormat,Z=void 0===Y?Oy:Y,$=Object(V.a)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),J=F(),ee=r.useRef(),te=r.useState(-1),ne=te[0],ie=te[1],ae=r.useState(-1),oe=ae[0],se=ae[1],ce=Bm({controlled:z,default:d,name:"Slider"}),ue=Object(we.a)(ce,2),le=ue[0],he=ue[1],fe=Array.isArray(le),de=fe?le.slice().sort(fy):[le];de=de.map((function(e){return dy(e,j,O)}));var pe=!0===y&&null!==L?Object(s.a)(Array(Math.floor((O-j)/L)+1)).map((function(e,t){return{value:j+L*t}})):y||[],ve=Je(),ge=ve.isFocusVisible,me=ve.onBlurVisible,be=ve.ref,ye=r.useState(-1),Oe=ye[0],_e=ye[1],je=r.useRef(),ke=Q(be,je),xe=Q(t,ke),Ee=re((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));ge(e)&&_e(t),se(t)})),Pe=re((function(){-1!==Oe&&(_e(-1),me()),se(-1)})),Se=re((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));se(t)})),Te=re((function(){se(-1)})),Ce="rtl"===J.direction,Me=re((function(e){var t,n=Number(e.currentTarget.getAttribute("data-index")),r=de[n],i=(O-j)/10,a=pe.map((function(e){return e.value})),o=a.indexOf(r),s=Ce?"ArrowLeft":"ArrowRight",c=Ce?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":t=j;break;case"End":t=O;break;case"PageUp":L&&(t=r+i);break;case"PageDown":L&&(t=r-i);break;case s:case"ArrowUp":t=L?r+L:a[o+1]||a[a.length-1];break;case c:case"ArrowDown":t=L?r-L:a[o-1]||a[0];break;default:return}if(e.preventDefault(),L&&(t=my(t,L,j)),t=dy(t,j,O),fe){var u=t;t=by({values:de,source:le,newValue:t,index:n}).sort(fy),yy({sliderRef:je,activeIndex:t.indexOf(u)})}he(t),_e(n),x&&x(e,t),E&&E(e,t)})),Ae=r.useRef(),Le=T;Ce&&"vertical"!==T&&(Le+="-reverse");var Re=function(e){var t,n,r=e.finger,i=e.move,a=void 0!==i&&i,o=e.values,s=e.source,c=je.current.getBoundingClientRect(),u=c.width,l=c.height,h=c.bottom,f=c.left;if(t=0===Le.indexOf("vertical")?(h-r.y)/l:(r.x-f)/u,-1!==Le.indexOf("-reverse")&&(t=1-t),n=function(e,t,n){return(n-t)*e+t}(t,j,O),L)n=my(n,L,j);else{var d=pe.map((function(e){return e.value}));n=d[py(d,n)]}n=dy(n,j,O);var p=0;if(fe){var v=n;p=(n=by({values:o,source:s,newValue:n,index:p=a?Ae.current:py(o,n)}).sort(fy)).indexOf(v),Ae.current=p}return{newValue:n,activeIndex:p}},Ie=re((function(e){var t=vy(e,ee);if(t){var n=Re({finger:t,move:!0,values:de,source:le}),r=n.newValue,i=n.activeIndex;yy({sliderRef:je,activeIndex:i,setActive:ie}),he(r),x&&x(e,r)}})),De=re((function(e){var t=vy(e,ee);if(t){var n=Re({finger:t,values:de,source:le}).newValue;ie(-1),"touchend"===e.type&&se(-1),E&&E(e,n),ee.current=void 0;var r=K(je.current);r.removeEventListener("mousemove",Ie),r.removeEventListener("mouseup",De),r.removeEventListener("touchmove",Ie),r.removeEventListener("touchend",De)}})),Ne=re((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(ee.current=t.identifier);var n=vy(e,ee),r=Re({finger:n,values:de,source:le}),i=r.newValue,a=r.activeIndex;yy({sliderRef:je,activeIndex:a,setActive:ie}),he(i),x&&x(e,i);var o=K(je.current);o.addEventListener("touchmove",Ie),o.addEventListener("touchend",De)}));r.useEffect((function(){var e=je.current;e.addEventListener("touchstart",Ne);var t=K(e);return function(){e.removeEventListener("touchstart",Ne),t.removeEventListener("mousemove",Ie),t.removeEventListener("mouseup",De),t.removeEventListener("touchmove",Ie),t.removeEventListener("touchend",De)}}),[De,Ie,Ne]);var Fe=re((function(e){P&&P(e),e.preventDefault();var t=vy(e,ee),n=Re({finger:t,values:de,source:le}),r=n.newValue,i=n.activeIndex;yy({sliderRef:je,activeIndex:i,setActive:ie}),he(r),x&&x(e,r);var a=K(je.current);a.addEventListener("mousemove",Ie),a.addEventListener("mouseup",De)})),Be=gy(fe?de[0]:j,j,O),ze=gy(de[de.length-1],j,O)-Be,Ue=Object(B.a)({},wy[Le].offset(Be),wy[Le].leap(ze));return r.createElement(f,Object(B.a)({ref:xe,className:Object(G.a)(o.root,o["color".concat(q(l))],c,v&&o.disabled,pe.length>0&&pe.some((function(e){return e.label}))&&o.marked,!1===N&&o.trackFalse,"vertical"===T&&o.vertical,"inverted"===N&&o.trackInverted),onMouseDown:Fe},$),r.createElement("span",{className:o.rail}),r.createElement("span",{className:o.track,style:Ue}),r.createElement("input",{value:de.join(","),name:k,type:"hidden"}),pe.map((function(e,t){var n,i=gy(e.value,j,O),a=wy[Le].offset(i);return n=!1===N?-1!==de.indexOf(e.value):"normal"===N&&(fe?e.value>=de[0]&&e.value<=de[de.length-1]:e.value<=de[0])||"inverted"===N&&(fe?e.value<=de[0]||e.value>=de[de.length-1]:e.value>=de[0]),r.createElement(r.Fragment,{key:e.value},r.createElement("span",{style:a,"data-index":t,className:Object(G.a)(o.mark,n&&o.markActive)}),null!=e.label?r.createElement("span",{"aria-hidden":!0,"data-index":t,style:a,className:Object(G.a)(o.markLabel,n&&o.markLabelActive)},e.label):null)})),de.map((function(e,t){var s=gy(e,j,O),c=wy[Le].offset(s);return r.createElement(W,{key:t,valueLabelFormat:Z,valueLabelDisplay:X,className:o.valueLabel,value:"function"==typeof Z?Z(M(e),t):Z,index:t,open:oe===t||ne===t||"on"===X,disabled:v},r.createElement(I,{className:Object(G.a)(o.thumb,o["thumbColor".concat(q(l))],ne===t&&o.active,v&&o.disabled,Oe===t&&o.focusVisible),tabIndex:v?null:0,role:"slider",style:c,"data-index":t,"aria-label":g?g(t):n,"aria-labelledby":i,"aria-orientation":T,"aria-valuemax":M(O),"aria-valuemin":M(j),"aria-valuenow":M(e),"aria-valuetext":m?m(M(e),t):a,onKeyDown:Me,onFocus:Ee,onBlur:Pe,onMouseOver:Se,onMouseLeave:Te}))})))})),jy=Object(H.a)((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?Object(We.d)(e.palette.primary.main,.62):Object(We.a)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(Object(We.b)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(Object(We.b)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(Object(We.b)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(Object(We.b)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:Object(B.a)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(_y),ky=r.forwardRef((function(e,t){var n=e.autoFocus,i=e.checked,a=e.checkedIcon,o=e.classes,s=e.className,c=e.defaultChecked,u=e.disabled,l=e.icon,h=e.id,f=e.inputProps,d=e.inputRef,p=e.name,v=e.onBlur,g=e.onChange,m=e.onFocus,b=e.readOnly,y=e.required,w=e.tabIndex,O=e.type,_=e.value,j=Object(V.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),k=Bm({controlled:i,default:Boolean(c),name:"SwitchBase",state:"checked"}),x=Object(we.a)(k,2),E=x[0],P=x[1],S=kb(),T=u;S&&void 0===T&&(T=S.disabled);var C="checkbox"===O||"radio"===O;return r.createElement(pt,Object(B.a)({component:"span",className:Object(G.a)(o.root,s,E&&o.checked,T&&o.disabled),disabled:T,tabIndex:null,role:void 0,onFocus:function(e){m&&m(e),S&&S.onFocus&&S.onFocus(e)},onBlur:function(e){v&&v(e),S&&S.onBlur&&S.onBlur(e)},ref:t},j),r.createElement("input",Object(B.a)({autoFocus:n,checked:i,defaultChecked:c,className:o.input,disabled:T,id:C&&h,name:p,onChange:function(e){var t=e.target.checked;P(t),g&&g(e,t)},readOnly:b,ref:d,required:y,tabIndex:w,type:O,value:_},f)),E?a:l)})),xy=Object(H.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(ky),Ey=r.forwardRef((function(e,t){var n=e.classes,i=e.className,a=e.color,o=void 0===a?"secondary":a,s=e.edge,c=void 0!==s&&s,u=e.size,l=void 0===u?"medium":u,h=Object(V.a)(e,["classes","className","color","edge","size"]),f=r.createElement("span",{className:n.thumb});return r.createElement("span",{className:Object(G.a)(n.root,i,{start:n.edgeStart,end:n.edgeEnd}[c],"small"===l&&n["size".concat(q(l))])},r.createElement(xy,Object(B.a)({type:"checkbox",icon:f,checkedIcon:f,classes:{root:Object(G.a)(n.switchBase,n["color".concat(q(o))]),input:n.input,checked:n.checked,disabled:n.disabled},ref:t},h)),r.createElement("span",{className:n.track}))})),Py=Object(H.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(We.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(We.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(Ey);const Sy=Object(I.a)(e=>({item:{margin:e.spacing(1.5)+"px 0"}})),Ty=e=>{let{children:t,title:n="",row:r=!1}=e;const a=Sy();return i.a.createElement("div",{className:a.item},i.a.createElement(xm,{item:!0,container:!0,direction:r?"row":"column",alignItems:r?"center":"flex-start"},n&&i.a.createElement(xm,{item:!0,xs:12},i.a.createElement(Sm,{gutterBottom:!0,color:"textSecondary",variant:"button",component:"div"},n)),t))},Cy=e=>{let{onStart:t,onPause:n,onUnPause:r,onFullSpeed:s,onStop:c}=e;const u=Object(a.b)(),l=Object(o.a)(),h=Object(a.c)(v),f=Object(a.c)(g),d=Object(a.c)(m),p=Object(a.c)(b),_=Object(a.c)(S),k=Object(a.c)(y),x=Object(a.c)(w),E=Object(a.c)(O),P=Object(a.c)(j),T=(e,t)=>n=>{const r=n.target.checked?e:t;u(R.E(r))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(qm,{highlight:!0},i.a.createElement(Ty,{title:"Algorithm"},i.a.createElement(xm,{container:!0,alignItems:"center"},i.a.createElement(xm,{item:!0,xs:11},i.a.createElement(Jb,{value:h,onChange:e=>{e.persist(),c();const t=e.target.value,{defaults:n}=l.find(e=>e.solverKey===t);u(R.B(t,n))},disabled:k||E||P,variant:"outlined",fullWidth:!0,margin:"dense"},i.a.createElement(ty,null,"Heuristic Construction"),l.filter(e=>"heuristic-construction"===e.type).map(e=>i.a.createElement(oy,{value:e.solverKey,key:e.solverKey},e.friendlyName)),i.a.createElement(ty,null,"Heuristic Improvement"),l.filter(e=>"heuristic-improvement"===e.type).map(e=>i.a.createElement(oy,{value:e.solverKey,key:e.solverKey},e.friendlyName)),i.a.createElement(ty,null,"Exhaustive"),l.filter(e=>"exhaustive"===e.type).map(e=>i.a.createElement(oy,{value:e.solverKey,key:e.solverKey},e.friendlyName)))),i.a.createElement(xm,{item:!0,xs:1},i.a.createElement(Sm,{align:"right",color:"textSecondary"},i.a.createElement(pt,{edge:"end",onClick:()=>{u(R.N())}},i.a.createElement(Tt,{icon:Mt.h,size:"xs"})))))),i.a.createElement(Ty,{title:"Controls"},i.a.createElement(ly,{fullWidth:!0,variant:"outlined",color:"secondary",size:"large"},i.a.createElement(cy,{onClick:E?r:k?n:t,disabled:P||x},i.a.createElement(Tt,{icon:E?Mt.g:k?Mt.f:Mt.g,width:"0"})),i.a.createElement(cy,{onClick:E?c:s,disabled:!k&&!E||P||x},i.a.createElement(Tt,{icon:E?Mt.l:Mt.b,width:"0"})),i.a.createElement(cy,{onClick:()=>{c(),u(R.A())},disabled:k||P},i.a.createElement(Tt,{icon:Mt.j,width:"0"})))),i.a.createElement(Ty,{title:"Delay"},i.a.createElement(jy,{value:f,onChange:(e,t)=>{u(R.D(t))},step:25,min:0,max:250,valueLabelDisplay:"auto",color:"secondary",disabled:P||x}))),i.a.createElement(qm,null,i.a.createElement(Ty,{row:!0},i.a.createElement(xm,{item:!0,xs:10},i.a.createElement(Sm,{variant:"button",color:"textSecondary",component:"div"},"Show Best Path")),i.a.createElement(xm,{item:!0,xs:2},i.a.createElement(Py,{checked:_,onChange:e=>{u(R.G(e.target.checked))},color:"secondary",disabled:P||x,id:"show-best-path"})),i.a.createElement(xm,{item:!0,xs:10},i.a.createElement(Sm,{variant:"button",color:"textSecondary",component:"div"},"Show Evaluated Paths")),i.a.createElement(xm,{item:!0,xs:2},i.a.createElement(Py,{checked:d>0,onChange:T(1,0),color:"secondary",disabled:P||x,id:"show-evaluating-paths"})),p>1&&i.a.createElement(i.a.Fragment,null,i.a.createElement(xm,{item:!0,xs:10},i.a.createElement(Sm,{variant:"button",color:"textSecondary",component:"div"},"Show Evaluated Steps")),i.a.createElement(xm,{item:!0,xs:2},i.a.createElement(Py,{checked:d>1,onChange:T(2,1),color:"secondary",disabled:P||x,id:"show-evaluating-steps"}))))))},My=Object(I.a)(e=>({grow:{flexGrow:1,paddingRight:e.spacing(1)},unit:{flexShrink:0,width:"2rem"}})),Ay=e=>{const t=My(),n=Object(a.c)(C),o=Object(a.c)(A),s=Object(a.c)(_),{0:c,1:u}=Object(r.useState)(0);return Object(r.useEffect)(()=>{if(s){const e=setInterval(()=>{u(Math.floor((Date.now()-s)/1e3))},1e3);return()=>clearInterval(e)}},[s]),i.a.createElement(qm,null,i.a.createElement(Ty,{row:!0},i.a.createElement(xm,{item:!0,container:!0,justify:"space-between"},i.a.createElement(Sm,{display:"inline",variant:"button",color:"textSecondary",component:"div"},"Current Best:"," "),i.a.createElement(Sm,{classes:{root:t.grow},align:"right",display:"inline",variant:"button"},n),i.a.createElement(Sm,{classes:{root:t.unit},align:"right",display:"inline",variant:"button"},"km")),i.a.createElement(xm,{item:!0,container:!0,justify:"space-between"},i.a.createElement(Sm,{display:"inline",variant:"button",color:"textSecondary",component:"div"},"Evaluating:"," "),i.a.createElement(Sm,{classes:{root:t.grow},align:"right",display:"inline",variant:"button"},o),i.a.createElement(Sm,{classes:{root:t.unit},align:"right",display:"inline",variant:"button"},"km")),i.a.createElement(xm,{item:!0,container:!0,justify:"space-between"},i.a.createElement(Sm,{display:"inline",variant:"button",color:"textSecondary",component:"div"},"Running For:"," "),i.a.createElement(Sm,{classes:{root:t.grow},align:"right",display:"inline",variant:"button"},c||""),i.a.createElement(Sm,{classes:{root:t.unit},align:"right",display:"inline",variant:"button"},"s"))))};const Ly=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(I.a)(e,Object(B.a)({defaultTheme:N.a},t))}(e=>({grow:{flexGrow:1}}));let Ry=["1e+0","1e+0"];const Iy=e=>{let{onRandomizePoints:t}=e;const n=Ly(),{0:o,1:s}=Object(r.useState)("0"),c=Object(a.b)(),u=Object(a.c)(k),l=Object(a.c)(y),h=Object(a.c)(j);Object(r.useEffect)(()=>{s((e=>{if(e<=2)return"1e+0";if(void 0!==Ry[e-1])return Ry[e-1];let t=1;for(let n=1;n<=e;n++)t*=n,Ry[n]=(t/2).toExponential(3);return Ry[e-1]})(u))},[u]);const[f,d]=o.split("e+");return i.a.createElement(qm,null,i.a.createElement(Ty,{title:"Points"},i.a.createElement(ly,{fullWidth:!0,variant:"outlined",color:"secondary",size:"large",disabled:l},i.a.createElement(cy,{onClick:t,disabled:h||u<3},i.a.createElement(Tt,{icon:Mt.i,width:"0"})),i.a.createElement(cy,{onClick:()=>{const e=h?R.L():R.I();c(e)}},i.a.createElement(Tt,{icon:h?Mt.k:Mt.e,width:"0"})),i.a.createElement(cy,{disabled:h,onClick:()=>{c(R.C())}},i.a.createElement(Tt,{icon:Mt.d,width:"0"})))),i.a.createElement(Ty,{title:"Number of random points"},i.a.createElement(jy,{value:u,onChange:(e,t)=>{c(R.F(t))},step:1,min:3,max:200,valueLabelDisplay:"auto",color:"secondary",disabled:l||h})),i.a.createElement(Ty,{row:!0},i.a.createElement(xm,{item:!0,container:!0,justify:"space-between"},i.a.createElement(Sm,{display:"inline",variant:"button",color:"textSecondary",component:"div"},"Possible Paths:"," "),i.a.createElement(Sm,{classes:{root:n.grow},align:"right",display:"inline",component:"span"},f," x 10",i.a.createElement("sup",null,d)))))},Dy=()=>{const{colorMode:e,toggleColorMode:t}=Object(mm.b)();return i.a.createElement(Py,{checked:"dark"===e,onChange:t,color:"secondary"})},Ny=e=>i.a.createElement(qm,null,i.a.createElement(Ty,{row:!0},i.a.createElement(xm,{item:!0,xs:10},i.a.createElement(Sm,{variant:"button",color:"textSecondary",component:"div"},"Dark Mode")),i.a.createElement(xm,{item:!0,xs:2},i.a.createElement(Dy,null)))),Fy=Object(I.a)(e=>({wrapper:{overflowY:"auto",flex:"0 0 400px",padding:e.spacing(2),display:"flex",flexDirection:"column",flexWrap:"nowrap",alginItems:"flex-start",zIndex:100},[e.breakpoints.down("sm")]:{width:"100%"}})),By=e=>{let{onStart:t,onPause:n,onUnPause:r,onFullSpeed:a,onStop:o,onRandomizePoints:s}=e;const c=Fy();return i.a.createElement(Ne,{classes:{root:c.wrapper}},i.a.createElement(Zm,null),i.a.createElement(wm,null),i.a.createElement(Ay,null),i.a.createElement(Cy,{onStart:t,onPause:n,onUnPause:r,onStop:o,onFullSpeed:a}),i.a.createElement(wm,null),i.a.createElement(Iy,{onRandomizePoints:s}),i.a.createElement(wm,null),i.a.createElement(Ny,null))};n("qh3X");var zy=n("TJpk"),Uy=n.n(zy);const Vy="Interactive solver for the traveling salesman problem to visualize different algorithms. Includes various Heuristic and Exhaustive algorithms.",Wy=e=>{let{subtitle:t}=e;return i.a.createElement(Uy.a,{title:`${t}${t?" | ":""}Traveling Salesman Problem Visualizer`,htmlAttributes:{lang:"en"}},i.a.createElement("meta",{name:"description",content:Vy}),i.a.createElement("meta",{property:"og:title",content:"Traveling Salesman Problem Visualizer"}),i.a.createElement("meta",{property:"og:url",content:"https://tspvis.com"}),i.a.createElement("meta",{property:"og:description",content:Vy}),i.a.createElement("meta",{property:"og:image",content:"https://i.imgur.com/u4ibcsC.jpg"}),i.a.createElement("meta",{property:"og:type",content:"website"}))};t.default=()=>{const e=Object(r.useRef)(null),t=Object(a.b)(),n=Object(a.c)(v),s=Object(o.a)(),c=Object(a.c)(g),u=Object(a.c)(m),l=Object(a.c)(E),h=Object(a.c)(k),f=Object(a.c)(j),d=Object(o.d)(t,n),p=Object(r.useCallback)(()=>{if(!f){const n=e.current.getBounds();t(R.z(n,h))}},[e,t,h,f]),b=Object(r.useCallback)(()=>{t(R.J(l,c,u)),d.postMessage(R.K(l,c,u))},[d,t,c,l,u]),y=Object(r.useCallback)(()=>{t(R.x()),d.postMessage(R.x())},[d,t]),w=Object(r.useCallback)(()=>{t(R.y()),d.postMessage(R.y())},[d,t]),O=Object(r.useCallback)(()=>{t(R.P()),d.postMessage(R.P())},[d,t]),_=Object(r.useCallback)(()=>{t(R.M()),d.terminate()},[d,t]);Object(r.useEffect)(()=>{d.postMessage(R.D(c))},[c,d]),Object(r.useEffect)(()=>{d.postMessage(R.E(u))},[u,d]);const x=Object(r.useMemo)(()=>s.find(e=>e.solverKey===n).friendlyName,[n,s]);return i.a.createElement(Nt,null,i.a.createElement(Wy,{subtitle:x}),i.a.createElement(It,null),i.a.createElement(Rt,null),i.a.createElement(By,{onStart:b,onPause:w,onUnPause:O,onFullSpeed:y,onStop:_,onRandomizePoints:p}),i.a.createElement(bm,{ref:e}))}},T8J6:function(e,t,n){"use strict";(function(e){var r=n("U8pU");t.a="undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type||!(void 0===e||"object"!==Object(r.a)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n("8oxB"))},TJpk:function(e,t,n){t.__esModule=!0,t.Helmet=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=h(n("q1tI")),o=h(n("17x9")),s=h(n("8+s/")),c=h(n("bmMU")),u=n("v1p5"),l=n("hFT/");function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v,g,m,b=(0,s.default)(u.reducePropsToState,u.handleClientStateChange,u.mapStateOnServer)((function(){return null})),y=(v=b,m=g=function(e){function t(){return d(this,t),p(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!(0,c.default)(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case l.TAG_NAMES.SCRIPT:case l.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case l.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,i=e.arrayTypeChildren,a=e.newChildProps,o=e.nestedChildren;return r({},i,((t={})[n.type]=[].concat(i[n.type]||[],[r({},a,this.mapNestedChildrenToProps(n,o))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,i=e.child,a=e.newProps,o=e.newChildProps,s=e.nestedChildren;switch(i.type){case l.TAG_NAMES.TITLE:return r({},a,((t={})[i.type]=s,t.titleAttributes=r({},o),t));case l.TAG_NAMES.BODY:return r({},a,{bodyAttributes:r({},o)});case l.TAG_NAMES.HTML:return r({},a,{htmlAttributes:r({},o)})}return r({},a,((n={})[i.type]=r({},o),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=r({},t);return Object.keys(e).forEach((function(t){var i;n=r({},n,((i={})[t]=e[t],i))})),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return a.default.Children.forEach(e,(function(e){if(e&&e.props){var i=e.props,a=i.children,o=f(i,["children"]),s=(0,u.convertReactPropstoHtmlAttributes)(o);switch(n.warnOnInvalidChildren(e,a),e.type){case l.TAG_NAMES.LINK:case l.TAG_NAMES.META:case l.TAG_NAMES.NOSCRIPT:case l.TAG_NAMES.SCRIPT:case l.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:a});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:a})}}})),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=f(e,["children"]),i=r({},n);return t&&(i=this.mapChildrenToProps(t,i)),a.default.createElement(v,i)},i(t,null,[{key:"canUseDOM",set:function(e){v.canUseDOM=e}}]),t}(a.default.Component),g.propTypes={base:o.default.object,bodyAttributes:o.default.object,children:o.default.oneOfType([o.default.arrayOf(o.default.node),o.default.node]),defaultTitle:o.default.string,defer:o.default.bool,encodeSpecialCharacters:o.default.bool,htmlAttributes:o.default.object,link:o.default.arrayOf(o.default.object),meta:o.default.arrayOf(o.default.object),noscript:o.default.arrayOf(o.default.object),onChangeClientState:o.default.func,script:o.default.arrayOf(o.default.object),style:o.default.arrayOf(o.default.object),title:o.default.string,titleAttributes:o.default.object,titleTemplate:o.default.string},g.defaultProps={defer:!0,encodeSpecialCharacters:!0},g.peek=v.peek,g.rewind=function(){var e=v.rewind();return e||(e=(0,u.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},m);y.renderStatic=y.rewind,t.Helmet=y,t.default=y},TZTB:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return a}));var i=n("U8pU"),a=("object"!==(void 0===e?"undefined":Object(i.a)(e))||"[object process]"!==String(e)||e.browser,"undefined"!=typeof window&&window,void 0!==r?r:window);"undefined"!=typeof document&&document}).call(this,n("8oxB"),n("yLpj"))},"U//q":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return v}));var r=n("1OyB"),i=n("vuIU"),a=n("7+mA"),o=n("LhmN"),s=n("t+rZ"),c=n("c+tY"),u=n("1eIE");function l(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function h(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s,c=n.apply(void 0,[e.state._updateCache].concat(a)),u=c.valueChanged,l=c.oldValue;u&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(a)),r.apply(void 0,a));return l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,a=void 0!==i&&i,c=n.log,u=void 0===c?function(){}:c;Object(r.a)(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=a?Object(s.a)(t):Object.assign({},o.b),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(c.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(s.c)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)Object(c.a)(void 0!==i),Object(u.a)(e[i],this.cache[i])||(n=!0,t=this.cache[i],r&&!(i in r)&&(r[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:n,oldValue:t}}}]),e}();function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(c.a)(void 0!==o),!t.state){var s=void 0!==e?e:window;for(var u in s.polyfillContext&&s.polyfillContext(t),t.state=new f(t,{copyState:o,enable:i}),a.a){var d=a.a[u];h(t,u,d)}l(t,"getParameter"),l(t,"isEnabled")}return t.state.enable=i,t}function p(e){e.state||d(e,{copyState:!1}),e.state.push()}function v(e){Object(c.a)(e.state),e.state.pop()}}).call(this,n("yLpj"))},URgk:function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},Vame:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:e,a=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var o={get passive(){return a=!0,!0}};i.addEventListener("test",o,o),i.removeEventListener("test",o,o)}catch(s){}}).call(this,n("yLpj"))},VvNH:function(e,t,n){"use strict";(function(e){var r=n("a3TU"),i=n("zXfU");n.d(t,"b",(function(){return i.a}));var a=n("Nw31");n.d(t,"a",(function(){return a.a})),n.d(t,"e",(function(){return r.d})),n.d(t,"d",(function(){return r.a})),n.d(t,"f",(function(){return r.g}));var o=n("+rE/");n.d(t,"c",(function(){return o.a}));var s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e};(s.global||s.self||s.window).mathgl={config:r.b}}).call(this,n("yLpj"))},YBdB:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,c=1,u={},l=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=d}function d(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("yLpj"),n("8oxB"))},ZaHm:function(e,t,n){"use strict";n.d(t,"p",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"o",(function(){return c})),n.d(t,"n",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return y}));var r=n("yU0y");function i(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function a(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],u=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],b=n*s-r*o,y=n*c-i*o,w=n*u-a*o,O=r*c-i*s,_=r*u-a*s,j=i*u-a*c,k=l*v-h*p,x=l*g-f*p,E=l*m-d*p,P=h*g-f*v,S=h*m-d*v,T=f*m-d*g,C=b*T-y*S+w*P+O*E-_*x+j*k;return C?(C=1/C,e[0]=(s*T-c*S+u*P)*C,e[1]=(i*S-r*T-a*P)*C,e[2]=(v*j-g*_+m*O)*C,e[3]=(f*_-h*j-d*O)*C,e[4]=(c*E-o*T-u*x)*C,e[5]=(n*T-i*E+a*x)*C,e[6]=(g*w-p*j-m*y)*C,e[7]=(l*j-f*w+d*y)*C,e[8]=(o*S-s*E+u*k)*C,e[9]=(r*E-n*S-a*k)*C,e[10]=(p*_-v*w+m*b)*C,e[11]=(h*w-l*_-d*b)*C,e[12]=(s*x-o*P-c*k)*C,e[13]=(n*P-r*x+i*k)*C,e[14]=(v*y-p*O-g*b)*C,e[15]=(l*O-h*y+f*b)*C,e):null}function o(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],u=e[8],l=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],g=e[15];return(t*o-n*a)*(h*g-f*v)-(t*s-r*a)*(l*g-f*p)+(t*c-i*a)*(l*v-h*p)+(n*s-r*o)*(u*g-f*d)-(n*c-i*o)*(u*v-h*d)+(r*c-i*s)*(u*p-l*d)}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],u=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],b=t[15],y=n[0],w=n[1],O=n[2],_=n[3];return e[0]=y*r+w*s+O*h+_*v,e[1]=y*i+w*c+O*f+_*g,e[2]=y*a+w*u+O*d+_*m,e[3]=y*o+w*l+O*p+_*b,y=n[4],w=n[5],O=n[6],_=n[7],e[4]=y*r+w*s+O*h+_*v,e[5]=y*i+w*c+O*f+_*g,e[6]=y*a+w*u+O*d+_*m,e[7]=y*o+w*l+O*p+_*b,y=n[8],w=n[9],O=n[10],_=n[11],e[8]=y*r+w*s+O*h+_*v,e[9]=y*i+w*c+O*f+_*g,e[10]=y*a+w*u+O*d+_*m,e[11]=y*o+w*l+O*p+_*b,y=n[12],w=n[13],O=n[14],_=n[15],e[12]=y*r+w*s+O*h+_*v,e[13]=y*i+w*c+O*f+_*g,e[14]=y*a+w*u+O*d+_*m,e[15]=y*o+w*l+O*p+_*b,e}function c(e,t,n){var r,i,a,o,s,c,u,l,h,f,d,p,v=n[0],g=n[1],m=n[2];return t===e?(e[12]=t[0]*v+t[4]*g+t[8]*m+t[12],e[13]=t[1]*v+t[5]*g+t[9]*m+t[13],e[14]=t[2]*v+t[6]*g+t[10]*m+t[14],e[15]=t[3]*v+t[7]*g+t[11]*m+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],u=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=u,e[7]=l,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=r*v+s*g+h*m+t[12],e[13]=i*v+c*g+f*m+t[13],e[14]=a*v+u*g+d*m+t[14],e[15]=o*v+l*g+p*m+t[15]),e}function u(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function l(e,t,n,i){var a,o,s,c,u,l,h,f,d,p,v,g,m,b,y,w,O,_,j,k,x,E,P,S,T=i[0],C=i[1],M=i[2],A=Math.hypot(T,C,M);return A<r.b?null:(T*=A=1/A,C*=A,M*=A,a=Math.sin(n),s=1-(o=Math.cos(n)),c=t[0],u=t[1],l=t[2],h=t[3],f=t[4],d=t[5],p=t[6],v=t[7],g=t[8],m=t[9],b=t[10],y=t[11],w=T*T*s+o,O=C*T*s+M*a,_=M*T*s-C*a,j=T*C*s-M*a,k=C*C*s+o,x=M*C*s+T*a,E=T*M*s+C*a,P=C*M*s-T*a,S=M*M*s+o,e[0]=c*w+f*O+g*_,e[1]=u*w+d*O+m*_,e[2]=l*w+p*O+b*_,e[3]=h*w+v*O+y*_,e[4]=c*j+f*k+g*x,e[5]=u*j+d*k+m*x,e[6]=l*j+p*k+b*x,e[7]=h*j+v*k+y*x,e[8]=c*E+f*P+g*S,e[9]=u*E+d*P+m*S,e[10]=l*E+p*P+b*S,e[11]=h*E+v*P+y*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function h(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],c=t[7],u=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+l*r,e[6]=s*i+h*r,e[7]=c*i+f*r,e[8]=u*i-a*r,e[9]=l*i-o*r,e[10]=h*i-s*r,e[11]=f*i-c*r,e}function f(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],u=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-l*r,e[2]=s*i-h*r,e[3]=c*i-f*r,e[8]=a*r+u*i,e[9]=o*r+l*i,e[10]=s*r+h*i,e[11]=c*r+f*i,e}function d(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],u=t[4],l=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+l*r,e[2]=s*i+h*r,e[3]=c*i+f*r,e[4]=u*i-a*r,e[5]=l*i-o*r,e[6]=h*i-s*r,e[7]=f*i-c*r,e}function p(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,u=n*o,l=r*o,h=r*s,f=i*o,d=i*s,p=i*c,v=a*o,g=a*s,m=a*c;return e[0]=1-h-p,e[1]=l+m,e[2]=f-g,e[3]=0,e[4]=l-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=f+g,e[9]=d-v,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t,n,r,i,a,o){var s=1/(n-t),c=1/(i-r),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*c,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}var g=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e};var m=function(e,t,n,r,i,a,o){var s=1/(t-n),c=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(o+a)*u,e[15]=1,e};function b(e,t,n,i){var a,o,s,c,u,l,h,f,d,p,v=t[0],g=t[1],m=t[2],b=i[0],y=i[1],w=i[2],O=n[0],_=n[1],j=n[2];return Math.abs(v-O)<r.b&&Math.abs(g-_)<r.b&&Math.abs(m-j)<r.b?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(h=v-O,f=g-_,d=m-j,a=y*(d*=p=1/Math.hypot(h,f,d))-w*(f*=p),o=w*(h*=p)-b*d,s=b*f-y*h,(p=Math.hypot(a,o,s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0),c=f*s-d*o,u=d*a-h*s,l=h*o-f*a,(p=Math.hypot(c,u,l))?(c*=p=1/p,u*=p,l*=p):(c=0,u=0,l=0),e[0]=a,e[1]=c,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=s,e[9]=l,e[10]=d,e[11]=0,e[12]=-(a*v+o*g+s*m),e[13]=-(c*v+u*g+l*m),e[14]=-(h*v+f*g+d*m),e[15]=1,e)}function y(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],u=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],b=e[15],y=t[0],w=t[1],O=t[2],_=t[3],j=t[4],k=t[5],x=t[6],E=t[7],P=t[8],S=t[9],T=t[10],C=t[11],M=t[12],A=t[13],L=t[14],R=t[15];return Math.abs(n-y)<=r.b*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-w)<=r.b*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-O)<=r.b*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(o-_)<=r.b*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-j)<=r.b*Math.max(1,Math.abs(s),Math.abs(j))&&Math.abs(c-k)<=r.b*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(u-x)<=r.b*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-E)<=r.b*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-P)<=r.b*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-S)<=r.b*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(d-T)<=r.b*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-C)<=r.b*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(v-M)<=r.b*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(g-A)<=r.b*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(m-L)<=r.b*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(b-R)<=r.b*Math.max(1,Math.abs(b),Math.abs(R))}},ZxFD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return f}));var r=n("yU0y");function i(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function a(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function o(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function s(e,t){return e[0]=-t[0],e[1]=-t[1],e}function c(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function u(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}var l,h,f=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};l=new r.a(2),r.a!=Float32Array&&(l[0]=0,l[1]=0),h=l},a3TU:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return p}));n("U8pU"),n("RHh3"),n("KQm4"),n("tS8E");var r=1/Math.PI*180,i=1/180*Math.PI,a={};function o(e){return Math.round(e/a.EPSILON)*a.EPSILON}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?a.precision||4:n;return e=o(e),"".concat(parseFloat(e.toPrecision(r)))}function c(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u(e,t,n){if(c(e)){n=n||((i=e).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<e.length;++r)n[r]=t(e[r],r,n);return n}var i;return t(e)}function l(e,t){return u(e,(function(e){return e*i}),t)}function h(e,t){return u(e,(function(e){return e*r}),t)}function f(e,t,n){return u(e,(function(e){return Math.max(t,Math.min(n,e))}))}function d(e,t,n){return c(e)?e.map((function(e,r){return d(e,t[r],n)})):n*t+(1-n)*e}function p(e,t,n){var r=a.EPSILON;n&&(a.EPSILON=n);try{if(e===t)return!0;if(c(e)&&c(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!p(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{a.EPSILON=r}}a.EPSILON=1e-12,a.debug=!1,a.precision=4,a.printTypes=!1,a.printDegrees=!1,a.printRowMajor=!0},bdgK:function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var o=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&c()}function s(){a(o)}function c(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;o.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},h=m(0,0,0,0);function f(e){return parseFloat(e)||0}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}function p(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=l(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=f(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,s=f(r.width),c=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=d(r,"left","right")+a),Math.round(c+o)!==n&&(c-=d(r,"top","bottom")+o)),!function(e){return e===l(e).document.documentElement}(e)){var u=Math.round(s+a)-t,p=Math.round(c+o)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(p)&&(c-=p)}return m(i.left,i.top,s,c)}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"==typeof e.getBBox};function g(e){return r?v(e)?function(e){var t=e.getBBox();return m(0,0,t.width,t.height)}(e):p(e):h}function m(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),y=function(e,t){var n,r,i,a,o,s,c,l=(r=(n=t).x,i=n.y,a=n.width,o=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),u(c,{x:r,y:i,width:a,height:o,top:i,right:r+a,bottom:o+i,left:r}),c);u(this,{target:e,contentRect:l})},w=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new y(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),O="undefined"!=typeof WeakMap?new WeakMap:new n,_=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new w(t,n,this);O.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){_.prototype[e]=function(){var t;return(t=O.get(this))[e].apply(t,arguments)}}));var j=void 0!==i.ResizeObserver?i.ResizeObserver:_;t.a=j}).call(this,n("yLpj"))},bl9R:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("yU0y");function i(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function a(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}var o,s;o=new r.a(4),r.a!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),s=o},bmMU:function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty,o="undefined"!=typeof Element;e.exports=function(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s,c,u,l=r(t),h=r(n);if(l&&h){if((c=t.length)!=n.length)return!1;for(s=c;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(l!=h)return!1;var f=t instanceof Date,d=n instanceof Date;if(f!=d)return!1;if(f&&d)return t.getTime()==n.getTime();var p=t instanceof RegExp,v=n instanceof RegExp;if(p!=v)return!1;if(p&&v)return t.toString()==n.toString();var g=i(t);if((c=g.length)!==i(n).length)return!1;for(s=c;0!=s--;)if(!a.call(n,g[s]))return!1;if(o&&t instanceof Element&&n instanceof Element)return t===n;for(s=c;0!=s--;)if(!("_owner"===(u=g[s])&&t.$$typeof||e(t[u],n[u])))return!1;return!0}return t!=t&&n!=n}(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},"c+tY":function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n.d(t,"a",(function(){return r}))},eUbh:function(e,t,n){"use strict";(function(e){var t=n("9Hqq"),r=n("gVfD");function i(e,n){var i=n.extension,a=n.target,o=n.target2,s=r.b[i];Object(t.a)(s);for(var c=s.meta,u=(void 0===c?{}:c).suffix,l=void 0===u?"":u,h=e.getExtension(i),f=function(){var t=p[d],n="".concat(t).concat(l),r=null;"meta"===t||"function"==typeof e[t]||(h&&"function"==typeof h[n]?r=function(){return h[n].apply(h,arguments)}:"function"==typeof s[t]&&(r=s[t].bind(a))),r&&(a[t]=r,o[t]=r)},d=0,p=Object.keys(s);d<p.length;d++)f()}(void 0!==e?e:window).polyfillContext=function(e){return e.luma=e.luma||{},function(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(e),e.luma.polyfilled||(!function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,s=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;"overrides"!==c&&i(e,{extension:c,target:e.luma,target2:e})}}catch(u){r=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}(e,r.b),function(e,t){var n=t.target,i=t.target2;Object.keys(r.a).forEach((function(t){if("function"==typeof r.a[t]){var a=e[t]?e[t].bind(e):function(){},o=r.a[t].bind(null,e,a);n[t]=o,i[t]=o}}))}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0),e}}).call(this,n("yLpj"))},eqkD:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return o}));var i=n("U8pU"),a=("object"!==(void 0===e?"undefined":Object(i.a)(e))||"[object process]"!==String(e)||e.browser,{self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r&&r}),o=a.global||a.self||a.window}).call(this,n("8oxB"),n("yLpj"))},foSv:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},fsL8:function(e,t,n){var r=n("cDf5").default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return s(a,"_invoke",{value:S(e,n,o)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var v="suspendedStart",g="executing",m="completed",b={};function y(){}function w(){}function O(){}var _={};f(_,u,(function(){return this}));var j=Object.getPrototypeOf,k=j&&j(j(L([])));k&&k!==a&&o.call(k,u)&&(_=k);var x=O.prototype=y.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(i,a,s,c){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==r(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function S(e,n,r){var i=v;return function(a,o){if(i===g)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var u=p(e,n,r);if("normal"===u.type){if(i=r.done?m:"suspendedYield",u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=p(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=O,s(x,"constructor",{value:O,configurable:!0}),s(O,"constructor",{value:w,configurable:!0}),w.displayName=f(O,h,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,f(e,h,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},E(P.prototype),f(P.prototype,l,(function(){return this})),n.AsyncIterator=P,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new P(d(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(x),f(x,h,"Generator"),f(x,u,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},gVfD:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));var r,i,a=n("rePB"),o=n("9Hqq"),s=function(e){return u(e)?void 0:0},c=(r={},Object(a.a)(r,3074,(function(e){return u(e)?void 0:36064})),Object(a.a)(r,35723,(function(e){return u(e)?void 0:4352})),Object(a.a)(r,35977,s),Object(a.a)(r,32937,s),Object(a.a)(r,36795,(function(e,t){var n=u(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0})),Object(a.a)(r,37445,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(a.a)(r,37446,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(a.a)(r,34047,(function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(a.a)(r,32883,s),Object(a.a)(r,35071,s),Object(a.a)(r,37447,s),Object(a.a)(r,36063,(function(e,t){if(!u(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(a.a)(r,35379,s),Object(a.a)(r,35374,s),Object(a.a)(r,35377,s),Object(a.a)(r,34852,(function(e){if(!u(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(a.a)(r,36203,(function(e){return e.getExtension("OES_element_index")?2147483647:65535})),Object(a.a)(r,33001,(function(e){return e.getExtension("OES_element_index")?16777216:65535})),Object(a.a)(r,33e3,(function(e){return 16777216})),Object(a.a)(r,37157,s),Object(a.a)(r,35373,s),Object(a.a)(r,35657,s),Object(a.a)(r,36183,s),Object(a.a)(r,37137,s),Object(a.a)(r,34045,s),Object(a.a)(r,35978,s),Object(a.a)(r,35979,s),Object(a.a)(r,35968,s),Object(a.a)(r,35376,s),Object(a.a)(r,35375,s),Object(a.a)(r,35659,s),Object(a.a)(r,37154,s),Object(a.a)(r,35371,s),Object(a.a)(r,35658,s),Object(a.a)(r,35076,s),Object(a.a)(r,35077,s),Object(a.a)(r,35380,s),r);function u(e){return Boolean(e&&2===e._version)}function l(e){return Boolean(e&&2===e._version)}var h=(i={},Object(a.a)(i,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(o.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(i,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Object(o.a)(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),i),f={readBuffer:function(e,t,n){l(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i,a=function(e,t){return{webgl2:l(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),o=a.webgl2,s=a.ext;switch(r){case 35069:i=!!o&&void 0;break;case 35070:i=o||s?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function(e,t,n,r){if(!l(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,i){if(!l(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:function(e,t,n){var r=c[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)},hint:function(e,t,n,r){return t(n,r)}}},gYLD:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("rePB");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function u(e){if(!e)return null;if("string"==typeof e)return e;e.toJS&&(e=e.toJS());var t,n={},r=o(e.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.id]=i}}catch(u){r.e(u)}finally{r.f()}var s=e.layers.map((function(e){var t=n[e.ref],r=null;if("interactive"in e&&delete(r=a({},e)).interactive,t){delete(r=r||a({},e)).ref;var i,s=o(c);try{for(s.s();!(i=s.n()).done;){var l=i.value;l in t&&(r[l]=t[l])}}catch(u){s.e(u)}finally{s.f()}}return r||e}));return a(a({},e),{},{layers:s})}},"hFT/":function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map((function(e){return n[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"},iTDY:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},i=r.window||r.self||r.global,a=r.global||r.self||r.window}).call(this,n("yLpj"))},kLp3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window&&window.addEventListener,a=new Map,o=function(){return i&&window.__SEER_INITIALIZED__},s=function(e,t){var n=a.get(e),r=Date.now();return!!(n&&r-n<t)||(a.set(e,r),!1)},c=function(e){return function(t,n){if(!n||"object"!==(void 0===n?"undefined":r(n))||!e.has(n))return e.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&o()){var n=new Set,r=JSON.stringify(t,c(n));try{window.postMessage({type:e,payload:r,source:"seer-agent"},"*")}catch(a){if(s("seer-log",2e3))return;console.log(a)}}},l=new Map,h=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,r=t.payload,i=l.get(n);i&&i.forEach((function(e){return e(r)}))}},f=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",h),window.__SEER_LISTENER__=!0)};t.default={send:u,throttle:s,isReady:o,list:function(e,t){return u("LIST",{key:e,data:t})},listItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("LIST_ITEM",{key:e,itemKey:t,data:n})},updateItem:function(e,t,n,r){return u("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:r})},multiUpdate:function(e,t,n){return u("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},deleteItem:function(e,t){return u("DELETE_ITEM",{key:e,itemKey:t})},addLog:function(e,t,n){return u("ADD_LOG",{key:e,itemKey:t,msg:n})},listeners:l,listenFor:function(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");l.has(e)||l.set(e,[]),window.__SEER_LISTENER__||f(),l.get(e).push(t)}},removeListener:function(e){l.forEach((function(t,n){l.set(n,t.filter((function(t){return t!==e})))}))},init:f,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",h),delete window.__SEER_LISTENER__)}}},md7G:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("U8pU"),i=n("JX7q");function a(e,t){if(t&&("object"===Object(r.a)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(i.a)(e)}},"n+fv":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return g}));var r=n("yU0y");function i(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function a(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];return e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function u(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],c=t[1],u=t[2],l=i*u-a*c,h=a*s-r*u,f=r*c-i*s,d=i*f-a*h,p=a*l-r*f,v=r*h-i*l,g=2*o;return l*=g,h*=g,f*=g,d*=2,p*=2,v*=2,e[0]=s+l+d,e[1]=c+h+p,e[2]=u+f+v,e}function l(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function h(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function f(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function d(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],c=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(a*a+o*o+s*s),u=c&&function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(e,t)/c;return Math.acos(Math.min(Math.max(u,-1),1))}var p,v,g=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};p=new r.a(3),r.a!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0),v=p},o0o1:function(e,t,n){var r=n("fsL8")();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},rG3h:function(e,t,n){},s5q1:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:e,a=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var o={get passive(){return a=!0,!0}};i.addEventListener("test",o,o),i.removeEventListener("test",o,o)}catch(s){}}).call(this,n("yLpj"))},"sSh/":function(e,t,n){"use strict";function r(e,t,n){var r=t[0],i=t[1],a=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/a,e[1]=(n[1]*r+n[5]*i)/a,e}function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a||1;return e[0]=(n[0]*r+n[4]*i+n[8]*a)/o,e[1]=(n[1]*r+n[5]*i+n[9]*a)/o,e[2]=(n[2]*r+n[6]*i+n[10]*a)/o,e}function a(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2],e}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}))},"t+rZ":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("LhmN");n("1eIE"),n("c+tY");function i(e,t){var n={};for(var i in t){var a=Number(i),o=r.d[i];o&&("string"==typeof o?n[o]=!0:o(e,t[i],a))}var s=e.state&&e.state.cache;if(s){var c=Object.assign({},s,t);for(var u in n){(0,r.a[u])(e,c)}}}function a(e,t){var n=r.c[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function o(e,t){t=t||r.b;var n=Array.isArray(t)?t:Object.keys(t),i={},o=!0,s=!1,c=void 0;try{for(var u,l=n[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;i[h]=a(e,h)}}catch(f){s=!0,c=f}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}return i}function s(e){i(e,Object.assign({},r.b,{}))}},tS8E:function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}n.d(t,"a",(function(){return r}))},v1p5:function(e,t,n){(function(e){t.__esModule=!0,t.warn=t.requestAnimationFrame=t.reducePropsToState=t.mapStateOnServer=t.handleClientStateChange=t.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n("q1tI")),o=c(n("YVoz")),s=n("hFT/");function c(e){return e&&e.__esModule?e:{default:e}}var u,l=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},h=function(e){var t=g(e,s.TAG_NAMES.TITLE),n=g(e,s.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,(function(){return t}));var r=g(e,s.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},f=function(e){return g(e,s.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},d=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return i({},e,t)}),{})},p=function(e,t){return t.filter((function(e){return void 0!==e[s.TAG_NAMES.BASE]})).map((function(e){return e[s.TAG_NAMES.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var a=r[i].toLowerCase();if(-1!==e.indexOf(a)&&n[a])return t.concat(n)}return t}),[])},v=function(e,t,n){var i={};return n.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&O("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var r={};n.filter((function(e){for(var n=void 0,a=Object.keys(e),o=0;o<a.length;o++){var c=a[o],u=c.toLowerCase();-1===t.indexOf(u)||n===s.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||u===s.TAG_PROPERTIES.REL&&"stylesheet"===e[u].toLowerCase()||(n=u),-1===t.indexOf(c)||c!==s.TAG_PROPERTIES.INNER_HTML&&c!==s.TAG_PROPERTIES.CSS_TEXT&&c!==s.TAG_PROPERTIES.ITEM_PROP||(n=c)}if(!n||!e[n])return!1;var l=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][l]&&(r[n][l]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var a=Object.keys(r),c=0;c<a.length;c++){var u=a[c],l=(0,o.default)({},i[u],r[u]);i[u]=l}return e}),[]).reverse()},g=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},m=(u=Date.now(),function(e){var t=Date.now();t-u>16?(u=t,e(t)):setTimeout((function(){m(e)}),0)}),b=function(e){return clearTimeout(e)},y="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||m:e.requestAnimationFrame||m,w="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||b:e.cancelAnimationFrame||b,O=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},_=null,j=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,a=e.linkTags,o=e.metaTags,c=e.noscriptTags,u=e.onChangeClientState,l=e.scriptTags,h=e.styleTags,f=e.title,d=e.titleAttributes;E(s.TAG_NAMES.BODY,r),E(s.TAG_NAMES.HTML,i),x(f,d);var p={baseTag:P(s.TAG_NAMES.BASE,n),linkTags:P(s.TAG_NAMES.LINK,a),metaTags:P(s.TAG_NAMES.META,o),noscriptTags:P(s.TAG_NAMES.NOSCRIPT,c),scriptTags:P(s.TAG_NAMES.SCRIPT,l),styleTags:P(s.TAG_NAMES.STYLE,h)},v={},g={};Object.keys(p).forEach((function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(v[e]=n),r.length&&(g[e]=p[e].oldTags)})),t&&t(),u(e,v,g)},k=function(e){return Array.isArray(e)?e.join(""):e},x=function(e,t){void 0!==e&&document.title!==e&&(document.title=k(e)),E(s.TAG_NAMES.TITLE,t)},E=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(s.HELMET_ATTRIBUTE),i=r?r.split(","):[],a=[].concat(i),o=Object.keys(t),c=0;c<o.length;c++){var u=o[c],l=t[u]||"";n.getAttribute(u)!==l&&n.setAttribute(u,l),-1===i.indexOf(u)&&i.push(u);var h=a.indexOf(u);-1!==h&&a.splice(h,1)}for(var f=a.length-1;f>=0;f--)n.removeAttribute(a[f]);i.length===a.length?n.removeAttribute(s.HELMET_ATTRIBUTE):n.getAttribute(s.HELMET_ATTRIBUTE)!==o.join(",")&&n.setAttribute(s.HELMET_ATTRIBUTE,o.join(","))}},P=function(e,t){var n=document.head||document.querySelector(s.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+s.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),a=[],o=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===s.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===s.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var c=void 0===t[r]?"":t[r];n.setAttribute(r,c)}n.setAttribute(s.HELMET_ATTRIBUTE,"true"),i.some((function(e,t){return o=t,n.isEqualNode(e)}))?i.splice(o,1):a.push(n)})),i.forEach((function(e){return e.parentNode.removeChild(e)})),a.forEach((function(e){return n.appendChild(e)})),{oldTags:i,newTags:a}},S=function(e){return Object.keys(e).reduce((function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[s.REACT_TAG_MAP[n]||n]=e[n],t}),t)},C=function(e,t,n){switch(e){case s.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[s.HELMET_ATTRIBUTE]=!0,i=T(n,r),[a.default.createElement(s.TAG_NAMES.TITLE,i,e)];var e,n,r,i},toString:function(){return function(e,t,n,r){var i=S(n),a=k(t);return i?"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+">"+l(a,r)+"</"+e+">":"<"+e+" "+s.HELMET_ATTRIBUTE+'="true">'+l(a,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case s.ATTRIBUTE_NAMES.BODY:case s.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return T(t)},toString:function(){return S(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var r,i=((r={key:n})[s.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach((function(e){var n=s.REACT_TAG_MAP[e]||e;if(n===s.TAG_PROPERTIES.INNER_HTML||n===s.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]})),a.default.createElement(e,i)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var i=Object.keys(r).filter((function(e){return!(e===s.TAG_PROPERTIES.INNER_HTML||e===s.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(e,t){var i=void 0===r[t]?t:t+'="'+l(r[t],n)+'"';return e?e+" "+i:i}),""),a=r.innerHTML||r.cssText||"",o=-1===s.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+(o?"/>":">"+a+"</"+e+">")}),"")}(e,t,n)}}}};t.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[s.HTML_TAG_MAP[n]||n]=e[n],t}),t)},t.handleClientStateChange=function(e){_&&w(_),e.defer?_=y((function(){j(e,(function(){_=null}))})):(j(e),_=null)},t.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,a=e.linkTags,o=e.metaTags,c=e.noscriptTags,u=e.scriptTags,l=e.styleTags,h=e.title,f=void 0===h?"":h,d=e.titleAttributes;return{base:C(s.TAG_NAMES.BASE,t,r),bodyAttributes:C(s.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:C(s.ATTRIBUTE_NAMES.HTML,i,r),link:C(s.TAG_NAMES.LINK,a,r),meta:C(s.TAG_NAMES.META,o,r),noscript:C(s.TAG_NAMES.NOSCRIPT,c,r),script:C(s.TAG_NAMES.SCRIPT,u,r),style:C(s.TAG_NAMES.STYLE,l,r),title:C(s.TAG_NAMES.TITLE,{title:f,titleAttributes:d},r)}},t.reducePropsToState=function(e){return{baseTag:p([s.TAG_PROPERTIES.HREF],e),bodyAttributes:d(s.ATTRIBUTE_NAMES.BODY,e),defer:g(e,s.HELMET_PROPS.DEFER),encode:g(e,s.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:d(s.ATTRIBUTE_NAMES.HTML,e),linkTags:v(s.TAG_NAMES.LINK,[s.TAG_PROPERTIES.REL,s.TAG_PROPERTIES.HREF],e),metaTags:v(s.TAG_NAMES.META,[s.TAG_PROPERTIES.NAME,s.TAG_PROPERTIES.CHARSET,s.TAG_PROPERTIES.HTTPEQUIV,s.TAG_PROPERTIES.PROPERTY,s.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:v(s.TAG_NAMES.NOSCRIPT,[s.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:f(e),scriptTags:v(s.TAG_NAMES.SCRIPT,[s.TAG_PROPERTIES.SRC,s.TAG_PROPERTIES.INNER_HTML],e),styleTags:v(s.TAG_NAMES.STYLE,[s.TAG_PROPERTIES.CSS_TEXT],e),title:h(e),titleAttributes:d(s.ATTRIBUTE_NAMES.TITLE,e)}},t.requestAnimationFrame=y,t.warn=O}).call(this,n("yLpj"))},y7xQ:function(e,t,n){"use strict";function r(e){for(var t in e)return!1;return!0}function i(e){return Boolean(e&&2===e._version)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},yLV6:function(e,t,n){var r;!function(i,a,o,s){"use strict";var c,u=["","webkit","Moz","MS","ms","o"],l=a.createElement("div"),h=Math.round,f=Math.abs,d=Date.now;function p(e,t,n){return setTimeout(O(e,n),t)}function v(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function m(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=i.console&&(i.console.warn||i.console.log);return a&&a.call(i.console,r,n),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var b=m((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&void 0===e[r[i]])&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),y=m((function(e,t){return b(e,t,!0)}),"merge","Use `assign`.");function w(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&c(r,n)}function O(e,t){return function(){return e.apply(t,arguments)}}function _(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function j(e,t){return void 0===e?t:e}function k(e,t,n){g(S(t),(function(t){e.addEventListener(t,n,!1)}))}function x(e,t,n){g(S(t),(function(t){e.removeEventListener(t,n,!1)}))}function E(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function P(e,t){return e.indexOf(t)>-1}function S(e){return e.trim().split(/\s+/g)}function T(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function M(e,t,n){for(var r=[],i=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];T(i,o)<0&&r.push(e[a]),i[a]=o,a++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function A(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),a=0;a<u.length;){if((r=(n=u[a])?n+i:t)in e)return r;a++}}var L=1;function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var I="ontouchstart"in i,D=void 0!==A(i,"PointerEvent"),N=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=["x","y"],B=["clientX","clientY"];function z(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){_(e.options.enable,[e])&&n.handler(t)},this.init()}function U(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,a=1&t&&r-i==0,o=12&t&&r-i==0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=V(t));i>1&&!n.firstMultiple?n.firstMultiple=V(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,c=t.center=W(r);t.timeStamp=d(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=q(s,c),t.distance=X(s,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};1!==t.eventType&&4!==a.eventType||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=H(t.deltaX,t.deltaY);var u=G(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,t.scale=o?(l=o.pointers,h=r,X(h[0],h[1],B)/X(l[0],l[1],B)):1,t.rotation=o?function(e,t){return q(t[1],t[0],B)+q(e[1],e[0],B)}(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(8!=t.eventType&&(s>25||void 0===o.velocity)){var c=t.deltaX-o.deltaX,u=t.deltaY-o.deltaY,l=G(s,c,u);r=l.x,i=l.y,n=f(l.x)>f(l.y)?l.x:l.y,a=H(c,u),e.lastInterval=t}else n=o.velocity,r=o.velocityX,i=o.velocityY,a=o.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=a}(n,t);var l,h;var p=e.element;E(t.srcEvent.target,p)&&(p=t.srcEvent.target);t.target=p}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function V(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:h(n/t),y:h(r/t)}}function G(e,t,n){return{x:t/e||0,y:n/e||0}}function H(e,t){return e===t?1:f(e)>=f(t)?e<0?2:4:t<0?8:16}function X(e,t,n){n||(n=F);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function q(e,t,n){n||(n=F);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(R(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4};function Z(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,z.apply(this,arguments)}w(Z,z,{handler:function(e){var t=Y[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},$={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",J="pointermove pointerup pointercancel";function ee(){this.evEl=Q,this.evWin=J,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(Q="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),w(ee,z,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=K[r],a=$[e.pointerType]||e.pointerType,o="touch"==a,s=T(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ne(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,z.apply(this,arguments)}function re(e,t){var n=C(e.touches),r=C(e.changedTouches);return 12&t&&(n=M(n.concat(r),"identifier",!0)),[n,r]}w(ne,z,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var n=re.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ae(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},z.apply(this,arguments)}function oe(e,t){var n=C(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=C(e.changedTouches),s=[],c=this.target;if(a=n.filter((function(e){return E(e.target,c)})),1===t)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),12&t&&delete r[o[i].identifier],i++;return s.length?[M(a.concat(s),"identifier",!0),s]:void 0}w(ae,z,{handler:function(e){var t=ie[e.type],n=oe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});function se(){z.apply(this,arguments);var e=O(this.handler,this);this.touch=new ae(this.manager,e),this.mouse=new Z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ce(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ue.call(this,t)):12&e&&ue.call(this,t)}function ue(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function le(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(t-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}w(se,z,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ce.call(this,t,n);else if(i&&le.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var he=A(l.style,"touchAction"),fe=void 0!==he,de=function(){if(!fe)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function pe(e,t){this.manager=e,this.set(t)}pe.prototype={set:function(e){"compute"==e&&(e=this.compute()),fe&&this.manager.element.style&&de[e]&&(this.manager.element.style[he]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){_(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(P(e,"none"))return"none";var t=P(e,"pan-x"),n=P(e,"pan-y");if(t&&n)return"none";if(t||n)return t?"pan-x":"pan-y";if(P(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=P(r,"none")&&!de.none,a=P(r,"pan-y")&&!de["pan-y"],o=P(r,"pan-x")&&!de["pan-x"];if(i){var s=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(s&&c&&u)return}if(!o||!a)return i||a&&6&n||o&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ve(e){this.options=c({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=j(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ge(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function me(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function be(e,t){var n=t.manager;return n?n.get(e):e}function ye(){ve.apply(this,arguments)}function we(){ye.apply(this,arguments),this.pX=null,this.pY=null}function Oe(){ye.apply(this,arguments)}function _e(){ve.apply(this,arguments),this._timer=null,this._input=null}function je(){ye.apply(this,arguments)}function ke(){ye.apply(this,arguments)}function xe(){ve.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ee(e,t){return(t=t||{}).recognizers=j(t.recognizers,Ee.defaults.preset),new Pe(e,t)}ve.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=be(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)||(e=be(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===T(t,e=be(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=be(e,this);var t=T(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+ge(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+ge(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!_(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(ye,ve,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:32}}),w(we,ye,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(6&t.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return ye.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=me(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Oe,ye,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(_e,ve,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),w(je,ye,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(ke,ye,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return we.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=me(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(xe,ve,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||X(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ee.VERSION="2.0.7",Ee.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[je,{enable:!1}],[Oe,{enable:!1},["rotate"]],[ke,{direction:6}],[we,{direction:6},["swipe"]],[xe],[xe,{event:"doubletap",taps:2},["tap"]],[_e]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Pe(e,t){var n;this.options=c({},Ee.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(D?ee:N?ae:I?se:Z))(n,U),this.touchAction=new pe(this,this.options.touchAction),Se(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Se(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,(function(i,a){n=A(r.style,a),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Pe.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),a++}},get:function(e){if(e instanceof ve)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=T(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return g(S(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return g(S(e),(function(e){t?n[e]&&n[e].splice(T(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Ee,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Pe,Input:z,TouchAction:pe,TouchInput:ae,MouseInput:Z,PointerEventInput:ee,TouchMouseInput:se,SingleTouchInput:ne,Recognizer:ve,AttrRecognizer:ye,Tap:xe,Pan:we,Swipe:ke,Pinch:Oe,Rotate:je,Press:_e,on:k,off:x,each:g,merge:y,extend:b,assign:c,inherit:w,bindFn:O,prefixed:A}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Ee,void 0===(r=function(){return Ee}.call(t,n,t,e))||(e.exports=r)}(window,document)},yU0y:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},zXfU:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("md7G"),s=n("foSv"),c=n("41X0"),u=n("+H0l"),l=n("tS8E");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var f=function(e){Object(a.a)(n,e);var t=h(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"copy",value:function(e){return Object(l.a)(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(u.a)(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Object(u.a)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return Object(l.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(u.a)(this[e])}},{key:"setComponent",value:function(e,t){return Object(l.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=Object(u.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=Object(u.a)(e)}}]),n}(c.a),d=n("a3TU"),p=n("n+fv"),v=n("sSh/");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var m=[0,0,0],b={},y=function(e){Object(a.a)(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,n),e=t.call(this,-0,-0,-0),1===arguments.length&&Object(d.f)(i)?e.copy(i):(d.b.debug&&(Object(u.a)(i),Object(u.a)(a),Object(u.a)(o)),e[0]=i,e[1]=a,e[2]=o),e}return Object(i.a)(n,null,[{key:"ZERO",get:function(){return b.ZERO=b.ZERO||Object.freeze(new n(0,0,0,0))}}]),Object(i.a)(n,[{key:"set",value:function(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return d.b.debug&&(Object(u.a)(e.x),Object(u.a)(e.y),Object(u.a)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"angle",value:function(e){return p.a(this,e)}},{key:"cross",value:function(e){return p.b(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?m:n;return p.e(this,this,r,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?m:n;return p.f(this,this,r,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?m:n;return p.g(this,this,r,t),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return p.j(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return Object(v.c)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return p.i(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return Object(v.b)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return p.k(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=Object(u.a)(e)}}]),n}(f)}}]);
//# sourceMappingURL=component---src-pages-index-js-10b95290c210c2a2c647.js.map