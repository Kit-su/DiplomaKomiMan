!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="SZ85")}({SZ85:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"SET_VIEWPORT_STATE",(function(){return s})),n.d(o,"RESET_EVALUATING_STATE",(function(){return i})),n.d(o,"RESET_BEST_PATH_STATE",(function(){return u})),n.d(o,"SET_ALGORITHM",(function(){return l})),n.d(o,"SET_DELAY",(function(){return a})),n.d(o,"SET_EVALUATING_DETAIL_LEVEL",(function(){return f})),n.d(o,"SET_SHOW_BEST_PATH",(function(){return c})),n.d(o,"START_SOLVING",(function(){return d})),n.d(o,"GO_FULL_SPEED",(function(){return p})),n.d(o,"PAUSE",(function(){return T})),n.d(o,"UNPAUSE",(function(){return E})),n.d(o,"STOP_SOLVING",(function(){return S})),n.d(o,"SET_BEST_PATH",(function(){return _})),n.d(o,"SET_EVALUATING_PATHS",(function(){return v})),n.d(o,"START_DEFINING_POINTS",(function(){return P})),n.d(o,"ADD_DEFINED_POINT",(function(){return g})),n.d(o,"STOP_DEFINING_POINTS",(function(){return y})),n.d(o,"SET_POINT_COUNT",(function(){return A})),n.d(o,"SET_POINTS",(function(){return h})),n.d(o,"SET_DEFAULT_MAP",(function(){return O})),n.d(o,"TOGGLE_SITE_INFO_OPEN",(function(){return I})),n.d(o,"TOGGLE_ALG_INFO_OPEN",(function(){return L})),n.d(o,"toggleSiteInfoOpen",(function(){return D})),n.d(o,"toggleAlgInfoOpen",(function(){return G})),n.d(o,"setViewportState",(function(){return w})),n.d(o,"startSolvingAction",(function(){return C})),n.d(o,"stopSolvingAction",(function(){return m})),n.d(o,"setAlgorithm",(function(){return b})),n.d(o,"setDelay",(function(){return U})),n.d(o,"setEvaluatingDetailLevel",(function(){return F})),n.d(o,"setShowBestPath",(function(){return V})),n.d(o,"resetSolverState",(function(){return H})),n.d(o,"startSolving",(function(){return R})),n.d(o,"goFullSpeed",(function(){return B})),n.d(o,"pause",(function(){return j})),n.d(o,"unpause",(function(){return k})),n.d(o,"stopSolving",(function(){return x})),n.d(o,"setEvaluatingPath",(function(){return W})),n.d(o,"setEvaluatingPaths",(function(){return Y})),n.d(o,"setBestPath",(function(){return Z})),n.d(o,"startDefiningPoints",(function(){return z})),n.d(o,"addDefinedPoint",(function(){return q})),n.d(o,"stopDefiningPoints",(function(){return J})),n.d(o,"setPointCount",(function(){return K})),n.d(o,"randomizePoints",(function(){return Q})),n.d(o,"setDefaultMap",(function(){return X}));var r=e=>{"undefined"!=typeof window&&window.dataLayer?window.dataLayer.push(e):console.log(e)};const s="SET_VIEWPORT_STATE",i="RESET_EVALUATING_STATE",u="RESET_BEST_PATH_STATE",l="SET_ALGORITHM",a="SET_DELAY",f="SET_EVALUATING_DETAIL_LEVEL",c="SET_SHOW_BEST_PATH",d="START_SOLVING",p="GO_FULL_SPEED",T="PAUSE",E="UNPAUSE",S="STOP_SOLVING",_="SET_BEST_PATH",v="SET_EVALUATING_PATHS",P="START_DEFINING_POINTS",g="ADD_DEFINED_POINT",y="STOP_DEFINING_POINTS",A="SET_POINT_COUNT",h="SET_POINTS",O="SET_DEFAULT_MAP",I="TOGGLE_SITE_INFO_OPEN",L="TOGGLE_ALG_INFO_OPEN",N=(e,t)=>Math.random()*(e-t)+t,D=()=>({type:I}),G=()=>({type:L}),w=e=>({type:s,viewport:e}),M=()=>({type:i}),C=(e,t,n)=>({type:d,points:e,delay:t,evaluatingDetailLevel:n,fullSpeed:!1}),m=()=>({type:S}),b=function(e,t){return void 0===t&&(t={}),n=>{n(M()),n(((e,t)=>({type:l,algorithm:e,defaults:t}))(e,t))}},U=e=>({type:a,delay:e}),F=e=>({type:f,level:e}),V=e=>({type:c,show:e}),H=()=>e=>{e(x()),e(M()),e({type:u})},R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{const{algorithm:o,pointCount:s}=n();r({event:"start-solving",algorithm:o,pointCount:s}),e(M()),e(C.apply(void 0,t))}},B=()=>({type:p}),j=()=>({type:T}),k=()=>({type:E}),x=()=>e=>{e(M()),e(m())},W=(e,t)=>({type:v,paths:[e],cost:t}),Y=(e,t)=>({type:v,paths:e,cost:t}),Z=(e,t)=>({type:_,path:e,cost:t}),z=()=>e=>{e(H()),e({type:P})},q=e=>({type:g,point:e}),J=()=>({type:y}),K=e=>t=>{t(H()),t((e=>({type:A,count:e}))(e))},Q=e=>(t,n)=>{const{pointCount:o}=n(),{top:r,bottom:s,left:i,right:u}=e,l=Array.from({length:o}).map(e=>[N(u,i),N(r,s)]);t(H()),t((e=>({type:h,points:e}))(l))},X=function(){return e=>{e(H()),e({type:O})}};const $=e=>e.slice(0,-1).map((t,n)=>((e,t)=>{const[n,o]=e,[r,s]=t;if(o===s&&n===r)return 0;var i=Math.PI*o/180,u=Math.PI*s/180,l=n-r,a=Math.PI*l/180,f=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos(a);return f>1&&(f=1),60*(f=180*(f=Math.acos(f))/Math.PI)*1.1515*1.609344})(t,e[n+1])).reduce((e,t)=>e+t,0),ee=[255,87,34,225],te=[180,180,180,240];(e=>{const t=(e=>async function(){await e.apply(void 0,arguments),self.postMessage(m())})(e);self.solverConfig={detailLevel:0,delay:10,fullSpeed:!1,paused:!1},self.setBestPath=function(){self.postMessage(Z.apply(o,arguments))},self.setEvaluatingPaths=function(e,t){if(void 0===t&&(t=1),self.solverConfig.detailLevel>=t){const{paths:t,cost:n}=e();self.postMessage(Y(t,n))}},self.setEvaluatingPath=function(e,t){if(void 0===t&&(t=1),self.solverConfig.detailLevel>=t){const{path:t,cost:n}=e();self.postMessage(W(t,n))}},self.waitPause=async()=>{for(;self.solverConfig.paused;)await new Promise(e=>setTimeout(e,500))},self.sleep=async()=>{if(self.solverConfig.paused)return await self.waitPause();const e=self.solverConfig.fullSpeed?0:self.solverConfig.delay||10;return new Promise(t=>{setTimeout(t,e)})},self.onmessage=async e=>{let{data:n}=e;switch(n.type){case d:self.solverConfig.delay=n.delay,self.solverConfig.detailLevel=n.evaluatingDetailLevel,self.solverConfig.fullSpeed=n.fullSpeed,t(n.points);break;case a:self.solverConfig.delay=n.delay;break;case f:self.solverConfig.detailLevel=n.level;break;case p:self.solverConfig.evaluatingDetailLevel=0,self.solverConfig.fullSpeed=!0;break;case T:self.solverConfig.paused=!0;break;case E:self.solverConfig.paused=!1;break;default:throw new Error("invalid action sent to solver "+n.type)}}})(async e=>{e.push(e[0]);let t=$(e),n=!0;for(self.setBestPath(e,t);n;){n=!1;for(let o=1;o<e.length-1;o++)for(let r=o+1;r<e.length-1;r++){const s=e.slice(o,r+1);s.reverse(),e.splice(o,r+1-o,...s);const i=e,u=$(i);self.setEvaluatingPaths(()=>({paths:[{path:e.slice(0,o),color:te},{path:e.slice(o+1,r),color:te},{path:e.slice(r+1),color:te},{path:[e[o-1],e[o],e[o+1]],color:ee},{path:[e[r-1],e[r],e[r+1]],color:ee}],cost:u})),await self.sleep(),u<t?(n=!0,t=u,self.setBestPath(i,t)):(s.reverse(),e.splice(o,r+1-o,...s)),self.setEvaluatingPaths(()=>({paths:[{path:e,color:te}]})),await self.sleep()}}})}});
//# sourceMappingURL=649ac63c40afbfbcbf9b.worker.js.map