!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s="2eBD")}({"2eBD":function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"SET_VIEWPORT_STATE",(function(){return s})),n.d(o,"RESET_EVALUATING_STATE",(function(){return u})),n.d(o,"RESET_BEST_PATH_STATE",(function(){return i})),n.d(o,"SET_ALGORITHM",(function(){return l})),n.d(o,"SET_DELAY",(function(){return a})),n.d(o,"SET_EVALUATING_DETAIL_LEVEL",(function(){return f})),n.d(o,"SET_SHOW_BEST_PATH",(function(){return c})),n.d(o,"START_SOLVING",(function(){return d})),n.d(o,"GO_FULL_SPEED",(function(){return p})),n.d(o,"PAUSE",(function(){return T})),n.d(o,"UNPAUSE",(function(){return E})),n.d(o,"STOP_SOLVING",(function(){return S})),n.d(o,"SET_BEST_PATH",(function(){return _})),n.d(o,"SET_EVALUATING_PATHS",(function(){return v})),n.d(o,"START_DEFINING_POINTS",(function(){return P})),n.d(o,"ADD_DEFINED_POINT",(function(){return g})),n.d(o,"STOP_DEFINING_POINTS",(function(){return y})),n.d(o,"SET_POINT_COUNT",(function(){return A})),n.d(o,"SET_POINTS",(function(){return h})),n.d(o,"SET_DEFAULT_MAP",(function(){return O})),n.d(o,"TOGGLE_SITE_INFO_OPEN",(function(){return I})),n.d(o,"TOGGLE_ALG_INFO_OPEN",(function(){return L})),n.d(o,"toggleSiteInfoOpen",(function(){return D})),n.d(o,"toggleAlgInfoOpen",(function(){return G})),n.d(o,"setViewportState",(function(){return w})),n.d(o,"startSolvingAction",(function(){return C})),n.d(o,"stopSolvingAction",(function(){return m})),n.d(o,"setAlgorithm",(function(){return b})),n.d(o,"setDelay",(function(){return U})),n.d(o,"setEvaluatingDetailLevel",(function(){return F})),n.d(o,"setShowBestPath",(function(){return V})),n.d(o,"resetSolverState",(function(){return B})),n.d(o,"startSolving",(function(){return H})),n.d(o,"goFullSpeed",(function(){return R})),n.d(o,"pause",(function(){return j})),n.d(o,"unpause",(function(){return k})),n.d(o,"stopSolving",(function(){return x})),n.d(o,"setEvaluatingPath",(function(){return W})),n.d(o,"setEvaluatingPaths",(function(){return Y})),n.d(o,"setBestPath",(function(){return z})),n.d(o,"startDefiningPoints",(function(){return q})),n.d(o,"addDefinedPoint",(function(){return J})),n.d(o,"stopDefiningPoints",(function(){return K})),n.d(o,"setPointCount",(function(){return Q})),n.d(o,"randomizePoints",(function(){return X})),n.d(o,"setDefaultMap",(function(){return Z}));var r=t=>{"undefined"!=typeof window&&window.dataLayer?window.dataLayer.push(t):console.log(t)};const s="SET_VIEWPORT_STATE",u="RESET_EVALUATING_STATE",i="RESET_BEST_PATH_STATE",l="SET_ALGORITHM",a="SET_DELAY",f="SET_EVALUATING_DETAIL_LEVEL",c="SET_SHOW_BEST_PATH",d="START_SOLVING",p="GO_FULL_SPEED",T="PAUSE",E="UNPAUSE",S="STOP_SOLVING",_="SET_BEST_PATH",v="SET_EVALUATING_PATHS",P="START_DEFINING_POINTS",g="ADD_DEFINED_POINT",y="STOP_DEFINING_POINTS",A="SET_POINT_COUNT",h="SET_POINTS",O="SET_DEFAULT_MAP",I="TOGGLE_SITE_INFO_OPEN",L="TOGGLE_ALG_INFO_OPEN",N=(t,e)=>Math.random()*(t-e)+e,D=()=>({type:I}),G=()=>({type:L}),w=t=>({type:s,viewport:t}),M=()=>({type:u}),C=(t,e,n)=>({type:d,points:t,delay:e,evaluatingDetailLevel:n,fullSpeed:!1}),m=()=>({type:S}),b=function(t,e){return void 0===e&&(e={}),n=>{n(M()),n(((t,e)=>({type:l,algorithm:t,defaults:e}))(t,e))}},U=t=>({type:a,delay:t}),F=t=>({type:f,level:t}),V=t=>({type:c,show:t}),B=()=>t=>{t(x()),t(M()),t({type:i})},H=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(t,n)=>{const{algorithm:o,pointCount:s}=n();r({event:"start-solving",algorithm:o,pointCount:s}),t(M()),t(C.apply(void 0,e))}},R=()=>({type:p}),j=()=>({type:T}),k=()=>({type:E}),x=()=>t=>{t(M()),t(m())},W=(t,e)=>({type:v,paths:[t],cost:e}),Y=(t,e)=>({type:v,paths:t,cost:e}),z=(t,e)=>({type:_,path:t,cost:e}),q=()=>t=>{t(B()),t({type:P})},J=t=>({type:g,point:t}),K=()=>({type:y}),Q=t=>e=>{e(B()),e((t=>({type:A,count:t}))(t))},X=t=>(e,n)=>{const{pointCount:o}=n(),{top:r,bottom:s,left:u,right:i}=t,l=Array.from({length:o}).map(t=>[N(i,u),N(r,s)]);e(B()),e((t=>({type:h,points:t}))(l))},Z=function(){return t=>{t(B()),t({type:O})}};const $=(t,e)=>{const[n,o]=t,[r,s]=e;if(o===s&&n===r)return 0;var u=Math.PI*o/180,i=Math.PI*s/180,l=n-r,a=Math.PI*l/180,f=Math.sin(u)*Math.sin(i)+Math.cos(u)*Math.cos(i)*Math.cos(a);return f>1&&(f=1),60*(f=180*(f=Math.acos(f))/Math.PI)*1.1515*1.609344},tt=t=>t.slice(0,-1).map((e,n)=>$(e,t[n+1])).reduce((t,e)=>t+e,0);(t=>{const e=(t=>async function(){await t.apply(void 0,arguments),self.postMessage(m())})(t);self.solverConfig={detailLevel:0,delay:10,fullSpeed:!1,paused:!1},self.setBestPath=function(){self.postMessage(z.apply(o,arguments))},self.setEvaluatingPaths=function(t,e){if(void 0===e&&(e=1),self.solverConfig.detailLevel>=e){const{paths:e,cost:n}=t();self.postMessage(Y(e,n))}},self.setEvaluatingPath=function(t,e){if(void 0===e&&(e=1),self.solverConfig.detailLevel>=e){const{path:e,cost:n}=t();self.postMessage(W(e,n))}},self.waitPause=async()=>{for(;self.solverConfig.paused;)await new Promise(t=>setTimeout(t,500))},self.sleep=async()=>{if(self.solverConfig.paused)return await self.waitPause();const t=self.solverConfig.fullSpeed?0:self.solverConfig.delay||10;return new Promise(e=>{setTimeout(e,t)})},self.onmessage=async t=>{let{data:n}=t;switch(n.type){case d:self.solverConfig.delay=n.delay,self.solverConfig.detailLevel=n.evaluatingDetailLevel,self.solverConfig.fullSpeed=n.fullSpeed,e(n.points);break;case a:self.solverConfig.delay=n.delay;break;case f:self.solverConfig.detailLevel=n.level;break;case p:self.solverConfig.evaluatingDetailLevel=0,self.solverConfig.fullSpeed=!0;break;case T:self.solverConfig.paused=!0;break;case E:self.solverConfig.paused=!1;break;default:throw new Error("invalid action sent to solver "+n.type)}}})(async t=>{const e=[t.shift()];for(t.sort((t,n)=>$(e[0],n)-$(e[0],t)),e.push(t.pop()),self.setEvaluatingPaths(()=>({paths:[{path:e}],cost:tt(e)})),await self.sleep();t.length>0;){let[n,o]=[0,null];for(const[i,l]of t.entries()){let[t,r]=[1/0,null];for(const n of e){const e=$(l,n);e<t&&([t,r]=[e,i])}t>n&&([n,o]=[t,r])}const[r]=t.splice(o,1);let[s,u]=[1/0,null];for(let t=1;t<e.length;t++){const n=tt([e[t-1],r,e[t]]);n<s&&([s,u]=[n,t])}e.splice(u,0,r),self.setEvaluatingPaths(()=>({paths:[{path:e}],cost:tt(e)})),await self.sleep()}e.push(e[0]);const n=tt(e);self.setEvaluatingPaths(()=>({paths:[{path:e}],cost:n})),await self.sleep(),self.setBestPath(e,n)})}});
//# sourceMappingURL=28a67feed30bd6265251.worker.js.map